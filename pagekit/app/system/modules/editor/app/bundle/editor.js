var Editor=function(e){function t(o){if(i[o])return i[o].exports;var a=i[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var o,a;o=i(7),a=i(14),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t){e.exports={created:function(){var e=this,t=$(this.$parent.$els.editor),i=t.parent();i.addClass("pk-editor"),this.$asset({css:["app/assets/codemirror/hint.css","app/assets/codemirror/codemirror.css"],js:["app/assets/codemirror/codemirror.js"]}).then(function(){this.editor=CodeMirror.fromTextArea(this.$parent.$els.editor,_.extend({mode:"htmlmixed",dragDrop:!1,autoCloseTags:!0,matchTags:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4},this.$parent.options)),i.attr("data-uk-check-display","true").on("display.uk.check",function(t){e.editor.refresh()}),this.editor.on("change",function(){e.editor.save(),t.trigger("input")}),this.$watch("$parent.value",function(e){e!=this.editor.getValue()&&this.editor.setValue(e)}),this.$emit("ready")})}}},function(e,t){e.exports={created:function(){this.$parent.$set("height",this.$parent.height+47),this.$asset({css:["app/assets/codemirror/hint.css","app/assets/codemirror/codemirror.css"],js:["app/assets/codemirror/codemirror.js","app/assets/marked/marked.js","app/assets/uikit/js/components/htmleditor.min.js"]}).then(function(){var e=this.$parent.editor=UIkit.htmleditor(this.$parent.$els.editor,_.extend({marked:window.marked,CodeMirror:window.CodeMirror},this.$parent.options));e.element.on("htmleditor-save",function(e,t){if(t.element[0].form){var i=document.createEvent("HTMLEvents");i.initEvent("submit",!0,!1),t.element[0].form.dispatchEvent(i)}}),e.on("render",function(){var t=/<script(.*)>[^<]+<\/script>|<style(.*)>[^<]+<\/style>/gi;e.replaceInPreview(t,"")}),this.$watch("$parent.value",function(t){t!=e.editor.getValue()&&e.editor.setValue(t)}),this.$watch("$parent.options.markdown",function(t){e.trigger(t?"enableMarkdown":"disableMarkdown")},{immediate:!0}),this.$emit("ready")})}}},function(e,t,i){e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.images=[],t.off("action.image").on("action.image",function(t,i){e.openModal(_.find(e.images,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){var i="gfm"!=t.getMode()?/<img(.+?)>/gi:/(?:<img(.+?)>|!(?:\[([^\n\]]*)])(?:\(([^\n\]]*?)\))?)/gi;e.images=t.replaceInPreview(i,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("image-preview").each(function(){e.$compile(this)})})}))},methods:{openModal:function(e){var t=new DOMParser,i=this.$parent.editor,o=i.editor.getCursor();e||(e={replace:function(e){i.editor.replaceRange(e,o)}}),new this.$parent.$options.utils["image-picker"]({parent:this,data:{image:e}}).$mount().$appendTo("body").$on("select",function(e){var o;"html"==(e.tag||i.getCursorMode())?(e.anchor||(e.anchor=t.parseFromString("<img>","text/html").body.childNodes[0]),e.anchor.setAttribute("src",e.data.src),e.anchor.setAttribute("alt",e.data.alt),o=e.anchor.outerHTML):o="!["+e.data.alt+"]("+e.data.src+")",e.replace(o)})},replaceInPreview:function(e,t){var i=new DOMParser;return e.data={},"<"==e.matches[0][0]?(e.anchor=i.parseFromString(e.matches[0],"text/html").body.childNodes[0],e.data.src=e.anchor.attributes.src?e.anchor.attributes.src.nodeValue:"",e.data.alt=e.anchor.attributes.alt?e.anchor.attributes.alt.nodeValue:"",e.tag="html"):(e.data.src=e.matches[3],e.data.alt=e.matches[2],e.tag="gfm"),'<image-preview index="'+t+'"></image-preview>'}},components:{"image-preview":i(22)}}},function(e,t,i){e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.links=[],t.off("action.link").on("action.link",function(t,i){e.openModal(_.find(e.links,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){var i="gfm"!=t.getMode()?/<a(?:\s.+?>|\s*>)(?:[^<]*)<\/a>/gi:/<a(?:\s.+?>|\s*>)(?:[^<]*)<\/a>|(?:\[([^\n\]]*)\])(?:\(([^\n\]]*)\))?/gi;e.links=t.replaceInPreview(i,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("link-preview").each(function(){e.$compile(this)})})}))},methods:{openModal:function(e){var t=new DOMParser,i=this.$parent.editor,o=i.editor.getCursor();e||(e={replace:function(e){i.editor.replaceRange(e,o)}}),new this.$parent.$options.utils["link-picker"]({parent:this,data:{link:e}}).$mount().$appendTo("body").$on("select",function(e){e.anchor||(e.anchor=t.parseFromString("<a></a>","text/html").body.childNodes[0]),e.anchor.setAttribute("href",e.link),e.anchor.innerHTML=e.txt,e.replace(e.anchor.outerHTML)})},replaceInPreview:function(e,t){var i=new DOMParser;if(e.data={},"<"==e.matches[0][0])e.anchor=i.parseFromString(e.matches[0],"text/html").body.childNodes[0],e.link=e.anchor.attributes.href?e.anchor.attributes.href.nodeValue:"",e.txt=e.anchor.innerHTML;else{if("!"==e.matches[e.matches.length-1][e.matches[e.matches.length-2]-1])return!1;e.link=e.matches[2],e.txt=e.matches[1]}return'<link-preview index="'+t+'"></link-preview>'}},components:{"link-preview":i(24)}}},function(e,t){e.exports={plugin:!0,created:function(){var e=this.editor;e&&e.htmleditor&&e.element.on("renderLate",function(){e.replaceInPreview(/src=["'](.+?)["']/gi,function(e){var t=e.matches[0];return e.matches[1].match(/^(\/|http:|https:|ftp:)/i)||(t=t.replace(e.matches[1],Vue.url(e.matches[1],!0))),t})})}}},function(e,t,i){e.exports={plugin:!0,created:function(){var e=this,t=this.$parent.editor;t&&t.htmleditor&&(this.videos=[],t.addButton("video",{title:"Video",label:'<i class="uk-icon-video-camera"></i>'}),t.options.toolbar.push("video"),t.on("action.video",function(t,i){e.openModal(_.find(e.videos,function(e){return e.inRange(i.getCursor())}))}).on("render",function(){e.videos=t.replaceInPreview(/<(video|iframe)([^>]*)>[^<]*<\/(?:video|iframe)>|\(video\)(\{.+?})/gi,e.replaceInPreview)}).on("renderLate",function(){for(;e.$children.length;)e.$children[0].$destroy();Vue.nextTick(function(){t.preview.find("video-preview").each(function(){e.$compile(this)})})}),t.debouncedRedraw())},methods:{openModal:function(e){var t=new DOMParser,i=this.$parent.editor,o=i.editor.getCursor();e||(e={replace:function(e){i.editor.replaceRange(e,o)}});var a=new this.$parent.$options.utils["video-picker"]({parent:this,data:{video:e}}).$mount().$appendTo("body").$on("select",function(e){var i,o,r;delete e.data.playlist,(r=a.isYoutube)?(o="https://www.youtube.com/embed/"+r[1]+"?",e.data.loop&&(e.data.playlist=r[1])):(r=a.isVimeo)&&(o="https://player.vimeo.com/video/"+r[3]+"?"),o?(e.anchor||(e.anchor=t.parseFromString("<iframe></iframe>","text/html").body.childNodes[0]),_.forEach(e.data,function(e,t){"src"!==t&&"width"!==t&&"height"!==t&&(o+=t+"="+(_.isBoolean(e)?Number(e):e)+"&")}),e.attributes=e.attributes||{},e.attributes.src=o.slice(0,-1),e.attributes.width=e.data.width||690,e.attributes.height=e.data.height||390,e.attributes.allowfullscreen=!0,i=e.attributes):(e.anchor||(e.anchor=t.parseFromString("<video></video>","text/html").body.childNodes[0]),i=e.data),_.forEach(i,function(t,i){t?e.anchor.setAttribute(i,_.isBoolean(t)?"":t):e.anchor.removeAttribute(i)}),e.replace(e.anchor.outerHTML)})},replaceInPreview:function(e,t){var i,o,a,r=new DOMParser;if(e.matches[3]){try{i=JSON.parse(e.matches[3])}catch(s){}e.data=i||{src:""}}else e.data={},e.anchor=r.parseFromString(e.matches[0],"text/html").body.childNodes[0],"VIDEO"===e.anchor.nodeName?(_.forEach(e.anchor.attributes,function(t){e.data[t.name]=""===t.nodeValue||t.nodeValue}),e.data.controls=void 0!==e.data.controls):"IFRAME"===e.anchor.nodeName&&(e.attributes={},_.forEach(e.anchor.attributes,function(t){e.attributes[t.name]=""===t.nodeValue||t.nodeValue}),o=e.attributes.src||"",o=o.split("?"),a=o[1]||"",o=o[0],a.split("&").forEach(function(t){t=t.split("="),e.data[t[0]]=t[1]}),e.data.src=o,e.attributes.width&&(e.data.width=e.attributes.width),e.attributes.height&&(e.data.height=e.attributes.height));return'<video-preview index="'+t+'"></video-preview>'}},components:{"video-preview":i(26)}}},function(e,t,i){"use strict";e.exports={props:["type","value","options"],data:function(){return{editor:{},height:500}},compiled:function(){if(this.options&&this.options.height&&(this.height=this.options.height),this.$el.hasAttributes())for(var e=this.$el.attributes,t=e.length-1;t>=0;t--)this.$els.editor.setAttribute(e[t].name,e[t].value),this.$el.removeAttribute(e[t].name);var i=this.$options.components,o="editor-"+this.type,a=this,r=i[o]||i["editor-"+window.$pagekit.editor]||i["editor-textarea"];new r({parent:this}).$on("ready",function(){_.forIn(a.$options.components,function(e){e.options&&e.options.plugin&&new e({parent:a})},this)})},components:{"editor-textarea":{created:function(){this.$emit("ready"),this.$parent.$set("show",!0)}},"editor-html":i(2),"editor-code":i(1),"plugin-link":i(4),"plugin-image":i(3),"plugin-video":i(6),"plugin-url":i(5)},utils:{"image-picker":Vue.extend(i(21)),"video-picker":Vue.extend(i(25)),"link-picker":Vue.extend(i(23))}},Vue.component("v-editor",function(t){t(e.exports)})},function(e,t){"use strict";e.exports={data:function(){return{image:{data:{src:"",alt:""}}}},ready:function(){this.$refs.modal.open(),this.$on("image-selected",function(e){if(e&&!this.image.data.alt){var t=e.split("/").slice(-1)[0].replace(/\.(jpeg|jpg|png|svg|gif)$/i,"").replace(/(_|-)/g," ").trim(),i=t.charAt(0).toUpperCase();this.image.data.alt=i+t.substr(1)}})},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close(),this.$emit("select",this.image)}}}},function(e,t){"use strict";e.exports={props:["index"],computed:{image:function(){return this.$parent.images[this.index]||{}}},methods:{config:function(){this.$parent.openModal(this.image)},remove:function(){this.image.replace("")}}}},function(e,t){"use strict";e.exports={data:function(){return{link:{link:"",txt:"","class":""}}},ready:function(){this.$refs.modal.open()},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close(),this.$emit("select",this.link)}}}},function(e,t){"use strict";e.exports={props:["index"],computed:{link:function(){return this.$parent.links[this.index]||{}}}}},function(e,t){"use strict";e.exports={data:function(){return{video:{data:{src:"",controls:!0}}}},ready:function(){this.$refs.modal.open()},computed:{isYoutube:function(){return this.video.data.src?this.video.data.src.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/):!1},isVimeo:function(){return this.video.data.src?this.video.data.src.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/):!1}},methods:{close:function(){this.$destroy(!0)},update:function(){this.$refs.modal.close(),this.$emit("select",this.video)}}}},function(e,t){"use strict";e.exports={props:["index"],data:function(){return{imageSrc:!1,videoSrc:!1,width:"",height:""}},watch:{"video.data":{handler:"update",immediate:!0,deep:!0}},computed:{video:function(){return this.$parent.videos[this.index]||{}}},methods:{config:function(){this.$parent.openModal(this.video)},remove:function(){this.video.replace("")},update:function(e){var t;this.$set("imageSrc",!1),this.$set("videoSrc",!1),this.$set("width",e.width||690),this.$set("height",e.height||390);var i=e.src||"";(t=i.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/))?this.imageSrc="//img.youtube.com/vi/"+t[1]+"/hqdefault.jpg":i.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/)?this.$http.get("http://vimeo.com/api/oembed.json",{url:i},{cache:10}).then(function(e){this.imageSrc=e.data.thumbnail_url}):this.videoSrc=this.$url(i)}}}},function(e,t){e.exports="<div> <textarea autocomplete=off :style=\"{height:height + 'px'}\" :class=\"{'uk-invisible': !show}\" v-el:editor v-model=value></textarea> </div>"},function(e,t){e.exports="<div> <v-modal v-ref:modal :closed=close> <form class=\"uk-form uk-form-stacked\" @submit.prevent=update> <div class=uk-modal-header> <h2>{{ 'Add Image' | trans }}</h2> </div> <div class=uk-form-row> <input-image :source.sync=image.data.src></input-image> </div> <div class=uk-form-row> <label for=form-src class=uk-form-label>{{ 'URL' | trans }}</label> <div class=uk-form-controls> <input id=form-src class=uk-width-1-1 type=text v-model=image.data.src lazy> </div> </div> <div class=uk-form-row> <label for=form-alt class=uk-form-label>{{ 'Alt' | trans }}</label> <div class=uk-form-controls> <input id=form-alt class=uk-width-1-1 type=text v-model=image.data.alt> </div> </div> <div class=\"uk-modal-footer uk-text-right\"> <button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button> </div> </form> </v-modal> </div>"},function(e,t){e.exports='<div class="uk-panel uk-placeholder uk-placeholder-large uk-text-center uk-visible-hover" v-if=!image.data.src> <img width=60 height=60 :alt="\'Placeholder Image\' | trans" :src="$url(\'app/system/assets/images/placeholder-image.svg\')"> <p class="uk-text-muted uk-margin-small-top">{{ \'Add Image\' | trans }}</p> <a class=uk-position-cover @click.prevent=config></a> <div class="uk-panel-badge pk-panel-badge uk-hidden"> <ul class="uk-subnav pk-subnav-icon"> <li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li> </ul> </div> </div> <div class="uk-overlay uk-overlay-hover uk-visible-hover" v-else> <img :src=$url(image.data.src) :alt=image.data.alt> <div class="uk-overlay-panel uk-overlay-background uk-overlay-fade"></div> <a class=uk-position-cover @click.prevent=config></a> <div class="uk-panel-badge pk-panel-badge uk-hidden"> <ul class="uk-subnav pk-subnav-icon"> <li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li> </ul> </div> </div>'},function(e,t){e.exports="<div> <v-modal v-ref:modal :closed=close> <form class=\"uk-form uk-form-stacked\" @submit.prevent=update> <div class=uk-modal-header> <h2>{{ 'Add Link' | trans }}</h2> </div> <div class=uk-form-row> <label for=form-link-title class=uk-form-label>{{ 'Title' | trans }}</label> <div class=uk-form-controls> <input id=form-link-title class=uk-width-1-1 type=text v-model=link.txt> </div> </div> <div class=uk-form-row> <label for=form-link-url class=uk-form-label>{{ 'Url' | trans }}</label> <div class=uk-form-controls> <input-link id=form-link-url class=uk-width-1-1 :link.sync=link.link></input-link> </div> </div> <div class=\"uk-modal-footer uk-text-right\"> <button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button> </div> </form> </v-modal> </div>"},function(e,t){e.exports="<a :class=link.class :href=link.link @click.prevent=$parent.openModal(link)><span v-html=link.txt v-if=link.txt></span><span v-else>{{ 'Select Link' | trans }}</span> <span class=\"pk-icon-link pk-icon-hover\"></span></a>"},function(e,t){e.exports="<div> <v-modal v-ref:modal :closed=close> <form class=\"uk-form uk-form-stacked\" @submit.prevent=update> <div class=uk-modal-header> <h2>{{ 'Add Video' | trans }}</h2> </div> <div class=uk-form-row> <input-video :source.sync=video.data.src></input-video> </div> <div class=uk-form-row> <label for=form-src class=uk-form-label>{{ 'URL' | trans }}</label> <div class=uk-form-controls> <input id=form-src class=uk-width-1-1 type=text v-model=video.data.src debounce=500> </div> </div> <div class=\"uk-grid uk-grid-width-1-2 uk-form-row\"> <div> <label for=form-src class=uk-form-label>{{ 'Width' | trans }}</label> <input class=uk-width-1-1 id=form-width type=text :placeholder=\"'auto' | trans\" v-model=video.data.width> </div> <div> <label for=form-src class=uk-form-label>{{ 'Height' | trans }}</label> <input class=uk-width-1-1 id=form-height type=text :disabled=\"!isVimeo && !isYoutube\" :placeholder=\"'auto' | trans\" v-model=video.data.height> </div> </div> <div class=uk-form-row> <label><input type=checkbox v-model=video.data.autoplay> {{ 'Autoplay' | trans }}</label> <label class=uk-margin-small-left v-show=!isVimeo><input type=checkbox v-model=video.data.controls> {{ 'Controls' | trans }}</label> <label class=uk-margin-small-left><input type=checkbox v-model=video.data.loop> {{ 'Loop' | trans }}</label> <label class=uk-margin-small-left v-show=\"!isVimeo && !isYoutube\"><input type=checkbox v-model=video.data.muted> {{ 'Muted' | trans }}</label> </div> <div class=uk-form-row v-show=\"!isYoutube && !isVimeo\"> <span class=uk-form-label>{{ 'Poster Image' | trans }}</span> <div class=uk-form-controls> <input-image class=uk-width-1-1 :source.sync=video.data.poster></input-image> </div> </div> <div class=\"uk-modal-footer uk-text-right\"> <button class=\"uk-button uk-button-link uk-modal-close\" type=button>{{ 'Cancel' | trans }}</button> <button class=\"uk-button uk-button-link\" type=submit>{{ 'Update' | trans }}</button> </div> </form> </v-modal> </div>"},function(e,t){e.exports='<div class="uk-panel uk-placeholder uk-placeholder-large uk-text-center uk-visible-hover" v-if=!video.data.src> <img width=60 height=60 :alt="\'Placeholder Video\' | trans" :src="$url(\'app/system/assets/images/placeholder-video.svg\')"> <p class="uk-text-muted uk-margin-small-top">{{ \'Add Video\' | trans }}</p> <a class=uk-position-cover @click.prevent=config></a> <div class="uk-panel-badge pk-panel-badge uk-hidden"> <ul class="uk-subnav pk-subnav-icon"> <li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li> </ul> </div> </div> <div class="uk-overlay uk-overlay-hover uk-visible-hover" v-else> <img :src=imageSrc v-if=imageSrc> <video class=uk-responsive-width :src=videoSrc :width=width :height=height v-if=videoSrc></video> <div class="uk-overlay-panel uk-overlay-background uk-overlay-fade"></div> <a class=uk-position-cover @click.prevent=config></a> <div class="uk-panel-badge pk-panel-badge uk-hidden"> <ul class="uk-subnav pk-subnav-icon"> <li><a class="pk-icon-delete pk-icon-hover" :title="\'Delete\' | trans" data-uk-tooltip="{delay: 500}" @click.prevent=remove></a></li> </ul> </div> </div>'},function(e,t,i){var o,a;o=i(8),a=i(15),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,i){var o,a;o=i(9),a=i(16),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,i){var o,a;o=i(10),a=i(17),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,i){var o,a;o=i(11),a=i(18),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,i){var o,a;o=i(12),a=i(19),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,i){var o,a;o=i(13),a=i(20),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)}]);