/*! For license information please see xrviewer.js.LICENSE.txt */
(()=>{"use strict";var e,t={1930:(e,t,n)=>{var r,o,i,a,c,u,s,l=n(7294),f=n(745),h=n(9477),d=n(1184),p=n(5953),g=n(8412),m=n(2788);function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(0,m.vJ)(r||(r=v(["\n    body {\n        font-family: sans-serif;\n        font-size: 10px;\n        text-align: center;\n        /* margin: 20px; */\n        margin:0px !important;\n        color: #ccc;\n        background-color: #121212;\n        overflow: hidden;\n        height: 100vh;\n    }\n    .xr-button{\n        border-radius: 8px;\n        opacity: 1;\n        user-select: auto;\n        padding: 8px 12px 8px 12px;\n        font-family: sans-serif;\n        border-radius: 100px;\n        line-height: 10px;\n        font-size: 10px;\n\n        box-shadow: 0 3px 4px -1px rgb(0 0 0 / 48%);\n        color: rgba(255,255,255,0.9);\n        background: rgba(29,53,59,0.7);\n        backdrop-filter: blur(14px);\n        border-bottom: 1px solid rgba(255,255,255,0.08);\n        margin:15px 5px;\n        z-index: 11;\n        cursor: pointer;\n    }\n\n    .xr-button:hover{\n        background: linear-gradient(99deg, rgb(7, 136, 255) 0%, rgb(153, 0, 255) 100%);\n        border-bottom: 1px solid rgba(255,255,255,0.24);\n    }\n"]))),x=m.ZP.div(o||(o=v(["\n    display: flex;\n    flex-direction: row-reverse;\n"]))),b=m.ZP.div(i||(i=v(["\n    width: calc(100% - 40px);\n    padding: 20px;\n    gap: 1rem;\n    overflow-x: auto;\n    z-index: 100;\n    bottom: 0px;\n    position: absolute;\n    display: flex;\n    flex-flow: row;\n"]))),w=m.ZP.img(a||(a=v(["\n    padding:20px;\n    scroll-snap-align: start;\n    flex: 0 0 60px;\n    width: 60px;\n    height: 60px;\n    border-radius: 5px;\n    object-fit: contain;\n    background: #ffffff40;\n    padding: 12px;\n"]))),j=m.ZP.div(c||(c=v(["\n    position: absolute;\n    left: 50%;\n    top: 0px;\n    transform: translate(-50%, 0);\n    margin: 0 auto;\n    z-index: 10;\n    display:flex;\n"]))),S=m.ZP.div(u||(u=v(["\n    border-radius: 8px;\n    opacity: 1;\n    user-select: auto;\n    padding: 8px 12px 8px 12px;\n    font-family: 'Inter', sans-serif;\n    border-radius: 100px;\n    line-height: 10px;\n    font-size: 10px;\n\n    box-shadow: 0 3px 4px -1px rgb(0 0 0 / 48%);\n    color: rgba(255,255,255,0.9);\n    background: rgba(29,53,59,0.7);\n    backdrop-filter: blur(14px);\n    border-bottom: 1px solid rgba(255,255,255,0.08);\n    margin:15px 5px;\n    z-index: 11;\n    cursor: pointer;\n\n    &:hover {\n        background: linear-gradient(99deg, rgb(7, 136, 255) 0%, rgb(153, 0, 255) 100%);\n        border-bottom: 1px solid rgba(255,255,255,0.24);\n    }\n"]))),L=m.ZP.div(s||(s=v(["\n    flex: 1;\n    height:100vh;\n    width:100vw;\n"]))),E=n(3577),P=n(6037),O=n(5893);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const k=function(e){var t,n,r=e.orbitRef,o=e.cameraSheetObj,i=(t=(0,l.useState)(!0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return(0,d.A)((function(){o.current.value.control?c(!0):c(!1)})),(0,O.jsx)(O.Fragment,{children:a?(0,O.jsx)(P.z,{ref:r}):(0,O.jsx)(O.Fragment,{})})};var A=n(7433),_=n(9040),B=n(7395),F=n(6381);function z(e,t,n){return e.find((function(e){return e.type===n}))||null}function T(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))}var C;function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const M=function(e){var t=e.cameraRef,n=e.cameraSheetObj,r=e.baseUnit,o=e.aspect,i=(0,l.useRef)(null),a=((0,l.useRef)(null),(0,l.useRef)(null),(0,d.z)()),c=a.invalidate,u=a.scene,s=U((0,l.useState)(o),2),f=s[0],p=s[1];(0,l.useLayoutEffect)((function(){function e(){p(window.innerWidth/window.innerHeight),window.studio.transaction((function(e){(0,e.set)(n.current.props.aspect,window.innerWidth/window.innerHeight)}))}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]);var g=U((0,l.useState)(!0),2),m=g[0],v=g[1],y=U((0,l.useState)(!1),2),x=y[0],b=y[1],w=(0,l.useRef)(t.current);return(0,l.useEffect)((function(){var e=z(u.children,0,"CameraHelper");null===e||u.remove(e),w.current=new h.CameraHelper(t.current),u.add(w.current),function(e,t){var n=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[1].children[0].children[1],r=e.children,o=z(r,0,"CameraHelper");n.removeEventListener("click",C),C=function(i){return r.includes(o)?(i.stopPropagation(),new Promise((function(e,n){console.log("remove step 1 - remove helper first"),o.removeFromParent(),t(),setTimeout((function(){return e(1)}),1)})).then((function(e){console.log("remove step 2 - click btn second"),n.children[1].click()}))):(console.log("remove step 3 - snapshot opened"),setTimeout((function(){var n=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[2].children[8].children[0].children[0];n.addEventListener("click",(function i(){return r.includes(o)||new Promise((function(e,t){console.log("add step 1 - close window first"),setTimeout((function(){return e(1)}),1)})).then((function(n){console.log("add step 2 - add cameraHelper"),e.add(o),t()})),n.removeEventListener("click",i),!0}))}),1)),!0},n.addEventListener("click",C)}(u,c),w.current.visible=!!x}),[m,,x]),(0,l.useEffect)((function(){n.current.onValuesChange((function(e){v(e.isPerspective),b(e.helper),t.current&&(t.current.position.x=e.position.x,t.current.position.y=e.position.y,t.current.position.z=e.position.z,t.current.rotation.x=e.rotation.x,t.current.rotation.y=e.rotation.y,t.current.rotation.z=e.rotation.z,t.current.scale.x=e.scale.x,t.current.scale.y=e.scale.y,t.current.scale.z=e.scale.z,t.current.near=e.near,t.current.far=e.far,t.current.fov=e.fov,t.current.zoom=e.zoom,t.current.aspect=e.aspect,t.current.matrixWorldNeedsUpdate=!0,t.current.updateProjectionMatrix(),t.current.updateMatrixWorld()),w.current&&w.current.update(),e.control||i.current&&(i.current.position.x=e.position.x,i.current.position.y=e.position.y,i.current.position.z=e.position.z,i.current.rotation.x=e.rotation.x,i.current.rotation.y=e.rotation.y,i.current.rotation.z=e.rotation.z,i.current.scale.x=e.scale.x,i.current.scale.y=e.scale.y,i.current.scale.z=e.scale.z,i.current.near=e.near,i.current.far=e.far,i.current.fov=e.fov,i.current.zoom=e.zoom,i.current.aspect=e.aspect,i.current.matrixWorldNeedsUpdate=!0,i.current.updateProjectionMatrix(),i.current.updateMatrixWorld()),c()}))}),[]),(0,O.jsxs)(O.Fragment,{children:[m?(0,O.jsx)(A.c,{ref:i,makeDefault:!0,near:.01,far:1e4,fov:60,zoom:1,aspect:f,position:[0,0,r]}):(0,O.jsx)(_.i,{ref:i,makeDefault:!0,near:.01,zoom:1,far:1e4,position:[0,0,r]}),(0,O.jsx)(B.Ah.group,{theatreKey:" - Camera Controller",objRef:n,additionalProps:{control:!0,isPerspective:m,helper:x,near:.01,far:1e4,fov:60,zoom:1,aspect:F.types.number(f,{nudgeMultiplier:.1,range:[0,100]})},position:[0,0,r],children:m?(0,O.jsx)(A.c,{ref:t}):(0,O.jsx)(_.i,{ref:t})})]})};var H=n(2162),I=n(5166);const N=function(e){var t=e.cameraSheetObj,n=e.children,r=(0,d.z)(),o=r.invalidate,i=r.scene,a=(r.gl,r.camera,function(){var e=(0,g.nH)(),n=e.player,r=e.isPresenting;return e.session,(0,l.useEffect)((function(){var e=i.children;if(r){n.visible=!1,z(e,0,"CameraHelper").visible=!1;var a=Math.sqrt(3),c=t.current.value.position.x,u=t.current.value.position.y,s=t.current.value.position.z,l=t.current.value.rotation.x,f=t.current.value.rotation.y,h=t.current.value.rotation.z,d=t.current.value.fov,p=t.current.value.zoom;n.position.x=c,n.position.y=u-1.6,n.position.z=s*Math.tan(d/(2*p)*Math.PI/180)*a,n.rotation.x=l,n.rotation.y=f,n.rotation.z=h,n.children[0].position.y=0,console.log(n),setTimeout((function(){n.visible=!0,o()}),1)}}),[r]),null});return(0,O.jsxs)(g.XR,{children:[(0,O.jsx)(H.z,{}),(0,O.jsx)(I.D,{}),n,(0,O.jsx)(a,{})]})};var G,W,V=n(1217),Z=n(2854),q=n(4092),K="https://172.22.0.20:8222",X="/external",Y=n(9075),Q=n(9167);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee="https://unpkg.com/three@0.".concat(h.REVISION,".x");G=(new Z._).setDecoderPath("".concat(ee,"/examples/js/libs/draco/gltf/")),W=(new q.a).setTranscoderPath("".concat(ee,"/examples/js/libs/basis/")),G.preload();var te=function(e){var t=(0,l.useRef)(null),n=(0,l.useRef)(null),r=(0,l.useRef)(null),o=$((0,l.useState)(1),2),i=(o[0],o[1],$((0,l.useState)(1),2)),a=i[0],c=i[1],u=$((0,l.useState)(!1),2),s=u[0],f=u[1],p=(0,d.z)(),g=p.invalidate,m=p.scene,v=(p.gl,p.camera,(0,l.useRef)(null),(0,d.D)(V.E,"".concat(e.modelSrc),(function(t){console.log("finsihed model loading from:"+e.modelSrc),t.setDRACOLoader(G),t.setKTX2Loader(W)}))),y=(0,l.useRef)(new h.AnimationMixer(v.scene)),x=(0,l.useRef)(null),b=$((0,l.useState)(!1),2),w=b[0],j=b[1];(0,l.useEffect)((function(){if(e.hasData&&0!=e.index){var t=(new h.Box3).setFromObject(n.current),r=t.max.x-t.min.x;c(1/r*e.baseUnit),n.current.traverse((function(e){e.hasOwnProperty("material")&&(e.material.userData.hasOwnProperty("originalColor")||(e.material.userData.originalColor=e.material.color))})),f(!0),console.log("finsihed data setting")}v.animations.forEach((function(e){return y.current.clipAction(e).play()}))}),[e.src,e.hasData]),(0,d.A)((function(e,t){var n;null==y||null===(n=y.current)||void 0===n||n.update(t),g()}));var S=$(l.useState([]),2),L=S[0],E=S[1],P=L[0];(0,l.useEffect)((function(){null!=P&&window.studio.setSelection([r.current])}),[P]),(0,l.useEffect)((function(){window.studio.onSelectionChange((function(n){0!=window.studio.selection.length&&window.studio.selection[0].address.objectKey===e.name?(console.log("selected name is "+e.name),void 0===P&&E([t.current])):E([])}))}),[]);var R=function(){window.studio.transaction((function(e){var n=e.set;n(r.current.props.position.x,t.current.position.x),n(r.current.props.position.y,t.current.position.y),n(r.current.props.position.z,t.current.position.z)}))},k=(0,l.useRef)();(0,l.useEffect)((function(){if(k.current){var t=k.current,n=function(t){e.orbitRef.current.enabled=!t.value};return t.addEventListener("dragging-changed",n),function(){return t.removeEventListener("dragging-changed",n)}}}));var A=$((0,l.useState)(!1),2),_=(A[0],A[1]);return(0,l.useEffect)((function(){P?(_(!0),n.current.traverse((function(e){e.hasOwnProperty("material")&&(e.material.color={isColor:!0,r:1,g:.1412632911304446,b:.45641102317066595})}))):w?(_(!0),n.current.traverse((function(e){e.hasOwnProperty("material")&&(e.material.color={isColor:!0,r:1,g:.1412632911304446,b:.45641102317066595})})),null===x.current&&(x.current=new h.BoxHelper(t.current,16711680),m.add(x.current))):(_(!1),n.current&&n.current.traverse((function(e){e.hasOwnProperty("material")&&(e.material.color=e.material.userData.originalColor)})),m.remove(x.current),x.current=null)}),[P,w]),(0,O.jsxs)(O.Fragment,{children:[P&&(0,O.jsx)(Y.Y,{object:P,ref:k,onMouseUp:function(e){x.current&&x.current.update(),R()},onChange:function(e){R()}}),(0,O.jsx)(Q.P,{box:!0,onChange:function(e){E([]),0!=e.length&&E([t.current])},children:(0,O.jsx)(B.Ah.group,{theatreKey:e.name,name:e.name,onPointerOver:(0,l.useCallback)((function(e){return function(e){e.stopPropagation(),j(!0)}(e)}),[]),onPointerOut:(0,l.useCallback)((function(e){!function(e){e.stopPropagation(),j(!1)}(e)}),[]),onPointerDown:(0,l.useCallback)((function(e){e.stopPropagation()}),[]),ref:t,objRef:r,visible:s,scale:s?[a*(e.width/e.frameWidth),a*(e.width/e.frameWidth),a*(e.width/e.frameWidth)]:[1,1,1],position:[(e.x+e.width/2-e.frameWidth/2)/e.frameWidth*e.baseUnit,(e.frameHeight/2-(e.y+e.height/2))/e.frameHeight*(e.frameHeight/e.frameWidth)*e.baseUnit,5e-4*e.index*e.baseUnit],children:(0,O.jsx)("primitive",{ref:n,object:v.scene})})})]})},ne=function(e){var t=$((0,l.useState)(!1),2),n=t[0],r=t[1],o=$((0,l.useState)(!1),2),i=o[0],a=o[1],c=(0,l.useRef)(null),u=(0,l.useRef)(null),s=(0,l.useRef)(null),f=(0,l.useRef)(null),p=$((0,l.useState)(1),2),g=p[0],m=p[1],v=$((0,l.useState)(null),2),y=v[0],x=v[1],b=$((0,l.useState)(!1),2),w=b[0],j=b[1],S=(0,d.z)(),L=S.invalidate,E=S.scene,P=(S.gl,S.camera,(0,l.useCallback)((function(e){e.needsUpdate=!0,m(e.image.height/e.image.width),e.encoding=h.sRGBEncoding,x(e),j(!0),e.dispose(),L()}),[]));(0,l.useEffect)((function(){!0===e.isQuery?e.hasData&&(new h.TextureLoader).load(e.src,(function(e){P(e)})):e.hasData?(new h.TextureLoader).load(e.src,(function(e){P(e)})):new Promise((function(e,t){e(function(e,t,n,r,o,i){var a=document.createElement("canvas");a.width=t,a.height=n;var c=a.getContext("2d"),u=new h.Texture(a);u.magFilter=h.LinearFilter,u.minFilter=h.LinearMipMapLinearFilter;c.lineWidth=4,c.strokeStyle="white",c.beginPath();for(var s=0;s<=t;s+=213.33333333333334)0===s?(c.moveTo(2,0),c.lineTo(2,n)):(c.moveTo(s-2,0),c.lineTo(s-2,n));for(var l=0;l<=n;l+=120)0===l?(c.moveTo(0,2),c.lineTo(t,2)):(c.moveTo(0,l-2),c.lineTo(t,l-2));return c.stroke(),u.generateMipmaps=!0,u.needsUpdate=!0,u}(0,1920,1080).image.toDataURL("image/png"))})).then((function(e){var t=new h.Texture,n=new Image;n.src=e;var r=n;t.image=r,r.onload=function(){P(t)}}))}),[e.src,e.hasData]),(0,l.useEffect)((function(){f.current.onValuesChange((function(e){!function(e,t){0==t&&(t=1e-5);for(var n=.5*e.parameters.width,r=new h.Vector2(-n,0),o=new h.Vector2(0,t),i=new h.Vector2(n,0),a=(new h.Vector2).subVectors(r,o),c=(new h.Vector2).subVectors(o,i),u=(new h.Vector2).subVectors(r,i),s=a.length()*c.length()*u.length()/(2*Math.abs(a.cross(u))),l=new h.Vector2(0,t-s),f=2*((new h.Vector2).subVectors(r,l).angle()-.5*Math.PI),d=e.attributes.uv,p=e.attributes.position,g=new h.Vector2,m=0;m<d.count;m++){var v=1-d.getX(m),y=p.getY(m);g.copy(i).rotateAround(l,f*v),p.setXYZ(m,g.x,y,-g.y)}p.needsUpdate=!0}(u.current,e.curve)}))}),[s]);var R=(0,l.useRef)(null),k=$(l.useState([]),2),A=k[0],_=k[1],z=A[0];(0,l.useEffect)((function(){null!=z&&window.studio.setSelection([f.current])}),[z]),(0,l.useEffect)((function(){window.studio.onSelectionChange((function(t){0!=window.studio.selection.length&&window.studio.selection[0].address.objectKey===e.name?(console.log("selected name is "+e.name),void 0===z&&_([s.current])):_([])}))}),[]);var T=function(){window.studio.transaction((function(e){var t=e.set;t(f.current.props.position.x,s.current.position.x),t(f.current.props.position.y,s.current.position.y),t(f.current.props.position.z,s.current.position.z)}))},C=(0,l.useRef)();return(0,l.useEffect)((function(){if(C.current){var t=C.current,n=function(t){e.orbitRef.current.enabled=!t.value};return t.addEventListener("dragging-changed",n),function(){return t.removeEventListener("dragging-changed",n)}}})),(0,l.useEffect)((function(){z?a(!0):n?(a(!0),null===R.current&&(R.current=new h.BoxHelper(s.current,16711680),E.add(R.current))):(a(!1),E.remove(R.current),R.current=null)}),[z,n]),(0,O.jsxs)(O.Fragment,{children:[z&&(0,O.jsx)(Y.Y,{object:z,name:"controls",ref:C,onMouseUp:function(e){R.current&&R.current.update(),T()},onChange:function(e){T()}}),(0,O.jsx)(Q.P,{box:!0,onChange:function(e){_([]),_(e)},children:(0,O.jsxs)(B.Ah.mesh,{theatreKey:e.name,name:e.name,onPointerOver:(0,l.useCallback)((function(e){!function(e){e.stopPropagation(),r(!0)}(e)}),[]),onPointerOut:(0,l.useCallback)((function(e){!function(e){e.stopPropagation(),r(!1)}(e)}),[]),ref:s,objRef:f,additionalProps:{curve:F.types.number(0,{nudgeMultiplier:e.baseUnit/100,range:[0,e.baseUnit]})},visible:w,scale:[1,1,1],position:e.hasData?[(e.x+e.width/2-e.frameWidth/2)/e.frameWidth*e.baseUnit,(e.frameHeight/2-(e.y+e.height/2))/e.frameHeight*(e.frameHeight/e.frameWidth)*e.baseUnit,5e-4*e.index*e.baseUnit]:[0,0,0],children:[(0,O.jsx)("planeGeometry",{ref:u,args:[e.hasData?e.baseUnit*(e.width/e.frameWidth):e.baseUnit,e.hasData?e.baseUnit*g*(e.width/e.frameWidth):e.baseUnit*g,40,40]}),(0,O.jsx)("meshBasicMaterial",{ref:c,side:h.DoubleSide,alphaTest:.1,transparent:!0,map:y,toneMapped:!1,color:i?"hotpink":"white"})]})})]})};const re=function(e){var t=e.figmaData,n=e.isFigma,r=e.isQuery,o=e.baseUnit,i=e.orbitRef;return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(B.yR,{sheet:(0,F.getProject)("XRViewer").sheet("Node Tree","Asset"),children:0!=t.length?(0,O.jsx)(O.Fragment,{children:t.map((function(e){var t=e.type,a=e.index,c=e.name,u=e.x,s=e.y,l=e.width,f=e.height,h=e.frameWidth,d=e.frameHeight,p=e.src,g=e.modelSrc;return null!=g?(0,O.jsx)(te,{src:p,name:"#".concat(a,"-")+c.split("/")[c.split("/").length-1].substring(0,24),x:0===a?0:u,y:0===a?0:s,index:a,width:l,height:f,frameWidth:h,frameHeight:d,hasData:!0,isFigma:n,isQuery:r,baseUnit:o,modelSrc:g,orbitRef:i},t+"-three-"+a):(0,O.jsx)(ne,{src:p,name:"#".concat(a,"-")+c.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24),x:0===a?0:u,y:0===a?0:s,index:a,width:l,height:f,frameWidth:h,frameHeight:d,hasData:!0,isQuery:r,baseUnit:o,orbitRef:i},t+"-three-"+a)}))}):(0,O.jsx)(O.Fragment,{children:!0===r?(0,O.jsx)(O.Fragment,{}):(0,O.jsx)(ne,{name:"Screen",hasData:!1,baseUnit:o,orbitRef:i})})})})};function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(){ie=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};c(p,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==t&&n.call(m,o)&&(p=m);var v=d.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==oe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,c(v,"constructor",d),c(d,"constructor",h),h.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ae(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ce(e){return new Promise((function(t){var n=new Image;n.onload=function(){return t(n)},n.src=e}))}function ue(e){for(var t=e.split(",")[1],n=atob(t),r=new ArrayBuffer(n.length),o=new Uint8Array(r),i=0;i<n.length;i++)o[i]=n.charCodeAt(i);return o}var se=function(){var e,t=(e=ie().mark((function e(t,n,r,o){return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(void 0,void 0,void 0,ie().mark((function e(){var i,a,c,u,s;return ie().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),e.next=3,n;case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,ce(i);case 8:return a=e.sent,c=a.width,u=a.height,s=ue(i),e.abrupt("return",parent.postMessage({pluginMessage:{type:r,name:o,width:c,height:u,blob:s}},"*"));case 13:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ae(i,r,o,a,c,"next",e)}function c(e){ae(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e,n,r,o){return t.apply(this,arguments)}}(),le=n(5733),fe=n.n(le),he=n(3162);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(){pe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};c(p,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==t&&n.call(m,o)&&(p=m);var v=d.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==de(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,c(v,"constructor",d),c(d,"constructor",h),h.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ge(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ge(i,r,o,a,c,"next",e)}function c(e){ge(i,r,o,a,c,"throw",e)}a(void 0)}))}}function ve(e,t){if(t){var n=new(fe()),r=n.folder("pngs"),o=n.folder("models");t.forEach((function(e){var t=fetch(e.url).then((function(e){return 200===e.status?e.blob():Promise.reject(new Error(e.statusText))})),i=e.name+"."+e.ext;"html"===e.ext&&n.file(i,t),"png"===e.ext&&r.file(i,t),"gltf"!==e.ext&&"glb"!==e.ext||o.file(i,t)})),n.generateAsync({type:"blob"}).then((function(t){return(0,he.saveAs)(t,e)})).then((function(){}))}}function ye(e,t){return xe.apply(this,arguments)}function xe(){return(xe=me(pe().mark((function e(t,n){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(t).then((function(e){return e.blob()})).then((function(e){var r=new Blob([e],{type:t.includes(".gltf")?"model/gltf+json":"model/gltf-binary"});n(r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=function(){var e=me(pe().mark((function e(t,n,r,o){var i,a;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=document.documentElement.innerHTML,a=new Array(r.length),console.log(r),console.log(a),new Promise((function(e,t){if(!0===n)for(var o=0;o<a.length;o++){var c=o;if(a.splice(c,1,{name:r[c].name,width:r[c].width,height:r[c].height,frameWidth:r[c].frameWidth,frameHeight:r[c].frameHeight,x:r[c].x,y:r[c].y,src:null!=r[c].modelSrc?"./pngs/"+"%23".concat(c,"-")+r[c].name.split("/")[r[c].name.split("/").length-1].substring(0,24)+".png":"./pngs/"+"%23".concat(c,"-")+r[c].name.replaceAll(/\//g,"_").replaceAll(/\ /g,"_").substring(0,24)+".png",type:r[c].type,index:r[c].index,id:r[c].id,imageData:null,modelSrc:null!=r[c].modelSrc?"./models/"+"%23".concat(c,"-")+r[c].modelSrc.split("/")[r[c].modelSrc.split("/").length-1]:null}),c===a.length-1){var u=i.replace(/savedFigData = \'\'/g,"savedFigData = ".concat(JSON.stringify(a))).replaceAll('<div id="theatrejs-studio-root" style="position: fixed; inset: 0px; pointer-events: none; z-index: 100;"></div>',"");e({data:u,isServe:!0})}}else!function(){var t=0,n=function(n,o,c){if(a.splice(c,1,{name:r[c].name,width:r[c].width,height:r[c].height,frameWidth:r[c].frameWidth,frameHeight:r[c].frameHeight,x:r[c].x,y:r[c].y,src:o,type:r[c].type,index:r[c].index,id:r[c].id,imageData:null,modelSrc:n}),++t===a.length){var u=i.replace(/savedFigData = \'\'/g,"savedFigData = ".concat(JSON.stringify(a))).replaceAll('<div id="theatrejs-studio-root" style="position: fixed; inset: 0px; pointer-events: none; z-index: 100;"></div>',"");e({data:u,isServe:!1})}},c=function(){var e=o,t=new FileReader;t.readAsDataURL(new Blob([r[e].imageData],{type:"image/png"})),t.onloadend=function(){null!=r[e].modelSrc?ye(r[e].modelSrc,(function(r){var o=new FileReader;o.readAsDataURL(r),o.onloadend=function(){n(o.result,t.result,e)}})):n(null,t.result,e)}};for(o=0;o<a.length;o++)c()}()})).then((function(e){if(!0===e.isServe){var t,n;!function(){t=[],n=0,console.log("start");var s=function(e,n,r){return console.log("added"),t.push({url:e,name:n,ext:r}),t},l=function(){++n===a.length&&ve("my_project",t)};c=new Blob([e.data],{type:"text/html"}),u=window.URL.createObjectURL(c),t.push({url:u,name:"index",ext:"html"});var f=function(){var e=i;null!=r[e].modelSrc?ye(r[e].modelSrc,(function(n){t=s(URL.createObjectURL(n),"#".concat(e,"-")+r[e].modelSrc.split("/")[r[e].modelSrc.split("/").length-1].split(".")[0].substring(0,24),r[e].modelSrc.includes(".gltf")?"gltf":"glb"),t=s(o.children[r.length-1-e].src,"#".concat(e,"-")+r[e].modelSrc.split("/")[r[e].modelSrc.split("/").length-1].substring(0,24),"png"),l()})):(t=s(o.children[r.length-1-e].src,"#".concat(e,"-")+r[e].name.replaceAll(/\//g,"_").replaceAll(/\ /g,"_").substring(0,24),"png"),l())};for(i=0;i<r.length;i++)f()}()}else{var i,c=new Blob([e.data],{type:"text/html"}),u=window.URL.createObjectURL(c);(i=document.createElement("a")).href=u,i.download="index_static.html",i.style="display: none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}();function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function je(){je=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};c(p,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==t&&n.call(m,o)&&(p=m);var v=d.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,a,c){var u=s(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==we(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,c(v,"constructor",d),c(d,"constructor",h),h.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Se(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Le(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Se(i,r,o,a,c,"next",e)}function c(e){Se(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Ee(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=Le(je().mark((function e(t,n){var r,o,i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:o=e.sent,(i=new FileReader).readAsDataURL(o),i.onloadend=function(){n(i.result)};case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return Re.apply(this,arguments)}function Re(){return(Re=Le(je().mark((function e(t){var n,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.children,r=0;r<t.children.length;r++)!1===t.children[r].visible&&delete n[r];return n=n.filter((function(e){return null!=e&&""!=e})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,n,r,o){return Ae.apply(this,arguments)}function Ae(){return Ae=Le(je().mark((function e(t,n,r,o,i){var a,c,u,s,l,f,h,d,p,g,m,v;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,c=!1,u="https://api.figma.com/v1/files/"+"".concat(n,"/nodes?ids=").concat(r),e.next=6,fetch(u,{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 6:return s=e.sent,e.next=9,s.json();case 9:return l=e.sent,f=Object.values(l.nodes)[0].document,e.next=13,Oe(f);case 13:return h=e.sent,d=h.length,p=new Array(d+(c?1:0)),g=function(e,t,n,r,o){fetch("https://api.figma.com/v1/"+"images/".concat(t,"?")+"ids=".concat(n,"&")+"svg_include_id=true&format=png&"+"scale=".concat(1),{headers:{Authorization:"Bearer ".concat(e)},method:"GET"}).then((function(e){return e.json()})).then((function(e){return Object.values(e.images)[0]})).then((function(e){Ee(e,(function(e){o({name:r.name,width:r.absoluteBoundingBox.width,height:r.absoluteBoundingBox.height,frameWidth:r.absoluteRenderBounds.width,frameHeight:r.absoluteRenderBounds.height,x:r.absoluteBoundingBox.x-r.absoluteBoundingBox.x,y:r.absoluteBoundingBox.y-r.absoluteBoundingBox.y,src:e,type:"image-framenode",index:0,id:r.id})}))}))},m=function(e,t,n,r,o){for(var i=function(){var i=a;r[i],fetch("https://api.figma.com/v1/"+"images/".concat(t,"?")+"ids=".concat(r[i].id,"&")+"svg_include_id=true&format=png&"+"scale=".concat(1),{headers:{Authorization:"Bearer ".concat(e)},method:"GET"}).then((function(e){return e.json()})).then((function(e){return Object.values(e.images)[0]})).then((function(e){Ee(e,(function(e){o({name:r[i].name,width:r[i].absoluteBoundingBox.width,height:r[i].absoluteBoundingBox.height,frameWidth:n.absoluteRenderBounds.width,frameHeight:n.absoluteRenderBounds.height,x:r[i].absoluteBoundingBox.x-n.absoluteBoundingBox.x,y:r[i].absoluteBoundingBox.y-n.absoluteBoundingBox.y,src:e,type:"image-childnode",index:i+(c?1:0),id:r[i].id},i)}))}))},a=0;a<r.length;a++)i()},v=function(){var e=Le(je().mark((function e(i){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&g(t,n,r,f,(function(e){p.splice(0,1,e),console.log("fetched num "+a),console.log("fetched index 0"),a++,o("".concat(a,"/").concat(d+(c?1:0))),i(a)})),m(t,n,f,h,(function(e,t){p.splice(t+(c?1:0),1,e),console.log("fetched num "+a),console.log("fetched index "+"".concat(t+(c?1:0))),a++,o("".concat(a,"/").concat(d+(c?1:0))),i(a)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=21,v((function(e){e===d+(c?1:0)&&i(p)}));case 21:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function _e(){return _e=Le(je().mark((function e(t,n,r,o){var i,a,c,u,s,l,f,h,d,p,g;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=0,a=!1,c="".concat(K).concat(X,"/").concat(t,"/").concat(n.replaceAll(":","%253A"),"/data.json"),e.next=5,fetch(c);case 5:return u=e.sent,e.next=8,u.json();case 8:return s=e.sent,console.log(s.node),l=s.node,f=l.children,h=f.length,d=new Array(h),p=function(e,t,n,r){for(var o=0;o<n.length;o++){var i=o,c=n[i];console.log(c),r({name:n[i].name,width:n[i].absoluteBoundingBox.width,height:n[i].absoluteBoundingBox.height,frameWidth:t.absoluteRenderBounds.width,frameHeight:t.absoluteRenderBounds.height,x:n[i].absoluteBoundingBox.x-t.absoluteBoundingBox.x,y:n[i].absoluteBoundingBox.y-t.absoluteBoundingBox.y,src:c.src,type:"image-childnode",index:i+(a?1:0),id:n[i].id},i)}},g=function(){var e=Le(je().mark((function e(t){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(0,l,f,(function(e,n){d.splice(n+(a?1:0),1,e),console.log("fetched num "+i),console.log("fetched index "+"".concat(n)),i++,r("".concat(i,"/").concat(h)),t(i)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=18,g((function(e){e===h&&o(d)}));case 18:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}var Be=n(5805),Fe=n(6706);function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce=100,Ue=(0,F.getProject)("XRViewer").sheet("Node Tree","Controller"),De=((0,F.getProject)("XRViewer").sheet("Node Tree","Asset"),Ue.object(" - Helper Controller",{polarHelper:F.types.boolean(!0),dotHelper:F.types.boolean(!1),quality:F.types.stringLiteral(2,{1:"x1",2:"x2",3:"x3"})})),Me=(0,l.forwardRef)((function(e,t){var n=e.containerRef,r=e.figmaData,o=e.isQuery,i=e.isFigma,a=e.loadingProgress,c=(0,l.useRef)(null),u=(0,l.useRef)(null),s=(0,l.useRef)(null),f=(0,l.useRef)(De),p=(0,l.useRef)(null),g=(0,l.useRef)(null),m=(0,d.z)(),v=m.invalidate,y=m.scene,x=m.gl,b=m.camera;(0,l.useImperativeHandle)(t,(function(){return{saveImage:function(){y.background=null;var e=function(e,t,n,r,o,i){return T(void 0,void 0,void 0,ie().mark((function a(){var c,u,s,l,f;return ie().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=1*(u=e),f=1*(s=t),2===n&&(l=1*u,f=1*s),3===n&&(l=2*u,f=2*s),1===n&&(l=.5*u,f=.5*s),i.aspect=l/f,i.updateProjectionMatrix(),o.setSize(l,f),o.render(r,i,null,!1),c=o.domElement.toDataURL("image/png"),i.aspect=u/s,i.updateProjectionMatrix(),o.setSize(u,s),a.abrupt("return",c);case 20:return a.prev=20,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return");case 24:case"end":return a.stop()}}),a,null,[[0,20]])})))}(n.current.clientWidth,n.current.clientHeight,Number(De.value.quality),y,x,b);return y.background=new h.Color("#272730"),e}}}));var w=(0,l.useCallback)((function(){var e=0!=r.length?r[0].frameHeight/r[0].frameWidth:.5625;console.log("the screen aspect ratio is : "+e),function(e,t,n,r,o){var i=new h.PolarGridHelper(4*r,8,4,64,16777215,16777215);i.position.y=-n/2*r,i.position.z=r,i.visible=t.current.value.polarHelper,e.add(i);var a=new h.PlaneGeometry(8*r,8*r,Math.min(250,Math.max(40,8*r*5)),Math.min(250,Math.max(40,8*r*5)));a.rotateX(Math.PI/2);var c=new h.PointsMaterial({transparent:!1,fog:!1});c.map=function(e,t){var n=document.createElement("canvas");n.width=n.height=t;var r=n.getContext("2d"),o=new h.Texture(n);o.magFilter=h.LinearFilter,o.minFilter=h.LinearMipMapLinearFilter;var i=t/2;return r.beginPath(),r.arc(i,i,t/2,0,2*Math.PI,!1),r.closePath(),r.fillStyle="#ffffff",r.fill(),o.generateMipmaps=!0,o.needsUpdate=!0,o}(0,8*r),c.size=.00825;var u=new h.Points(a,c);u.position.y=-n/2*r,u.position.z=r,u.visible=t.current.value.dotHelper,e.add(u),o(i,u)}(y,f,e,Ce,(function(e,t){f.current.onValuesChange((function(n){e.visible=n.polarHelper,t.visible=n.dotHelper,v()}))}))}),[]);return(0,l.useEffect)((function(){if(!0===o){var e=2===a.split("/").length,t=a.split("/")[0]===a.split("/")[1];e&&t&&w()}else w()}),[o,a]),(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(Fe.H,{shadows:!1,preset:"rembrandt",intensity:1,environment:"sunset",adjustCamera:!1,children:[(0,O.jsx)(B.yR,{sheet:Ue,children:(0,O.jsx)(M,{cameraRef:c,cameraSheetObj:s,baseUnit:Ce,aspect:window.innerWidth/window.innerHeight})}),(0,O.jsx)("ambientLight",{}),(0,O.jsx)(k,{orbitRef:u,cameraSheetObj:s}),!1===i?(0,O.jsx)(N,{cameraSheetObj:s,children:(0,O.jsx)(B.yR,{sheet:Ue,children:(0,O.jsx)(B.Ah.group,{theatreKey:" - Main Controller",ref:p,objRef:g,children:(0,O.jsx)(re,{figmaData:r,isFigma:i,isQuery:o,baseUnit:Ce,orbitRef:u})})})}):(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(B.yR,{sheet:Ue,children:(0,O.jsx)(B.Ah.group,{theatreKey:" - Main Controller",ref:p,objRef:g,children:(0,O.jsx)(re,{figmaData:r,isFigma:i,isQuery:o,baseUnit:Ce,orbitRef:u})})})})]})})}));const He=function(){var e=(0,l.useRef)(null),t=(0,l.useRef)(null),n=(0,l.useRef)(null),r=ze((0,l.useState)([]),2),o=r[0],i=r[1],a=ze((0,l.useState)(!1),2),c=a[0],u=a[1],s=ze((0,l.useState)(!1),2),f=s[0],d=s[1],m=ze((0,l.useState)(!1),2),v=m[0],P=m[1],R=ze((0,l.useState)("0"),2),k=R[0],A=R[1],_=(0,l.useCallback)((function(e){var t=e.event,n=e.image,r=e.message,o=e.name;se(t,n,r,o)}),[o]),B=(0,l.useCallback)((function(e){var t=e.event,n=e.isServe,r=e.data,o=e.imageLayout;be(t,n,r,o)}),[]),F=(0,l.useCallback)((function(){console.log("successed - init with empty data"),P(!1)}),[]),z=(0,l.useCallback)((function(e){console.log("init with saved data"),u(!1),d(!1),i(e),P(!1)}),[]),T=(0,l.useCallback)((function(e,t){if("selection"===e){if(!t)return console.log("failed - no figma selection"),function(){};console.log("successed - init with figma data"),d(!1),P(!0);for(var n=0;n<t.data.length;n++){var r=n;t.data[r].src=URL.createObjectURL(new Blob([t.data[r].imageData],{type:"image/png"})),n===t.data.length-1&&(u(t.isFigma),i(t.data),P(!1))}}if("failed"===e&&!t)return console.log("failed - get data failed"),function(){}}),[]),C=(0,l.useCallback)((function(e,t,n){console.log("successed - init with query data"),u(!1),d(!0),P(!0);var r=function(e){for(var t=0;t<e.length;t++)(e[t].name.includes(".glb")||e[t].name.includes(".gltf"))&&(e[t].modelSrc=e[t].name,e[t].name=e[t].name.split("/")[e[t].name.split("/").length-1]),t===e.length-1&&(i(e),P(!1))};"local_server"===e?(console.log("query - local server"),console.log(t),console.log(n),function(e,t,n,r){_e.apply(this,arguments)}(t,n,(function(e){A(e)}),(function(e){r(e)}))):"auth_everytime"===e?(console.log("query - need OAuth"),new Be.p({clientId:"2beFW69qeg7DvjBp6bKpm5",clientSecrete:"013RerD24yjKxvSIrUr4f6dESMYST8",redirectUri:"".concat("https://www.martinrgb.com/FigmaImporter/v4/","callback.html")}).getOAuth2Token().then((function(e){ke(e,t,n,(function(e){A(e)}),(function(e){r(e)}))}))):(console.log("query - already exist OAuth"),ke(e,t,n,(function(e){A(e)}),(function(e){r(e)})))}),[]);return l.useEffect((function(){var e=new URL(window.location.href),t=e.searchParams.get("query_key"),n=e.searchParams.get("query_node"),r=e.searchParams.get("query_token");console.log("fileKey is: "+t),console.log("nodeId is: "+n),console.log("token is: "+r),""!=savedFigData?z(savedFigData):null!=t&&null!=n?C(r,t,n):F(),window.onmessage=function(e){if(null!=e.data.pluginMessage){var t=e.data.pluginMessage,n=t.type,r=t.value;T(n,r)}}}),[]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(y,{}),v?(0,O.jsx)(E.Z,{loadingProgress:"".concat(k),hintText:" of total nodes is loaded"}):(0,O.jsx)(x,{children:(0,O.jsx)(L,{ref:e,children:(0,O.jsxs)(l.Suspense,{fallback:(0,O.jsx)(E.Z,{hintText:"init the renderer"}),children:[(0,O.jsx)(b,{ref:n,children:o.reverse().map((function(e){var t=e.src,n=e.type,r=e.index,o=e.name;return(0,O.jsx)(w,{src:t,className:"img-imported",id:n+"-"+r,name:o},n+"-"+r)}))}),(0,O.jsx)(j,{children:c?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(S,{onClick:function(e){_({event:e,image:t.current.saveImage(),message:"save-canvas-image",name:o[0].name})},children:"SaveToFigma"}),(0,O.jsx)(S,{onClick:function(e){B({event:e,isServe:!0,data:o,imageLayout:n.current})},children:"Download(Serve)"}),(0,O.jsx)(S,{onClick:function(e){B({event:e,isServe:!1,data:o,imageLayout:n.current})},children:"Download(Static)"})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g.vZ,{className:"xr-button",mode:"AR"}),(0,O.jsx)(g.vZ,{className:"xr-button",mode:"VR"})]})}),(0,O.jsx)(p.Xz,{frameloop:"demand",gl:{preserveDrawingBuffer:!0,outputEncoding:h.sRGBEncoding,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0},children:(0,O.jsx)(Me,{ref:t,containerRef:e,isFigma:c,isQuery:f,loadingProgress:k,figmaData:o.reverse()})})]})})})]})};var Ie=n(2654),Ne=n.n(Ie),Ge=n(659);Ne().initialize({usePersistentStorage:!1}),Ne().extend(Ge.Z),window.studio=Ne();var We=document.getElementById("react-page");(0,f.s)(We).render((0,O.jsx)(He,{}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],c=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={924:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,u]=n,s=0;if(a.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(u)var l=u(r)}for(t&&t(n);s<a.length;s++)i=a[s],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[348,635,684,707],(()=>r(1930)));o=r.O(o)})();