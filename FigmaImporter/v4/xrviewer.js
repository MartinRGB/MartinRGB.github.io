(()=>{"use strict";var A,e={5633:(A,e,t)=>{var s=t(7294),r=t(745),i=t(9477),o=t(1184),n=t(5953),a=t(8412),g=t(2788);const I=g.vJ`
    body {
        font-family: sans-serif;
        font-size: 10px;
        text-align: center;
        /* margin: 20px; */
        margin:0px !important;
        color: #ccc;
        background-color: #1d1e20;
        overflow: hidden;
        height: 100vh;
    }
    .xr-button{
       
        opacity: 1;
        user-select: auto;
        padding: 8px 12px 8px 12px;
        font-family: sans-serif;
        border-radius: 100px;
        line-height: 24px;
        font-size: 10px;
        border-radius: 12px;
        // box-shadow: 0 3px 4px -1px rgb(0 0 0 / 48%);
        border:1px solid #4b4b4b;
        //filter:invert(1) hue-rotate(180deg) brightness(1.5);
        user-select:none;
        // color: rgba(255,255,255,0.9);
        // background: rgba(29,53,59,0.7);
        // backdrop-filter: blur(14px);
        // border-bottom: 1px solid rgba(255,255,255,0.08);
        font-family: 'Inter', 'Helvetica', sans-serif;
        font-size: 12px;
        font-weight: 400;
        color:rgba(255,255,255,0.5);
        background:black;
        margin:8px 5px;
        z-index: 11;
        cursor: pointer;
    }

    .xr-button:hover{
        // background: linear-gradient(99deg, rgb(7, 136, 255) 0%, rgb(153, 0, 255) 100%);
        // border-bottom: 1px solid rgba(255,255,255,0.24);
        color:rgba(255,255,255,0.9);
        background:#40aeff;
    }

`,c=g.ZP.div`
    display: flex;
    flex-direction: row-reverse;
`,B=g.ZP.div`
    position: absolute;
    left: 50%;
    top: 0px;
    transform: translate(-50%, 0);
    margin: 0 auto;
    z-index: 10;
    display:flex;
    z-index:10000;
`,C=g.ZP.div`
    border-radius: 12px;
    opacity: 1;
    user-select: auto;
    padding: 8px 12px 8px 12px;
    // font-family: 'Inter', sans-serif;
    // border-radius: 100px;
    // line-height: 10px;
    line-height: 24px;
    font-size: 10px;

    // box-shadow: 0 3px 4px -1px rgb(0 0 0 / 48%);
    border:1px solid #4b4b4b;
    //filter:invert(1) hue-rotate(180deg) brightness(1.5);
    font-family: 'Inter', 'Helvetica', sans-serif;
    font-size: 12px;
    font-weight: 400;
    color:rgba(255,255,255,0.5);
    background:black;
    user-select:none;
    // color: rgba(255,255,255,0.9);
    // background: rgba(29,53,59,0.7);
    // backdrop-filter: blur(14px);
    //border-bottom: 1px solid rgba(255,255,255,0.08);
    margin:8px 5px;
    z-index: 11;
    cursor: pointer;

    &:hover {
        // background: linear-gradient(99deg, rgb(7, 136, 255) 0%, rgb(153, 0, 255) 100%);
        // border-bottom: 1px solid rgba(255,255,255,0.24);
        color:rgba(255,255,255,0.9);
        background:#40aeff;
    }
`,l=g.ZP.div`
    flex: 1;
    height:100vh;
    width:100vw;
`;var E=t(5893);const Q={light:{colors:{bg:"#e7edfe",fg:"#010818",stroke:"##cfdcfc"}},dark:{colors:{bg:"#010818",fg:"#e7edfe",stroke:"#041749"}}},h=window.matchMedia("(prefers-color-scheme: dark)"),d=g.ZP.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,u=g.ZP.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, calc(-50% + 40px));
  z-index: 1000;
  font-size:14px;
`,p=g.ZP.strong`
  font-size: 16px;
  word-break: break-all;
`,f=g.ZP.div`
  background-color: ${({theme:A})=>A.colors.bg};
  color: ${({theme:A})=>A.colors.fg};
  font: 1em/1.5 sans-serif;
  height: 100vh;
  width: 100vw;
  position: absolute;
  z-index: 10001;
  left: 0;
  top: 0;
  display: grid;
  place-items: center;
  transition: background-color 0.3s;
  overflow: hidden;
`,m=g.ZP.svg`
  // width: 16em;
  height: 8em;
  width:78px;
`,w=g.ZP.g`
  stroke: ${({theme:A})=>A.colors.stroke};
  transition: stroke 0.3s;
`,y=g.F4`
  from { stroke-dashoffset: 0; }
  50% { animation-timing-function: steps(1);stroke-dashoffset: -358; }
  50.01% { animation-timing-function: linear;stroke-dashoffset: 358; }
  to { troke-dashoffset: 0; }
`,D=g.F4`
  from { stroke-dashoffset: 358; }
  50% { stroke-dashoffset: 0; }
  to { stroke-dashoffset: -358; }
`,x=g.ZP.path`
  animation: ${y} 2s linear infinite;
`,R=g.ZP.path`
  animation: ${D} 2s linear infinite;
`,S=A=>{const[e,t]=(0,s.useState)("light");return console.log("isDarkMode"+h.matches),(0,s.useEffect)((()=>{t(h.matches?"dark":"light")}),[h.matches]),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(g.f6,{theme:Q[e],children:(0,E.jsxs)(f,{children:[(0,E.jsx)(d,{id:"loading",children:(0,E.jsxs)(m,{viewBox:"0 0 256 128",width:"256px",height:"128px",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsxs)("defs",{children:[(0,E.jsxs)("linearGradient",{id:"grad1",x1:"0",y1:"0",x2:"1",y2:"0",children:[(0,E.jsx)("stop",{offset:"0%",stopColor:"#5ebd3e"}),(0,E.jsx)("stop",{offset:"33%",stopColor:"#ffb900"}),(0,E.jsx)("stop",{offset:"67%",stopColor:"#f78200"}),(0,E.jsx)("stop",{offset:"100%",stopColor:"#e23838"})]}),(0,E.jsxs)("linearGradient",{id:"grad2",x1:"1",y1:"0",x2:"0",y2:"0",children:[(0,E.jsx)("stop",{offset:"0%",stopColor:"#e23838"}),(0,E.jsx)("stop",{offset:"33%",stopColor:"#973999"}),(0,E.jsx)("stop",{offset:"67%",stopColor:"#009cdf"}),(0,E.jsx)("stop",{offset:"100%",stopColor:"#5ebd3e"})]})]}),(0,E.jsxs)("g",{fill:"none",strokeLinecap:"round",strokeWidth:"16",children:[(0,E.jsxs)(w,{stroke:"#ddd",children:[(0,E.jsx)("path",{d:"M8,64s0-56,60-56,60,112,120,112,60-56,60-56"}),(0,E.jsx)("path",{d:"M248,64s0-56-60-56-60,112-120,112S8,64,8,64"})]}),(0,E.jsxs)("g",{strokeDasharray:"180 656",children:[(0,E.jsx)(x,{stroke:"url(#grad1)",strokeDashoffset:"0",d:"M8,64s0-56,60-56,60,112,120,112,60-56,60-56"}),(0,E.jsx)(R,{stroke:"url(#grad2)",strokeDashoffset:"358",d:"M248,64s0-56-60-56-60,112-120,112S8,64,8,64"})]})]})]})}),(0,E.jsx)(u,{children:(0,E.jsxs)("p",{children:[A.loadingProgress?(0,E.jsx)(p,{children:A.loadingProgress}):(0,E.jsx)(E.Fragment,{}),A.hintText?A.hintText:""]})})]})})})};var F=t(6037);const L=({orbitRef:A,cameraSheetObj:e})=>{const[t,r]=(0,s.useState)(!0);return(0,o.A)((A=>{e.current.value.control?r(!0):r(!1)})),(0,E.jsx)(E.Fragment,{children:t?(0,E.jsx)(F.z,{ref:A}):(0,E.jsx)(E.Fragment,{})})};var G=t(7433),M=t(9040),k=t(7395),T=t(6381);function U(A,e,t){const s=A.find((({type:A})=>A===t));return s||null}function b(A,e,t,s){return new(t||(t=Promise))((function(r,i){function o(A){try{a(s.next(A))}catch(A){i(A)}}function n(A){try{a(s.throw(A))}catch(A){i(A)}}function a(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(o,n)}a((s=s.apply(A,e||[])).next())}))}let N;const _=({cameraRef:A,cameraSheetObj:e,baseUnit:t,aspect:r})=>{const n=(0,s.useRef)(null),{invalidate:a,scene:g}=((0,s.useRef)(null),(0,s.useRef)(null),(0,o.z)()),[I,c]=(0,s.useState)(r);(0,s.useLayoutEffect)((()=>{function A(){c(window.innerWidth/window.innerHeight),window.studio.transaction((({set:A})=>{console.log("set cam"),A(e.current.props.aspect,window.innerWidth/window.innerHeight)}))}return window.addEventListener("resize",A),A(),()=>window.removeEventListener("resize",A)}),[]);const[B,C]=(0,s.useState)(!0),[l,Q]=(0,s.useState)(!1),h=(0,s.useRef)(A.current);return(0,s.useEffect)((()=>{const e=U(g.children,0,"CameraHelper");null===e||g.remove(e),h.current=new i.CameraHelper(A.current),g.add(h.current),((A,e)=>{const t=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[1].children[0].children[1],s=A.children,r=U(s,0,"CameraHelper");t.removeEventListener("click",N),N=i=>(s.includes(r)?(i.stopPropagation(),new Promise((function(A,t){console.log("remove step 1 - remove helper first"),r.removeFromParent(),e(),setTimeout((()=>A(1)),1)})).then((function(A){console.log("remove step 2 - click btn second"),t.children[1].click()}))):(console.log("remove step 3 - snapshot opened"),setTimeout((()=>{const t=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[2].children[8].children[0].children[0],i=()=>(s.includes(r)||new Promise((function(A,e){console.log("add step 1 - close window first"),setTimeout((()=>A(1)),1)})).then((function(t){console.log("add step 2 - add cameraHelper"),A.add(r),e()})),t.removeEventListener("click",i),!0);t.addEventListener("click",i)}),1)),!0),t.addEventListener("click",N)})(g,a),h.current.visible=!!l}),[B,,l]),(0,s.useEffect)((()=>{e.current.onValuesChange((e=>{C(e.isPerspective),Q(e.helper),A.current&&(A.current.position.x=e.position.x,A.current.position.y=e.position.y,A.current.position.z=e.position.z,A.current.rotation.x=e.rotation.x,A.current.rotation.y=e.rotation.y,A.current.rotation.z=e.rotation.z,A.current.scale.x=e.scale.x,A.current.scale.y=e.scale.y,A.current.scale.z=e.scale.z,A.current.near=e.near,A.current.far=e.far,A.current.fov=e.fov,A.current.zoom=e.zoom,A.current.aspect=e.aspect,A.current.matrixWorldNeedsUpdate=!0,A.current.updateProjectionMatrix(),A.current.updateMatrixWorld()),h.current&&h.current.update(),e.control||n.current&&(n.current.position.x=e.position.x,n.current.position.y=e.position.y,n.current.position.z=e.position.z,n.current.rotation.x=e.rotation.x,n.current.rotation.y=e.rotation.y,n.current.rotation.z=e.rotation.z,n.current.scale.x=e.scale.x,n.current.scale.y=e.scale.y,n.current.scale.z=e.scale.z,n.current.near=e.near,n.current.far=e.far,n.current.fov=e.fov,n.current.zoom=e.zoom,n.current.aspect=e.aspect,n.current.matrixWorldNeedsUpdate=!0,n.current.updateProjectionMatrix(),n.current.updateMatrixWorld()),a()}))}),[]),(0,E.jsxs)(E.Fragment,{children:[B?(0,E.jsx)(G.c,{ref:n,makeDefault:!0,near:.01,far:1e4,fov:60,zoom:1,aspect:I,position:[0,0,t]}):(0,E.jsx)(M.i,{ref:n,makeDefault:!0,near:.01,zoom:1,far:1e4,position:[0,0,t]}),(0,E.jsx)(k.Ah.group,{theatreKey:" - Camera Controller",objRef:e,additionalProps:{control:!0,isPerspective:B,helper:l,near:.01,far:1e4,fov:60,zoom:1,aspect:T.types.number(I,{nudgeMultiplier:.1,range:[0,100]})},position:[0,0,t],children:B?(0,E.jsx)(G.c,{ref:A}):(0,E.jsx)(M.i,{ref:A})})]})};var v=t(2162),H=t(5166);const P=({cameraSheetObj:A,children:e})=>{const{invalidate:t,scene:r,gl:i,camera:n}=(0,o.z)(),g=()=>{const{player:e,isPresenting:i,session:o}=(0,a.nH)();return(0,s.useEffect)((()=>{const s=r.children;if(i){e.visible=!1,U(s,0,"CameraHelper").visible=!1;const r=Math.sqrt(3),i=A.current.value.position.x,o=A.current.value.position.y,n=A.current.value.position.z,a=A.current.value.rotation.x,g=A.current.value.rotation.y,I=A.current.value.rotation.z,c=A.current.value.fov,B=A.current.value.zoom;e.position.x=i,e.position.y=o-1.6,e.position.z=n*Math.tan(c/(2*B)*Math.PI/180)*r,e.rotation.x=a,e.rotation.y=g,e.rotation.z=I,e.children[0].position.y=0,setTimeout((()=>{e.visible=!0,t()}),1)}}),[i]),null};return(0,E.jsxs)(a.XR,{children:[(0,E.jsx)(v.z,{}),(0,E.jsx)(H.D,{}),e,(0,E.jsx)(g,{})]})};class q extends i.Loader{constructor(A){super(A),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(A){return new V(A)})),this.register((function(A){return new eA(A)})),this.register((function(A){return new tA(A)})),this.register((function(A){return new X(A)})),this.register((function(A){return new z(A)})),this.register((function(A){return new Z(A)})),this.register((function(A){return new $(A)})),this.register((function(A){return new j(A)})),this.register((function(A){return new AA(A)})),this.register((function(A){return new W(A)})),this.register((function(A){return new K(A)})),this.register((function(A){return new sA(A)})),this.register((function(A){return new rA(A)}))}load(A,e,t,s){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.LoaderUtils.extractUrlBase(A),this.manager.itemStart(A);const n=function(e){s?s(e):console.error(e),r.manager.itemError(A),r.manager.itemEnd(A)},a=new i.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(A,(function(t){try{r.parse(t,o,(function(t){e(t),r.manager.itemEnd(A)}),n)}catch(A){n(A)}}),t,n)}setDRACOLoader(A){return this.dracoLoader=A,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(A){return this.ktx2Loader=A,this}setMeshoptDecoder(A){return this.meshoptDecoder=A,this}register(A){return-1===this.pluginCallbacks.indexOf(A)&&this.pluginCallbacks.push(A),this}unregister(A){return-1!==this.pluginCallbacks.indexOf(A)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1),this}parse(A,e,t,s){let r;const o={},n={};if("string"==typeof A)r=JSON.parse(A);else if(A instanceof ArrayBuffer)if(i.LoaderUtils.decodeText(new Uint8Array(A,0,4))===iA){try{o[O.KHR_BINARY_GLTF]=new oA(A)}catch(A){return void(s&&s(A))}r=JSON.parse(o[O.KHR_BINARY_GLTF].content)}else r=JSON.parse(i.LoaderUtils.decodeText(new Uint8Array(A)));else r=A;if(void 0===r.asset||r.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const a=new FA(r,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const e=this.pluginCallbacks[A](a);n[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let A=0;A<r.extensionsUsed.length;++A){const e=r.extensionsUsed[A],t=r.extensionsRequired||[];switch(e){case O.KHR_MATERIALS_UNLIT:o[e]=new Y;break;case O.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[e]=new IA;break;case O.KHR_DRACO_MESH_COMPRESSION:o[e]=new nA(r,this.dracoLoader);break;case O.KHR_TEXTURE_TRANSFORM:o[e]=new aA;break;case O.KHR_MESH_QUANTIZATION:o[e]=new cA;break;default:t.indexOf(e)>=0&&void 0===n[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}a.setExtensions(o),a.setPlugins(n),a.parse(t,s)}parseAsync(A,e){const t=this;return new Promise((function(s,r){t.parse(A,e,s,r)}))}}function J(){let A={};return{get:function(e){return A[e]},add:function(e,t){A[e]=t},remove:function(e){delete A[e]},removeAll:function(){A={}}}}const O={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class K{constructor(A){this.parser=A,this.name=O.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const A=this.parser,e=this.parser.json.nodes||[];for(let t=0,s=e.length;t<s;t++){const s=e[t];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&A._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(A){const e=this.parser,t="light:"+A;let s=e.cache.get(t);if(s)return s;const r=e.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[A];let n;const a=new i.Color(16777215);void 0!==o.color&&a.fromArray(o.color);const g=void 0!==o.range?o.range:0;switch(o.type){case"directional":n=new i.DirectionalLight(a),n.target.position.set(0,0,-1),n.add(n.target);break;case"point":n=new i.PointLight(a),n.distance=g;break;case"spot":n=new i.SpotLight(a),n.distance=g,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,n.angle=o.spot.outerConeAngle,n.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,n.target.position.set(0,0,-1),n.add(n.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return n.position.set(0,0,0),n.decay=2,void 0!==o.intensity&&(n.intensity=o.intensity),n.name=e.createUniqueName(o.name||"light_"+A),s=Promise.resolve(n),e.cache.add(t,s),s}createNodeAttachment(A){const e=this,t=this.parser,s=t.json.nodes[A],r=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(A){return t._getNodeRef(e.cache,r,A)}))}}class Y{constructor(){this.name=O.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(A,e,t){const s=[];A.color=new i.Color(1,1,1),A.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;A.color.fromArray(e),A.opacity=e[3]}void 0!==r.baseColorTexture&&s.push(t.assignTexture(A,"map",r.baseColorTexture,i.sRGBEncoding))}return Promise.all(s)}}class j{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(A,e){const t=this.parser.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=t.extensions[this.name].emissiveStrength;return void 0!==s&&(e.emissiveIntensity=s),Promise.resolve()}}class V{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_CLEARCOAT}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(t.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(t.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(t.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const A=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new i.Vector2(A,A)}return Promise.all(r)}}class W{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_IRIDESCENCE}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],i=s.extensions[this.name];return void 0!==i.iridescenceFactor&&(e.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&r.push(t.assignTexture(e,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(e.iridescenceIOR=i.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&r.push(t.assignTexture(e,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(r)}}class X{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_SHEEN}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new i.Color(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=s.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(t.assignTexture(e,"sheenColorMap",o.sheenColorTexture,i.sRGBEncoding)),void 0!==o.sheenRoughnessTexture&&r.push(t.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class z{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_TRANSMISSION}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],i=s.extensions[this.name];return void 0!==i.transmissionFactor&&(e.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&r.push(t.assignTexture(e,"transmissionMap",i.transmissionTexture)),Promise.all(r)}}class Z{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_VOLUME}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(t.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const n=o.attenuationColor||[1,1,1];return e.attenuationColor=new i.Color(n[0],n[1],n[2]),Promise.all(r)}}class ${constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_IOR}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser.json.materials[A];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const s=t.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class AA{constructor(A){this.parser=A,this.name=O.KHR_MATERIALS_SPECULAR}getMaterialType(A){const e=this.parser.json.materials[A];return e.extensions&&e.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(A,e){const t=this.parser,s=t.json.materials[A];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(t.assignTexture(e,"specularIntensityMap",o.specularTexture));const n=o.specularColorFactor||[1,1,1];return e.specularColor=new i.Color(n[0],n[1],n[2]),void 0!==o.specularColorTexture&&r.push(t.assignTexture(e,"specularColorMap",o.specularColorTexture,i.sRGBEncoding)),Promise.all(r)}}class eA{constructor(A){this.parser=A,this.name=O.KHR_TEXTURE_BASISU}loadTexture(A){const e=this.parser,t=e.json,s=t.textures[A];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],i=e.options.ktx2Loader;if(!i){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(A,r.source,i)}}class tA{constructor(A){this.parser=A,this.name=O.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(A){const e=this.name,t=this.parser,s=t.json,r=s.textures[A];if(!r.extensions||!r.extensions[e])return null;const i=r.extensions[e],o=s.images[i.source];let n=t.textureLoader;if(o.uri){const A=t.options.manager.getHandler(o.uri);null!==A&&(n=A)}return this.detectSupport().then((function(r){if(r)return t.loadTextureImage(A,i.source,n);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(A)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(A){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){A(1===e.height)}}))),this.isSupported}}class sA{constructor(A){this.name=O.EXT_MESHOPT_COMPRESSION,this.parser=A}loadBufferView(A){const e=this.parser.json,t=e.bufferViews[A];if(t.extensions&&t.extensions[this.name]){const A=t.extensions[this.name],s=this.parser.getDependency("buffer",A.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then((function(e){const t=A.byteOffset||0,s=A.byteLength||0,i=A.count,o=A.byteStride,n=new Uint8Array(e,t,s);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(i,o,n,A.mode,A.filter).then((function(A){return A.buffer})):r.ready.then((function(){const e=new ArrayBuffer(i*o);return r.decodeGltfBuffer(new Uint8Array(e),i,o,n,A.mode,A.filter),e}))}))}return null}}class rA{constructor(A){this.name=O.EXT_MESH_GPU_INSTANCING,this.parser=A}createNodeMesh(A){const e=this.parser.json,t=e.nodes[A];if(!t.extensions||!t.extensions[this.name]||void 0===t.mesh)return null;const s=e.meshes[t.mesh];for(const A of s.primitives)if(A.mode!==EA.TRIANGLES&&A.mode!==EA.TRIANGLE_STRIP&&A.mode!==EA.TRIANGLE_FAN&&void 0!==A.mode)return null;const r=t.extensions[this.name].attributes,o=[],n={};for(const A in r)o.push(this.parser.getDependency("accessor",r[A]).then((e=>(n[A]=e,n[A]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(A)),Promise.all(o).then((A=>{const e=A.pop(),t=e.isGroup?e.children:[e],s=A[0].count,r=[];for(const A of t){const e=new i.Matrix4,t=new i.Vector3,o=new i.Quaternion,a=new i.Vector3(1,1,1),g=new i.InstancedMesh(A.geometry,A.material,s);for(let A=0;A<s;A++)n.TRANSLATION&&t.fromBufferAttribute(n.TRANSLATION,A),n.ROTATION&&o.fromBufferAttribute(n.ROTATION,A),n.SCALE&&a.fromBufferAttribute(n.SCALE,A),g.setMatrixAt(A,e.compose(t,o,a));for(const e in n)"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&A.geometry.setAttribute(e,n[e]);i.Object3D.prototype.copy.call(g,A),g.frustumCulled=!1,this.parser.assignFinalMaterial(g),r.push(g)}return e.isGroup?(e.clear(),e.add(...r),e):r[0]})))}}const iA="glTF";class oA{constructor(A){this.name=O.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(A,0,12);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(A.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==iA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-12,s=new DataView(A,12);let r=0;for(;r<t;){const e=s.getUint32(r,!0);r+=4;const t=s.getUint32(r,!0);if(r+=4,1313821514===t){const t=new Uint8Array(A,12+r,e);this.content=i.LoaderUtils.decodeText(t)}else if(5130562===t){const t=12+r;this.body=A.slice(t,t+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class nA{constructor(A,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=O.KHR_DRACO_MESH_COMPRESSION,this.json=A,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(A,e){const t=this.json,s=this.dracoLoader,r=A.extensions[this.name].bufferView,i=A.extensions[this.name].attributes,o={},n={},a={};for(const A in i){const e=pA[A]||A.toLowerCase();o[e]=i[A]}for(const e in A.attributes){const s=pA[e]||e.toLowerCase();if(void 0!==i[e]){const r=t.accessors[A.attributes[e]],i=QA[r.componentType];a[s]=i.name,n[s]=!0===r.normalized}}return e.getDependency("bufferView",r).then((function(A){return new Promise((function(e){s.decodeDracoFile(A,(function(A){for(const e in A.attributes){const t=A.attributes[e],s=n[e];void 0!==s&&(t.normalized=s)}e(A)}),o,a)}))}))}}class aA{constructor(){this.name=O.KHR_TEXTURE_TRANSFORM}extendTexture(A,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(A=A.clone(),void 0!==e.offset&&A.offset.fromArray(e.offset),void 0!==e.rotation&&(A.rotation=e.rotation),void 0!==e.scale&&A.repeat.fromArray(e.scale),A.needsUpdate=!0),A}}class gA extends i.MeshStandardMaterial{constructor(A){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),t=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),n={specular:{value:(new i.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=n,this.onBeforeCompile=function(A){for(const e in n)A.uniforms[e]=n[e];A.fragmentShader=A.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",t).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return n.specular.value},set:function(A){n.specular.value=A}},specularMap:{get:function(){return n.specularMap.value},set:function(A){n.specularMap.value=A,A?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return n.glossiness.value},set:function(A){n.glossiness.value=A}},glossinessMap:{get:function(){return n.glossinessMap.value},set:function(A){n.glossinessMap.value=A,A?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(A)}copy(A){return super.copy(A),this.specularMap=A.specularMap,this.specular.copy(A.specular),this.glossinessMap=A.glossinessMap,this.glossiness=A.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class IA{constructor(){this.name=O.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return gA}extendParams(A,e,t){const s=e.extensions[this.name];A.color=new i.Color(1,1,1),A.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const e=s.diffuseFactor;A.color.fromArray(e),A.opacity=e[3]}if(void 0!==s.diffuseTexture&&r.push(t.assignTexture(A,"map",s.diffuseTexture,i.sRGBEncoding)),A.emissive=new i.Color(0,0,0),A.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,A.specular=new i.Color(1,1,1),Array.isArray(s.specularFactor)&&A.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const e=s.specularGlossinessTexture;r.push(t.assignTexture(A,"glossinessMap",e)),r.push(t.assignTexture(A,"specularMap",e,i.sRGBEncoding))}return Promise.all(r)}createMaterial(A){const e=new gA(A);return e.fog=!0,e.color=A.color,e.map=void 0===A.map?null:A.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===A.aoMap?null:A.aoMap,e.aoMapIntensity=1,e.emissive=A.emissive,e.emissiveIntensity=void 0===A.emissiveIntensity?1:A.emissiveIntensity,e.emissiveMap=void 0===A.emissiveMap?null:A.emissiveMap,e.bumpMap=void 0===A.bumpMap?null:A.bumpMap,e.bumpScale=1,e.normalMap=void 0===A.normalMap?null:A.normalMap,e.normalMapType=i.TangentSpaceNormalMap,A.normalScale&&(e.normalScale=A.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===A.specularMap?null:A.specularMap,e.specular=A.specular,e.glossinessMap=void 0===A.glossinessMap?null:A.glossinessMap,e.glossiness=A.glossiness,e.alphaMap=null,e.envMap=void 0===A.envMap?null:A.envMap,e.envMapIntensity=1,e}}class cA{constructor(){this.name=O.KHR_MESH_QUANTIZATION}}class BA extends i.Interpolant{constructor(A,e,t,s){super(A,e,t,s)}copySampleValue_(A){const e=this.resultBuffer,t=this.sampleValues,s=this.valueSize,r=A*s*3+s;for(let A=0;A!==s;A++)e[A]=t[r+A];return e}interpolate_(A,e,t,s){const r=this.resultBuffer,i=this.sampleValues,o=this.valueSize,n=2*o,a=3*o,g=s-e,I=(t-e)/g,c=I*I,B=c*I,C=A*a,l=C-a,E=-2*B+3*c,Q=B-c,h=1-E,d=Q-c+I;for(let A=0;A!==o;A++){const e=i[l+A+o],t=i[l+A+n]*g,s=i[C+A+o],a=i[C+A]*g;r[A]=h*e+d*t+E*s+Q*a}return r}}const CA=new i.Quaternion;class lA extends BA{interpolate_(A,e,t,s){const r=super.interpolate_(A,e,t,s);return CA.fromArray(r).normalize().toArray(r),r}}const EA={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},QA={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hA={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},dA={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},uA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},fA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mA={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete};function wA(A,e,t){for(const s in t.extensions)void 0===A[s]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=t.extensions[s])}function yA(A,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(A.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function DA(A,e){if(A.updateMorphTargets(),void 0!==e.weights)for(let t=0,s=e.weights.length;t<s;t++)A.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(A.morphTargetInfluences.length===t.length){A.morphTargetDictionary={};for(let e=0,s=t.length;e<s;e++)A.morphTargetDictionary[t[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function xA(A){const e=A.extensions&&A.extensions[O.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+RA(e.attributes):A.indices+":"+RA(A.attributes)+":"+A.mode,t}function RA(A){let e="";const t=Object.keys(A).sort();for(let s=0,r=t.length;s<r;s++)e+=t[s]+":"+A[t[s]]+";";return e}function SA(A){switch(A){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class FA{constructor(A={},e={}){this.json=A,this.extensions={},this.plugins={},this.options=e,this.cache=new J,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const t=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||t||s&&r<98?this.textureLoader=new i.TextureLoader(this.options.manager):this.textureLoader=new i.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(A){this.extensions=A}setPlugins(A){this.plugins=A}parse(A,e){const t=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(A){return A._markDefs&&A._markDefs()})),Promise.all(this._invokeAll((function(A){return A.beforeRoot&&A.beforeRoot()}))).then((function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])})).then((function(e){const i={scene:e[0][s.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:s.asset,parser:t,userData:{}};wA(r,i,s),yA(i,s),Promise.all(t._invokeAll((function(A){return A.afterRoot&&A.afterRoot(i)}))).then((function(){A(i)}))})).catch(e)}_markDefs(){const A=this.json.nodes||[],e=this.json.skins||[],t=this.json.meshes||[];for(let t=0,s=e.length;t<s;t++){const s=e[t].joints;for(let e=0,t=s.length;e<t;e++)A[s[e]].isBone=!0}for(let e=0,s=A.length;e<s;e++){const s=A[e];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(t[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(A,e){void 0!==e&&(void 0===A.refs[e]&&(A.refs[e]=A.uses[e]=0),A.refs[e]++)}_getNodeRef(A,e,t){if(A.refs[e]<=1)return t;const s=t.clone(),r=(A,e)=>{const t=this.associations.get(A);null!=t&&this.associations.set(e,t);for(const[t,s]of A.children.entries())r(s,e.children[t])};return r(t,s),s.name+="_instance_"+A.uses[e]++,s}_invokeOne(A){const e=Object.values(this.plugins);e.push(this);for(let t=0;t<e.length;t++){const s=A(e[t]);if(s)return s}return null}_invokeAll(A){const e=Object.values(this.plugins);e.unshift(this);const t=[];for(let s=0;s<e.length;s++){const r=A(e[s]);r&&t.push(r)}return t}getDependency(A,e){const t=A+":"+e;let s=this.cache.get(t);if(!s){switch(A){case"scene":s=this.loadScene(e);break;case"node":s=this.loadNode(e);break;case"mesh":s=this._invokeOne((function(A){return A.loadMesh&&A.loadMesh(e)}));break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne((function(A){return A.loadBufferView&&A.loadBufferView(e)}));break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne((function(A){return A.loadMaterial&&A.loadMaterial(e)}));break;case"texture":s=this._invokeOne((function(A){return A.loadTexture&&A.loadTexture(e)}));break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne((function(A){return A.loadAnimation&&A.loadAnimation(e)}));break;case"camera":s=this.loadCamera(e);break;default:throw new Error("Unknown type: "+A)}this.cache.add(t,s)}return s}getDependencies(A){let e=this.cache.get(A);if(!e){const t=this,s=this.json[A+("mesh"===A?"es":"s")]||[];e=Promise.all(s.map((function(e,s){return t.getDependency(A,s)}))),this.cache.add(A,e)}return e}loadBuffer(A){const e=this.json.buffers[A],t=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===A)return Promise.resolve(this.extensions[O.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(A,r){t.load(i.LoaderUtils.resolveURL(e.uri,s.path),A,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(A){const e=this.json.bufferViews[A];return this.getDependency("buffer",e.buffer).then((function(A){const t=e.byteLength||0,s=e.byteOffset||0;return A.slice(s,s+t)}))}loadAccessor(A){const e=this,t=this.json,s=this.json.accessors[A];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const r=[];return void 0!==s.bufferView?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),void 0!==s.sparse&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then((function(A){const r=A[0],o=uA[s.type],n=QA[s.componentType],a=n.BYTES_PER_ELEMENT,g=a*o,I=s.byteOffset||0,c=void 0!==s.bufferView?t.bufferViews[s.bufferView].byteStride:void 0,B=!0===s.normalized;let C,l;if(c&&c!==g){const A=Math.floor(I/c),t="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+A+":"+s.count;let g=e.cache.get(t);g||(C=new n(r,A*c,s.count*c/a),g=new i.InterleavedBuffer(C,c/a),e.cache.add(t,g)),l=new i.InterleavedBufferAttribute(g,o,I%c/a,B)}else C=null===r?new n(s.count*o):new n(r,I,s.count*o),l=new i.BufferAttribute(C,o,B);if(void 0!==s.sparse){const e=uA.SCALAR,t=QA[s.sparse.indices.componentType],a=s.sparse.indices.byteOffset||0,g=s.sparse.values.byteOffset||0,I=new t(A[1],a,s.sparse.count*e),c=new n(A[2],g,s.sparse.count*o);null!==r&&(l=new i.BufferAttribute(l.array.slice(),l.itemSize,l.normalized));for(let A=0,e=I.length;A<e;A++){const e=I[A];if(l.setX(e,c[A*o]),o>=2&&l.setY(e,c[A*o+1]),o>=3&&l.setZ(e,c[A*o+2]),o>=4&&l.setW(e,c[A*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return l}))}loadTexture(A){const e=this.json,t=this.options,s=e.textures[A].source,r=e.images[s];let i=this.textureLoader;if(r.uri){const A=t.manager.getHandler(r.uri);null!==A&&(i=A)}return this.loadTextureImage(A,s,i)}loadTextureImage(A,e,t){const s=this,r=this.json,o=r.textures[A],n=r.images[e],a=(n.uri||n.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const g=this.loadImageSource(e,t).then((function(e){e.flipY=!1,e.name=o.name||n.name||"";const t=(r.samplers||{})[o.sampler]||{};return e.magFilter=hA[t.magFilter]||i.LinearFilter,e.minFilter=hA[t.minFilter]||i.LinearMipmapLinearFilter,e.wrapS=dA[t.wrapS]||i.RepeatWrapping,e.wrapT=dA[t.wrapT]||i.RepeatWrapping,s.associations.set(e,{textures:A}),e})).catch((function(){return null}));return this.textureCache[a]=g,g}loadImageSource(A,e){const t=this.json,s=this.options;if(void 0!==this.sourceCache[A])return this.sourceCache[A].then((A=>A.clone()));const r=t.images[A],o=self.URL||self.webkitURL;let n=r.uri||"",a=!1;if(void 0!==r.bufferView)n=this.getDependency("bufferView",r.bufferView).then((function(A){a=!0;const e=new Blob([A],{type:r.mimeType});return n=o.createObjectURL(e),n}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+A+" is missing URI and bufferView");const g=Promise.resolve(n).then((function(A){return new Promise((function(t,r){let o=t;!0===e.isImageBitmapLoader&&(o=function(A){const e=new i.Texture(A);e.needsUpdate=!0,t(e)}),e.load(i.LoaderUtils.resolveURL(A,s.path),o,void 0,r)}))})).then((function(A){var e;return!0===a&&o.revokeObjectURL(n),A.userData.mimeType=r.mimeType||((e=r.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),A})).catch((function(A){throw console.error("THREE.GLTFLoader: Couldn't load texture",n),A}));return this.sourceCache[A]=g,g}assignTexture(A,e,t,s){const r=this;return this.getDependency("texture",t.index).then((function(i){if(void 0===t.texCoord||0==t.texCoord||"aoMap"===e&&1==t.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+t.texCoord+" for texture "+e+" not yet supported."),r.extensions[O.KHR_TEXTURE_TRANSFORM]){const A=void 0!==t.extensions?t.extensions[O.KHR_TEXTURE_TRANSFORM]:void 0;if(A){const e=r.associations.get(i);i=r.extensions[O.KHR_TEXTURE_TRANSFORM].extendTexture(i,A),r.associations.set(i,e)}}return void 0!==s&&(i.encoding=s),A[e]=i,i}))}assignFinalMaterial(A){const e=A.geometry;let t=A.material;const s=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(A.isPoints){const A="PointsMaterial:"+t.uuid;let e=this.cache.get(A);e||(e=new i.PointsMaterial,i.Material.prototype.copy.call(e,t),e.color.copy(t.color),e.map=t.map,e.sizeAttenuation=!1,this.cache.add(A,e)),t=e}else if(A.isLine){const A="LineBasicMaterial:"+t.uuid;let e=this.cache.get(A);e||(e=new i.LineBasicMaterial,i.Material.prototype.copy.call(e,t),e.color.copy(t.color),this.cache.add(A,e)),t=e}if(s||r||o){let A="ClonedMaterial:"+t.uuid+":";t.isGLTFSpecularGlossinessMaterial&&(A+="specular-glossiness:"),s&&(A+="derivative-tangents:"),r&&(A+="vertex-colors:"),o&&(A+="flat-shading:");let e=this.cache.get(A);e||(e=t.clone(),r&&(e.vertexColors=!0),o&&(e.flatShading=!0),s&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(A,e),this.associations.set(e,this.associations.get(t))),t=e}t.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),A.material=t}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(A){const e=this,t=this.json,s=this.extensions,r=t.materials[A];let o;const n={},a=r.extensions||{},g=[];if(a[O.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const A=s[O.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=A.getMaterialType(),g.push(A.extendParams(n,r,e))}else if(a[O.KHR_MATERIALS_UNLIT]){const A=s[O.KHR_MATERIALS_UNLIT];o=A.getMaterialType(),g.push(A.extendParams(n,r,e))}else{const t=r.pbrMetallicRoughness||{};if(n.color=new i.Color(1,1,1),n.opacity=1,Array.isArray(t.baseColorFactor)){const A=t.baseColorFactor;n.color.fromArray(A),n.opacity=A[3]}void 0!==t.baseColorTexture&&g.push(e.assignTexture(n,"map",t.baseColorTexture,i.sRGBEncoding)),n.metalness=void 0!==t.metallicFactor?t.metallicFactor:1,n.roughness=void 0!==t.roughnessFactor?t.roughnessFactor:1,void 0!==t.metallicRoughnessTexture&&(g.push(e.assignTexture(n,"metalnessMap",t.metallicRoughnessTexture)),g.push(e.assignTexture(n,"roughnessMap",t.metallicRoughnessTexture))),o=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(A)})),g.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(A,n)}))))}!0===r.doubleSided&&(n.side=i.DoubleSide);const I=r.alphaMode||"OPAQUE";if("BLEND"===I?(n.transparent=!0,n.depthWrite=!1):(n.transparent=!1,"MASK"===I&&(n.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==i.MeshBasicMaterial&&(g.push(e.assignTexture(n,"normalMap",r.normalTexture)),n.normalScale=new i.Vector2(1,1),void 0!==r.normalTexture.scale)){const A=r.normalTexture.scale;n.normalScale.set(A,A)}return void 0!==r.occlusionTexture&&o!==i.MeshBasicMaterial&&(g.push(e.assignTexture(n,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(n.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==i.MeshBasicMaterial&&(n.emissive=(new i.Color).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==i.MeshBasicMaterial&&g.push(e.assignTexture(n,"emissiveMap",r.emissiveTexture,i.sRGBEncoding)),Promise.all(g).then((function(){let t;return t=o===gA?s[O.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(n):new o(n),r.name&&(t.name=r.name),yA(t,r),e.associations.set(t,{materials:A}),r.extensions&&wA(s,t,r),t}))}createUniqueName(A){const e=i.PropertyBinding.sanitizeNodeName(A||"");let t=e;for(let A=1;this.nodeNamesUsed[t];++A)t=e+"_"+A;return this.nodeNamesUsed[t]=!0,t}loadGeometries(A){const e=this,t=this.extensions,s=this.primitiveCache;function r(A){return t[O.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(A,e).then((function(t){return GA(t,A,e)}))}const o=[];for(let t=0,n=A.length;t<n;t++){const n=A[t],a=xA(n),g=s[a];if(g)o.push(g.promise);else{let A;A=n.extensions&&n.extensions[O.KHR_DRACO_MESH_COMPRESSION]?r(n):GA(new i.BufferGeometry,n,e),s[a]={primitive:n,promise:A},o.push(A)}}return Promise.all(o)}loadMesh(A){const e=this,t=this.json,s=this.extensions,r=t.meshes[A],o=r.primitives,n=[];for(let A=0,e=o.length;A<e;A++){const e=void 0===o[A].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),a.DefaultMaterial):this.getDependency("material",o[A].material);n.push(e)}var a;return n.push(e.loadGeometries(o)),Promise.all(n).then((function(t){const n=t.slice(0,t.length-1),a=t[t.length-1],g=[];for(let t=0,I=a.length;t<I;t++){const I=a[t],c=o[t];let B;const C=n[t];if(c.mode===EA.TRIANGLES||c.mode===EA.TRIANGLE_STRIP||c.mode===EA.TRIANGLE_FAN||void 0===c.mode)B=!0===r.isSkinnedMesh?new i.SkinnedMesh(I,C):new i.Mesh(I,C),!0!==B.isSkinnedMesh||B.geometry.attributes.skinWeight.normalized||B.normalizeSkinWeights(),c.mode===EA.TRIANGLE_STRIP?B.geometry=MA(B.geometry,i.TriangleStripDrawMode):c.mode===EA.TRIANGLE_FAN&&(B.geometry=MA(B.geometry,i.TriangleFanDrawMode));else if(c.mode===EA.LINES)B=new i.LineSegments(I,C);else if(c.mode===EA.LINE_STRIP)B=new i.Line(I,C);else if(c.mode===EA.LINE_LOOP)B=new i.LineLoop(I,C);else{if(c.mode!==EA.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);B=new i.Points(I,C)}Object.keys(B.geometry.morphAttributes).length>0&&DA(B,r),B.name=e.createUniqueName(r.name||"mesh_"+A),yA(B,r),c.extensions&&wA(s,B,c),e.assignFinalMaterial(B),g.push(B)}for(let t=0,s=g.length;t<s;t++)e.associations.set(g[t],{meshes:A,primitives:t});if(1===g.length)return g[0];const I=new i.Group;e.associations.set(I,{meshes:A});for(let A=0,e=g.length;A<e;A++)I.add(g[A]);return I}))}loadCamera(A){let e;const t=this.json.cameras[A],s=t[t.type];if(s)return"perspective"===t.type?e=new i.PerspectiveCamera(i.MathUtils.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===t.type&&(e=new i.OrthographicCamera(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),t.name&&(e.name=this.createUniqueName(t.name)),yA(e,t),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(A){const e=this.json.skins[A],t={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(t):this.getDependency("accessor",e.inverseBindMatrices).then((function(A){return t.inverseBindMatrices=A,t}))}loadAnimation(A){const e=this.json.animations[A],t=[],s=[],r=[],o=[],n=[];for(let A=0,i=e.channels.length;A<i;A++){const i=e.channels[A],a=e.samplers[i.sampler],g=i.target,I=g.node,c=void 0!==e.parameters?e.parameters[a.input]:a.input,B=void 0!==e.parameters?e.parameters[a.output]:a.output;t.push(this.getDependency("node",I)),s.push(this.getDependency("accessor",c)),r.push(this.getDependency("accessor",B)),o.push(a),n.push(g)}return Promise.all([Promise.all(t),Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(n)]).then((function(t){const s=t[0],r=t[1],o=t[2],n=t[3],a=t[4],g=[];for(let A=0,e=s.length;A<e;A++){const e=s[A],t=r[A],I=o[A],c=n[A],B=a[A];if(void 0===e)continue;let C;switch(e.updateMatrix(),fA[B.path]){case fA.weights:C=i.NumberKeyframeTrack;break;case fA.rotation:C=i.QuaternionKeyframeTrack;break;default:C=i.VectorKeyframeTrack}const l=e.name?e.name:e.uuid,E=void 0!==c.interpolation?mA[c.interpolation]:i.InterpolateLinear,Q=[];fA[B.path]===fA.weights?e.traverse((function(A){A.morphTargetInfluences&&Q.push(A.name?A.name:A.uuid)})):Q.push(l);let h=I.array;if(I.normalized){const A=SA(h.constructor),e=new Float32Array(h.length);for(let t=0,s=h.length;t<s;t++)e[t]=h[t]*A;h=e}for(let A=0,e=Q.length;A<e;A++){const e=new C(Q[A]+"."+fA[B.path],t.array,h,E);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(A){return new(this instanceof i.QuaternionKeyframeTrack?lA:BA)(this.times,this.values,this.getValueSize()/3,A)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(e)}}const I=e.name?e.name:"animation_"+A;return new i.AnimationClip(I,void 0,g)}))}createNodeMesh(A){const e=this.json,t=this,s=e.nodes[A];return void 0===s.mesh?null:t.getDependency("mesh",s.mesh).then((function(A){const e=t._getNodeRef(t.meshCache,s.mesh,A);return void 0!==s.weights&&e.traverse((function(A){if(A.isMesh)for(let e=0,t=s.weights.length;e<t;e++)A.morphTargetInfluences[e]=s.weights[e]})),e}))}loadNode(A){const e=this.json,t=this.extensions,s=this,r=e.nodes[A],o=r.name?s.createUniqueName(r.name):"";return function(){const e=[],t=s._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(A)}));return t&&e.push(t),void 0!==r.camera&&e.push(s.getDependency("camera",r.camera).then((function(A){return s._getNodeRef(s.cameraCache,r.camera,A)}))),s._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(A)})).forEach((function(A){e.push(A)})),Promise.all(e)}().then((function(e){let n;if(n=!0===r.isBone?new i.Bone:e.length>1?new i.Group:1===e.length?e[0]:new i.Object3D,n!==e[0])for(let A=0,t=e.length;A<t;A++)n.add(e[A]);if(r.name&&(n.userData.name=r.name,n.name=o),yA(n,r),r.extensions&&wA(t,n,r),void 0!==r.matrix){const A=new i.Matrix4;A.fromArray(r.matrix),n.applyMatrix4(A)}else void 0!==r.translation&&n.position.fromArray(r.translation),void 0!==r.rotation&&n.quaternion.fromArray(r.rotation),void 0!==r.scale&&n.scale.fromArray(r.scale);return s.associations.has(n)||s.associations.set(n,{}),s.associations.get(n).nodes=A,n}))}loadScene(A){const e=this.json,t=this.extensions,s=this.json.scenes[A],r=this,o=new i.Group;s.name&&(o.name=r.createUniqueName(s.name)),yA(o,s),s.extensions&&wA(t,o,s);const n=s.nodes||[],a=[];for(let A=0,t=n.length;A<t;A++)a.push(LA(n[A],o,e,r));return Promise.all(a).then((function(){return r.associations=(A=>{const e=new Map;for(const[A,t]of r.associations)(A instanceof i.Material||A instanceof i.Texture)&&e.set(A,t);return A.traverse((A=>{const t=r.associations.get(A);null!=t&&e.set(A,t)})),e})(o),o}))}}function LA(A,e,t,s){const r=t.nodes[A];return s.getDependency("node",A).then((function(A){if(void 0===r.skin)return A;let e;return s.getDependency("skin",r.skin).then((function(A){e=A;const t=[];for(let A=0,r=e.joints.length;A<r;A++)t.push(s.getDependency("node",e.joints[A]));return Promise.all(t)})).then((function(t){return A.traverse((function(A){if(!A.isMesh)return;const s=[],r=[];for(let A=0,o=t.length;A<o;A++){const o=t[A];if(o){s.push(o);const t=new i.Matrix4;void 0!==e.inverseBindMatrices&&t.fromArray(e.inverseBindMatrices.array,16*A),r.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[A])}A.bind(new i.Skeleton(s,r),A.matrixWorld)})),A}))})).then((function(A){e.add(A);const i=[];if(r.children){const e=r.children;for(let r=0,o=e.length;r<o;r++){const o=e[r];i.push(LA(o,A,t,s))}}return Promise.all(i)}))}function GA(A,e,t){const s=e.attributes,r=[];function o(e,s){return t.getDependency("accessor",e).then((function(e){A.setAttribute(s,e)}))}for(const e in s){const t=pA[e]||e.toLowerCase();t in A.attributes||r.push(o(s[e],t))}if(void 0!==e.indices&&!A.index){const s=t.getDependency("accessor",e.indices).then((function(e){A.setIndex(e)}));r.push(s)}return yA(A,e),function(A,e,t){const s=e.attributes,r=new i.Box3;if(void 0===s.POSITION)return;{const A=t.json.accessors[s.POSITION],e=A.min,o=A.max;if(void 0===e||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new i.Vector3(e[0],e[1],e[2]),new i.Vector3(o[0],o[1],o[2])),A.normalized){const e=SA(QA[A.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const o=e.targets;if(void 0!==o){const A=new i.Vector3,e=new i.Vector3;for(let s=0,r=o.length;s<r;s++){const r=o[s];if(void 0!==r.POSITION){const s=t.json.accessors[r.POSITION],i=s.min,o=s.max;if(void 0!==i&&void 0!==o){if(e.setX(Math.max(Math.abs(i[0]),Math.abs(o[0]))),e.setY(Math.max(Math.abs(i[1]),Math.abs(o[1]))),e.setZ(Math.max(Math.abs(i[2]),Math.abs(o[2]))),s.normalized){const A=SA(QA[s.componentType]);e.multiplyScalar(A)}A.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(A)}A.boundingBox=r;const n=new i.Sphere;r.getCenter(n.center),n.radius=r.min.distanceTo(r.max)/2,A.boundingSphere=n}(A,e,t),Promise.all(r).then((function(){return void 0!==e.targets?function(A,e,t){let s=!1,r=!1,i=!1;for(let A=0,t=e.length;A<t;A++){const t=e[A];if(void 0!==t.POSITION&&(s=!0),void 0!==t.NORMAL&&(r=!0),void 0!==t.COLOR_0&&(i=!0),s&&r&&i)break}if(!s&&!r&&!i)return Promise.resolve(A);const o=[],n=[],a=[];for(let g=0,I=e.length;g<I;g++){const I=e[g];if(s){const e=void 0!==I.POSITION?t.getDependency("accessor",I.POSITION):A.attributes.position;o.push(e)}if(r){const e=void 0!==I.NORMAL?t.getDependency("accessor",I.NORMAL):A.attributes.normal;n.push(e)}if(i){const e=void 0!==I.COLOR_0?t.getDependency("accessor",I.COLOR_0):A.attributes.color;a.push(e)}}return Promise.all([Promise.all(o),Promise.all(n),Promise.all(a)]).then((function(e){const t=e[0],o=e[1],n=e[2];return s&&(A.morphAttributes.position=t),r&&(A.morphAttributes.normal=o),i&&(A.morphAttributes.color=n),A.morphTargetsRelative=!0,A}))}(A,e.targets,t):A}))}function MA(A,e){let t=A.getIndex();if(null===t){const e=[],s=A.getAttribute("position");if(void 0===s)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A;for(let A=0;A<s.count;A++)e.push(A);A.setIndex(e),t=A.getIndex()}const s=t.count-2,r=[];if(e===i.TriangleFanDrawMode)for(let A=1;A<=s;A++)r.push(t.getX(0)),r.push(t.getX(A)),r.push(t.getX(A+1));else for(let A=0;A<s;A++)A%2==0?(r.push(t.getX(A)),r.push(t.getX(A+1)),r.push(t.getX(A+2))):(r.push(t.getX(A+2)),r.push(t.getX(A+1)),r.push(t.getX(A)));r.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=A.clone();return o.setIndex(r),o}const kA=new WeakMap;class TA extends i.Loader{constructor(A){super(A),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(A){return this.decoderPath=A,this}setDecoderConfig(A){return this.decoderConfig=A,this}setWorkerLimit(A){return this.workerLimit=A,this}load(A,e,t,s){const r=new i.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(A,(A=>{this.decodeDracoFile(A,e).catch(s)}),t,s)}decodeDracoFile(A,e,t,s){const r={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!t};return this.decodeGeometry(A,r).then(e)}decodeGeometry(A,e){const t=JSON.stringify(e);if(kA.has(A)){const e=kA.get(A);if(e.key===t)return e.promise;if(0===A.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,i=A.byteLength,o=this._getWorker(r,i).then((t=>(s=t,new Promise(((t,i)=>{s._callbacks[r]={resolve:t,reject:i},s.postMessage({type:"decode",id:r,taskConfig:e,buffer:A},[A])}))))).then((A=>this._createGeometry(A.geometry)));return o.catch((()=>!0)).then((()=>{s&&r&&this._releaseTask(s,r)})),kA.set(A,{key:t,promise:o}),o}_createGeometry(A){const e=new i.BufferGeometry;A.index&&e.setIndex(new i.BufferAttribute(A.index.array,1));for(let t=0;t<A.attributes.length;t++){const s=A.attributes[t],r=s.name,o=s.array,n=s.itemSize;e.setAttribute(r,new i.BufferAttribute(o,n))}return e}_loadLibrary(A,e){const t=new i.FileLoader(this.manager);return t.setPath(this.decoderPath),t.setResponseType(e),t.setWithCredentials(this.withCredentials),new Promise(((e,s)=>{t.load(A,e,void 0,s)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const A="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return A?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{const t=e[0];A||(this.decoderConfig.wasmBinary=e[1]);const s=UA.toString(),r=["/* draco decoder */",t,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(A,e){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const A=new Worker(this.workerSourceURL);A._callbacks={},A._taskCosts={},A._taskLoad=0,A.postMessage({type:"init",decoderConfig:this.decoderConfig}),A.onmessage=function(e){const t=e.data;switch(t.type){case"decode":A._callbacks[t.id].resolve(t);break;case"error":A._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(A)}else this.workerPool.sort((function(A,e){return A._taskLoad>e._taskLoad?-1:1}));const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[A]=e,t._taskLoad+=e,t}))}_releaseTask(A,e){A._taskLoad-=A._taskCosts[e],delete A._callbacks[e],delete A._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map((A=>A._taskLoad)))}dispose(){for(let A=0;A<this.workerPool.length;++A)this.workerPool[A].terminate();return this.workerPool.length=0,this}}function UA(){let A,e;function t(A,e,t,s,r,i){const o=i.num_components(),n=t.num_points()*o,a=n*r.BYTES_PER_ELEMENT,g=function(A,e){switch(e){case Float32Array:return A.DT_FLOAT32;case Int8Array:return A.DT_INT8;case Int16Array:return A.DT_INT16;case Int32Array:return A.DT_INT32;case Uint8Array:return A.DT_UINT8;case Uint16Array:return A.DT_UINT16;case Uint32Array:return A.DT_UINT32}}(A,r),I=A._malloc(a);e.GetAttributeDataArrayForAllPoints(t,i,g,a,I);const c=new r(A.HEAPF32.buffer,I,n).slice();return A._free(I),{name:s,array:c,itemSize:o}}onmessage=function(s){const r=s.data;switch(r.type){case"init":A=r.decoderConfig,e=new Promise((function(e){A.onModuleLoaded=function(A){e({draco:A})},DracoDecoderModule(A)}));break;case"decode":const s=r.buffer,i=r.taskConfig;e.then((A=>{const e=A.draco,o=new e.Decoder,n=new e.DecoderBuffer;n.Init(new Int8Array(s),s.byteLength);try{const A=function(A,e,s,r){const i=r.attributeIDs,o=r.attributeTypes;let n,a;const g=e.GetEncodedGeometryType(s);if(g===A.TRIANGULAR_MESH)n=new A.Mesh,a=e.DecodeBufferToMesh(s,n);else{if(g!==A.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");n=new A.PointCloud,a=e.DecodeBufferToPointCloud(s,n)}if(!a.ok()||0===n.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());const I={index:null,attributes:[]};for(const s in i){const a=self[o[s]];let g,c;if(r.useUniqueIDs)c=i[s],g=e.GetAttributeByUniqueId(n,c);else{if(c=e.GetAttributeId(n,A[i[s]]),-1===c)continue;g=e.GetAttribute(n,c)}I.attributes.push(t(A,e,n,s,a,g))}return g===A.TRIANGULAR_MESH&&(I.index=function(A,e,t){const s=3*t.num_faces(),r=4*s,i=A._malloc(r);e.GetTrianglesUInt32Array(t,r,i);const o=new Uint32Array(A.HEAPF32.buffer,i,s).slice();return A._free(i),{array:o,itemSize:1}}(A,e,n)),A.destroy(n),I}(e,o,n,i),s=A.attributes.map((A=>A.array.buffer));A.index&&s.push(A.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:A},s)}catch(A){console.error(A),self.postMessage({type:"error",id:r.id,error:A.message})}finally{e.destroy(n),e.destroy(o)}}))}}}class bA{constructor(A=4){this.pool=A,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(A){if(!this.workers[A]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,A)),this.workers[A]=e}}_getIdleWorker(){for(let A=0;A<this.pool;A++)if(!(this.workerStatus&1<<A))return A;return-1}_onMessage(A,e){const t=this.workersResolve[A];if(t&&t(e),this.queue.length){const{resolve:e,msg:t,transfer:s}=this.queue.shift();this.workersResolve[A]=e,this.workers[A].postMessage(t,s)}else this.workerStatus^=1<<A}setWorkerCreator(A){this.workerCreator=A}setWorkerLimit(A){this.pool=A}postMessage(A,e){return new Promise((t=>{const s=this._getIdleWorker();-1!==s?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=t,this.workers[s].postMessage(A,e)):this.queue.push({resolve:t,msg:A,transfer:e})}))}dispose(){this.workers.forEach((A=>A.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class NA{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class _A{constructor(A,e,t,s){this._dataView=new DataView(A.buffer,A.byteOffset+e,t),this._littleEndian=s,this._offset=0}_nextUint8(){const A=this._dataView.getUint8(this._offset);return this._offset+=1,A}_nextUint16(){const A=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,A}_nextUint32(){const A=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint64(){const A=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,A}_nextInt32(){const A=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,A}_skip(A){return this._offset+=A,this}_scan(A,e=0){const t=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==e&&s<A;)s++,this._offset++;return s<A&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+t,s)}}new Uint8Array([0]);const vA=[171,75,84,88,32,50,48,187,13,10,26,10];function HA(A){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(A):Buffer.from(A).toString("utf8")}let PA,qA,JA;const OA={env:{emscripten_notify_memory_growth:function(A){JA=new Uint8Array(qA.exports.memory.buffer)}}};class KA{init(){return PA||(PA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+YA).then((A=>A.arrayBuffer())).then((A=>WebAssembly.instantiate(A,OA))).then(this._init):WebAssembly.instantiate(Buffer.from(YA,"base64"),OA).then(this._init),PA)}_init(A){qA=A.instance,OA.env.emscripten_notify_memory_growth(0)}decode(A,e=0){if(!qA)throw new Error("ZSTDDecoder: Await .init() before decoding.");const t=A.byteLength,s=qA.exports.malloc(t);JA.set(A,s),e=e||Number(qA.exports.ZSTD_findDecompressedSize(s,t));const r=qA.exports.malloc(e),i=qA.exports.ZSTD_decompress(r,e,s,t),o=JA.slice(r,r+i);return qA.exports.free(s),qA.exports.free(r),o}}const YA="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",jA=new WeakMap;let VA,WA=0;class XA extends i.Loader{constructor(A){super(A),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new bA,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(A){return this.transcoderPath=A,this}setWorkerLimit(A){return this.workerPool.setWorkerLimit(A),this}detectSupport(A){return this.workerConfig={astcSupported:A.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:A.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:A.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:A.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:A.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:A.extensions.has("WEBGL_compressed_texture_pvrtc")||A.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},A.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const A=new i.FileLoader(this.manager);A.setPath(this.transcoderPath),A.setWithCredentials(this.withCredentials);const e=A.loadAsync("basis_transcoder.js"),t=new i.FileLoader(this.manager);t.setPath(this.transcoderPath),t.setResponseType("arraybuffer"),t.setWithCredentials(this.withCredentials);const s=t.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,s]).then((([A,e])=>{const t=XA.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(XA.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(XA.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(XA.BasisFormat),"/* basis_transcoder.js */",A,"/* worker */",t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s])),this.transcoderBinary=e,this.workerPool.setWorkerCreator((()=>{const A=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return A.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),A}))})),WA>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),WA++}return this.transcoderPending}load(A,e,t,s){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new i.FileLoader(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(A,(A=>{if(jA.has(A))return jA.get(A).promise.then(e).catch(s);this._createTexture(A).then((A=>e?e(A):null)).catch(s)}),t,s)}_createTextureFrom(A,e){const{mipmaps:t,width:s,height:r,format:o,type:n,error:a,dfdTransferFn:g,dfdFlags:I}=A;if("error"===n)return Promise.reject(a);const c=e.layerCount>1?new i.CompressedArrayTexture(t,s,r,e.layerCount,o,i.UnsignedByteType):new i.CompressedTexture(t,s,r,o,i.UnsignedByteType);return c.minFilter=1===t.length?i.LinearFilter:i.LinearMipmapLinearFilter,c.magFilter=i.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0,c.encoding=2===g?i.sRGBEncoding:i.LinearEncoding,c.premultiplyAlpha=!!(1&I),c}async _createTexture(A,e={}){const t=function(A){const e=new Uint8Array(A.buffer,A.byteOffset,vA.length);if(e[0]!==vA[0]||e[1]!==vA[1]||e[2]!==vA[2]||e[3]!==vA[3]||e[4]!==vA[4]||e[5]!==vA[5]||e[6]!==vA[6]||e[7]!==vA[7]||e[8]!==vA[8]||e[9]!==vA[9]||e[10]!==vA[10]||e[11]!==vA[11])throw new Error("Missing KTX 2.0 identifier.");const t=new NA,s=17*Uint32Array.BYTES_PER_ELEMENT,r=new _A(A,vA.length,s,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const i=r._nextUint32();t.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),n=r._nextUint32(),a=r._nextUint32(),g=r._nextUint32(),I=r._nextUint64(),c=r._nextUint64(),B=new _A(A,vA.length+s,3*i*8,!0);for(let e=0;e<i;e++)t.levels.push({levelData:new Uint8Array(A.buffer,A.byteOffset+B._nextUint64(),B._nextUint64()),uncompressedByteLength:B._nextUint64()});const C=new _A(A,o,n,!0),l={vendorId:C._skip(4)._nextUint16(),descriptorType:C._nextUint16(),versionNumber:C._nextUint16(),descriptorBlockSize:C._nextUint16(),colorModel:C._nextUint8(),colorPrimaries:C._nextUint8(),transferFunction:C._nextUint8(),flags:C._nextUint8(),texelBlockDimension:[C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8()],bytesPlane:[C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8()],samples:[]},E=(l.descriptorBlockSize/4-6)/4;for(let A=0;A<E;A++){const e={bitOffset:C._nextUint16(),bitLength:C._nextUint8(),channelType:C._nextUint8(),samplePosition:[C._nextUint8(),C._nextUint8(),C._nextUint8(),C._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=C._nextInt32(),e.sampleUpper=C._nextInt32()):(e.sampleLower=C._nextUint32(),e.sampleUpper=C._nextUint32()),l.samples[A]=e}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(l);const Q=new _A(A,a,g,!0);for(;Q._offset<g;){const A=Q._nextUint32(),e=Q._scan(A),s=HA(e),r=Q._scan(A-e.byteLength);t.keyValue[s]=s.match(/^ktx/i)?HA(r):r,Q._offset%4&&Q._skip(4-Q._offset%4)}if(c<=0)return t;const h=new _A(A,I,c,!0),d=h._nextUint16(),u=h._nextUint16(),p=h._nextUint32(),f=h._nextUint32(),m=h._nextUint32(),w=h._nextUint32(),y=[];for(let A=0;A<i;A++)y.push({imageFlags:h._nextUint32(),rgbSliceByteOffset:h._nextUint32(),rgbSliceByteLength:h._nextUint32(),alphaSliceByteOffset:h._nextUint32(),alphaSliceByteLength:h._nextUint32()});const D=I+h._offset,x=D+p,R=x+f,S=R+m,F=new Uint8Array(A.buffer,A.byteOffset+D,p),L=new Uint8Array(A.buffer,A.byteOffset+x,f),G=new Uint8Array(A.buffer,A.byteOffset+R,m),M=new Uint8Array(A.buffer,A.byteOffset+S,w);return t.globalData={endpointCount:d,selectorCount:u,imageDescs:y,endpointsData:F,selectorsData:L,tablesData:G,extendedData:M},t}(new Uint8Array(A));if(0!==t.vkFormat)return async function(A){const{vkFormat:e,pixelWidth:t,pixelHeight:s,pixelDepth:r}=A;if(void 0===zA[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const o=A.levels[0];let n,a;if(0===A.supercompressionScheme)n=o.levelData;else{if(2!==A.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");VA||(VA=new Promise((async A=>{const e=new KA;await e.init(),A(e)}))),n=(await VA).decode(o.levelData,o.uncompressedByteLength)}a=ZA[e]===i.FloatType?new Float32Array(n.buffer,n.byteOffset,n.byteLength/Float32Array.BYTES_PER_ELEMENT):ZA[e]===i.HalfFloatType?new Uint16Array(n.buffer,n.byteOffset,n.byteLength/Uint16Array.BYTES_PER_ELEMENT):n;const g=0===r?new i.DataTexture(a,t,s):new i.Data3DTexture(a,t,s,r);return g.type=ZA[e],g.format=zA[e],g.encoding=$A[e]||i.LinearEncoding,g.needsUpdate=!0,Promise.resolve(g)}(t);const s=e,r=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:A,taskConfig:s},[A]))).then((A=>this._createTextureFrom(A.data,t)));return jA.set(A,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),WA--,this}}XA.BasisFormat={ETC1S:0,UASTC_4x4:1},XA.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},XA.EngineFormat={RGBAFormat:i.RGBAFormat,RGBA_ASTC_4x4_Format:i.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:i.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:i.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:i.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:i.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:i.RGB_ETC1_Format,RGB_ETC2_Format:i.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:i.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:i.RGB_S3TC_DXT1_Format},XA.BasisWorker=function(){let A,e,t;const s=_EngineFormat,r=_TranscoderFormat,i=_BasisFormat;self.addEventListener("message",(function(o){const c=o.data;switch(c.type){case"init":A=c.config,B=c.transcoderBinary,e=new Promise((A=>{t={wasmBinary:B,onRuntimeInitialized:A},BASIS(t)})).then((()=>{t.initializeBasis(),void 0===t.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":e.then((()=>{try{const{width:e,height:o,hasAlpha:B,mipmaps:C,format:l,dfdTransferFn:E,dfdFlags:Q}=function(e){const o=new t.KTX2File(new Uint8Array(e));function c(){o.close(),o.delete()}if(!o.isValid())throw c(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const B=o.isUASTC()?i.UASTC_4x4:i.ETC1S,C=o.getWidth(),l=o.getHeight(),E=o.getLayers()||1,Q=o.getLevels(),h=o.getHasAlpha(),d=o.getDFDTransferFunc(),u=o.getDFDFlags(),{transcoderFormat:p,engineFormat:f}=function(e,t,o,I){let c,B;const C=e===i.ETC1S?n:a;for(let s=0;s<C.length;s++){const r=C[s];if(A[r.if]&&r.basisFormat.includes(e)&&!(I&&r.transcoderFormat.length<2)&&(!r.needsPowerOfTwo||g(t)&&g(o)))return c=r.transcoderFormat[I?1:0],B=r.engineFormat[I?1:0],{transcoderFormat:c,engineFormat:B}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),c=r.RGBA32,B=s.RGBAFormat,{transcoderFormat:c,engineFormat:B}}(B,C,l,h);if(!C||!l||!Q)throw c(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw c(),new Error("THREE.KTX2Loader: .startTranscoding failed");const m=[];for(let A=0;A<Q;A++){const e=[];let t,s;for(let r=0;r<E;r++){const i=o.getImageLevelInfo(A,r,0);t=i.origWidth,s=i.origHeight;const n=new Uint8Array(o.getImageTranscodedSizeInBytes(A,r,0,p));if(!o.transcodeImage(n,A,r,0,p,0,-1,-1))throw c(),new Error("THREE.KTX2Loader: .transcodeImage failed.");e.push(n)}m.push({data:I(e),width:t,height:s})}return c(),{width:C,height:l,hasAlpha:h,mipmaps:m,format:f,dfdTransferFn:d,dfdFlags:u}}(c.buffer),h=[];for(let A=0;A<C.length;++A)h.push(C[A].data.buffer);self.postMessage({type:"transcode",id:c.id,width:e,height:o,hasAlpha:B,mipmaps:C,format:l,dfdTransferFn:E,dfdFlags:Q},h)}catch(A){console.error(A),self.postMessage({type:"error",id:c.id,error:A.message})}}))}var B}));const o=[{if:"astcSupported",basisFormat:[i.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],n=o.sort((function(A,e){return A.priorityETC1S-e.priorityETC1S})),a=o.sort((function(A,e){return A.priorityUASTC-e.priorityUASTC}));function g(A){return A<=2||0==(A&A-1)&&0!==A}function I(A){let e=0;for(const t of A)e+=t.byteLength;const t=new Uint8Array(e);let s=0;for(const e of A)t.set(e,s),s+=e.byteLength;return t}};const zA={109:i.RGBAFormat,97:i.RGBAFormat,37:i.RGBAFormat,43:i.RGBAFormat,103:i.RGFormat,83:i.RGFormat,16:i.RGFormat,22:i.RGFormat,100:i.RedFormat,76:i.RedFormat,15:i.RedFormat,9:i.RedFormat},ZA={109:i.FloatType,97:i.HalfFloatType,37:i.UnsignedByteType,43:i.UnsignedByteType,103:i.FloatType,83:i.HalfFloatType,16:i.UnsignedByteType,22:i.UnsignedByteType,100:i.FloatType,76:i.HalfFloatType,15:i.UnsignedByteType,9:i.UnsignedByteType},$A={43:i.sRGBEncoding,22:i.sRGBEncoding,15:i.sRGBEncoding};var Ae=t(9075),ee=t(9167);const te=A=>{const e=(0,s.useRef)(null),t=(0,s.useRef)(null),r=(0,s.useRef)(null),[n,a]=(0,s.useState)(1),[g,I]=(0,s.useState)(1),[c,B]=(0,s.useState)(!1),{invalidate:C,scene:l,gl:Q,camera:h}=(0,o.z)(),d=(0,o.D)(q,`${A.modelSrc}`,(e=>{console.log("finsihed model loading from:"+A.modelSrc),e.setDRACOLoader(A.dracoloader),e.setKTX2Loader(A.ktx2Loader)})),u=(0,s.useRef)(new i.AnimationMixer(d.scene));(0,s.useEffect)((()=>{if(A.hasData&&0!=A.index){const e=(new i.Box3).setFromObject(t.current),s=e.max.x-e.min.x;I(1/s*A.baseUnit),D(t.current),B(!0),console.log("finsihed data setting")}d.animations.forEach((A=>u.current.clipAction(A).play()))}),[A.src,A.hasData]),(0,o.A)(((A,e)=>{u?.current?.update(e),C()})),(0,s.useEffect)((()=>{r.current.onValuesChange((A=>{L.current&&L.current.update()}))}),[e]);const[p,f]=(0,s.useState)(!1),[m,w]=s.useState([]),y=m[0],D=A=>{A.traverse((function(A){A.hasOwnProperty("material")&&(A.material.userData.hasOwnProperty("originalColor")||(A.material.userData.originalColor=A.material.color))}))};(0,s.useEffect)((()=>{null!=y&&(window.studio.setSelection([r.current]),A.selectCallback(A.index))}),[y]),(0,s.useEffect)((()=>{window.studio.onSelectionChange((t=>{0!=window.studio.selection.length&&window.studio.selection[0].address.objectKey===A.name?(console.log("selected name is "+A.name),void 0===y&&w([e.current])):w([])}))}),[]);const x=()=>{window.studio.transaction((({set:A})=>{A(r.current.props.position.x,e.current.position.x),A(r.current.props.position.y,e.current.position.y),A(r.current.props.position.z,e.current.position.z),A(r.current.props.rotation.x,e.current.rotation.x),A(r.current.props.rotation.y,e.current.rotation.y),A(r.current.props.rotation.z,e.current.rotation.z),A(r.current.props.scale.x,e.current.scale.x),A(r.current.props.scale.y,e.current.scale.y),A(r.current.props.scale.z,e.current.scale.z)}))},R=(0,s.useRef)();(0,s.useEffect)((()=>{if(R.current){const e=R.current,t=e=>{A.orbitRef.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),()=>e.removeEventListener("dragging-changed",t)}}));const[S,F]=(0,s.useState)(!1),L=(0,s.useRef)(null);(0,s.useEffect)((()=>{F(!!y||!!p)}),[y,p]),(0,s.useEffect)((()=>{S?(t.current.traverse((function(A){A.hasOwnProperty("material")&&(A.material.color={isColor:!0,r:1,g:.1412632911304446,b:.45641102317066595})})),null===L.current&&(L.current=new i.BoxHelper(e.current,"hotpink"),l.add(L.current))):(t.current&&t.current.traverse((function(A){A.hasOwnProperty("material")&&(A.material.color=A.material.userData.originalColor)})),l.remove(L.current),L.current=null)}),[S]);const[G,M]=(0,s.useState)(0);return(0,E.jsxs)(E.Fragment,{children:[y&&(0,E.jsx)(Ae.Y,{object:y,ref:R,mode:["translate","rotate","scale"][G],onMouseUp:A=>{L.current&&L.current.update(),x()},onChange:A=>{L.current&&L.current.update(),x()}}),(0,E.jsx)(ee.P,{box:!0,onChange:A=>{0!=A.length?w([e.current]):w(A)},children:(0,E.jsx)(k.Ah.group,{theatreKey:A.name,name:A.name,onPointerOver:(0,s.useCallback)((A=>{A.stopPropagation(),f(!0)}),[]),onPointerOut:(0,s.useCallback)((A=>{A.stopPropagation(),f(!1)}),[]),onPointerDown:(0,s.useCallback)((A=>{A.stopPropagation()}),[]),onContextMenu:A=>{A.stopPropagation(),(A=>{if(R.current){A.stopPropagation();let e=G+1;M(e<3?e:0)}})(A)},ref:e,objRef:r,visible:c,scale:[1,1,1],position:[(A.x+A.width/2-A.frameWidth/2)/A.frameWidth*A.baseUnit,(A.frameHeight/2-(A.y+A.height/2))/A.frameHeight*(A.frameHeight/A.frameWidth)*A.baseUnit,5e-4*A.index*A.baseUnit],children:(0,E.jsx)("primitive",{ref:t,scale:c?[g*(A.width/A.frameWidth),g*(A.width/A.frameWidth),g*(A.width/A.frameWidth)]:[1,1,1],object:d.scene})})})]})},se=A=>{const[e,t]=(0,s.useState)(!1),r=(0,s.useRef)(null),n=(0,s.useRef)(null),a=(0,s.useRef)(null),g=(0,s.useRef)(null),[I,c]=(0,s.useState)(1),[B,C]=(0,s.useState)(null),[l,Q]=(0,s.useState)(!1),{invalidate:h,scene:d,gl:u,camera:p}=(0,o.z)(),f=(0,s.useCallback)((A=>{A.needsUpdate=!0,c(A.image.height/A.image.width),A.encoding=i.sRGBEncoding,C(A),Q(!0),A.dispose(),h()}),[]);(0,s.useEffect)((()=>{!0===A.isQuery?A.hasData&&(new i.TextureLoader).load(A.src,(A=>{f(A)})):A.hasData?(new i.TextureLoader).load(A.src,(A=>{f(A)})):new Promise((function(A,e){A(function(A,e,t,s,r,o){var n=document.createElement("canvas");n.width=e,n.height=t;const a=n.getContext("2d");var g=new i.Texture(n);g.magFilter=i.LinearFilter,g.minFilter=i.LinearMipMapLinearFilter;a.lineWidth=4,a.strokeStyle="white",a.beginPath();for(let A=0;A<=e;A+=213.33333333333334)0===A?(a.moveTo(2,0),a.lineTo(2,t)):(a.moveTo(A-2,0),a.lineTo(A-2,t));for(let A=0;A<=t;A+=120)0===A?(a.moveTo(0,2),a.lineTo(e,2)):(a.moveTo(0,A-2),a.lineTo(e,A-2));return a.stroke(),g.generateMipmaps=!0,g.needsUpdate=!0,g}(0,1920,1080).image.toDataURL("image/png"))})).then((function(A){var e=new i.Texture,t=new Image;t.src=A;var s=t;e.image=s,s.onload=function(){f(e)}}))}),[A.src,A.hasData]),(0,s.useEffect)((()=>{g.current.onValuesChange((A=>{!function(A,e){0==e&&(e=1e-5);let t=.5*A.parameters.width,s=new i.Vector2(-t,0),r=new i.Vector2(0,e),o=new i.Vector2(t,0),n=(new i.Vector2).subVectors(s,r),a=(new i.Vector2).subVectors(r,o),g=(new i.Vector2).subVectors(s,o),I=n.length()*a.length()*g.length()/(2*Math.abs(n.cross(g))),c=new i.Vector2(0,e-I),B=2*((new i.Vector2).subVectors(s,c).angle()-.5*Math.PI),C=A.attributes.uv,l=A.attributes.position,E=new i.Vector2;for(let A=0;A<C.count;A++){let e=1-C.getX(A),t=l.getY(A);E.copy(o).rotateAround(c,B*e),l.setXYZ(A,E.x,t,-E.y)}l.needsUpdate=!0}(n.current,A.curve),F.current&&F.current.update()}))}),[a]);const[m,w]=(0,s.useState)(!1),[y,D]=s.useState([]),x=y[0];(0,s.useEffect)((()=>{null!=x&&(window.studio.setSelection([g.current]),A.selectCallback(A.index))}),[x]),(0,s.useEffect)((()=>{window.studio.onSelectionChange((e=>{0!=window.studio.selection.length&&window.studio.selection[0].address.objectKey===A.name?void 0===x&&D([a.current]):D([])}))}),[]);const R=()=>{window.studio.transaction((({set:A})=>{A(g.current.props.position.x,a.current.position.x),A(g.current.props.position.y,a.current.position.y),A(g.current.props.position.z,a.current.position.z),A(g.current.props.rotation.x,a.current.rotation.x),A(g.current.props.rotation.y,a.current.rotation.y),A(g.current.props.rotation.z,a.current.rotation.z),A(g.current.props.scale.x,a.current.scale.x),A(g.current.props.scale.y,a.current.scale.y),A(g.current.props.scale.z,a.current.scale.z)}))},S=(0,s.useRef)();(0,s.useEffect)((()=>{if(S.current){const e=S.current,t=e=>{A.orbitRef.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),()=>e.removeEventListener("dragging-changed",t)}}));const F=(0,s.useRef)(null);(0,s.useEffect)((()=>{t(!!x||!!m)}),[x,m]),(0,s.useEffect)((()=>{e?null===F.current&&(F.current=new i.BoxHelper(a.current,"hotpink"),d.add(F.current)):(d.remove(F.current),F.current=null)}),[e]);const[L,G]=(0,s.useState)(0);return(0,E.jsxs)(E.Fragment,{children:[x&&(0,E.jsx)(Ae.Y,{object:x,name:"controls",ref:S,mode:["translate","rotate","scale"][L],onMouseUp:A=>{F.current&&F.current.update(),R()},onChange:A=>{F.current&&F.current.update(),R()}}),(0,E.jsx)(ee.P,{box:!0,onChange:A=>{D(A)},children:(0,E.jsxs)(k.Ah.mesh,{theatreKey:A.name,name:A.name,onPointerOver:(0,s.useCallback)((A=>{A.stopPropagation(),w(!0)}),[]),onPointerOut:(0,s.useCallback)((A=>{A.stopPropagation(),w(!1)}),[]),onContextMenu:A=>{A.stopPropagation(),(A=>{if(S.current){let A=L+1;G(A<3?A:0)}})()},ref:a,objRef:g,additionalProps:{curve:T.types.number(0,{nudgeMultiplier:A.baseUnit/100,range:[0,A.baseUnit]})},visible:l,scale:[1,1,1],position:A.hasData?[(A.x+A.width/2-A.frameWidth/2)/A.frameWidth*A.baseUnit,(A.frameHeight/2-(A.y+A.height/2))/A.frameHeight*(A.frameHeight/A.frameWidth)*A.baseUnit,5e-4*A.index*A.baseUnit]:[0,0,0],children:[(0,E.jsx)("planeGeometry",{ref:n,args:[A.hasData?A.baseUnit*(A.width/A.frameWidth):A.baseUnit,A.hasData?A.baseUnit*I*(A.width/A.frameWidth):A.baseUnit*I,40,40]}),(0,E.jsx)("meshBasicMaterial",{ref:r,side:i.DoubleSide,alphaTest:.1,transparent:!0,map:B,toneMapped:!1,color:e?"hotpink":"white"})]})})]})},re=({figmaData:A,isFigma:e,isQuery:t,baseUnit:r,orbitRef:o,selectCallback:n})=>{const a=(0,s.useRef)(null),g=(0,s.useRef)(null);return(0,s.useEffect)((()=>{var A,e;A=()=>{const A="https://172.22.0.20:8222/service_1/decoder";a.current=(new TA).setDecoderPath(`${A}/draco/gltf/`),g.current=(new XA).setTranscoderPath(`${A}/basis/`),a.current.preload(),console.log("decoderPath is "+A)},e=()=>{const A=`https://unpkg.com/three@0.${i.REVISION}.x`;a.current=(new TA).setDecoderPath(`${A}/draco/gltf/`),g.current=(new XA).setTranscoderPath(`${A}/basis/`),a.current.preload(),console.log("decoderPath is "+A)},fetch("https://172.22.0.20:8222/php/isLocalServer.php",{method:"get"}).then((function(A){if(A.status>=200&&A.status<300)return A.text();throw new Error(A.statusText)})).then((function(e){console.log("success"),console.log(e),"local_server"===e&&A()})).catch((A=>{console.log("failed"),console.log(A),e()}))}),[]),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(k.yR,{sheet:(0,T.getProject)("XRViewer").sheet("Node Tree","Asset"),children:0!=A.length?(0,E.jsx)(E.Fragment,{children:A.map((({type:A,index:s,name:i,x:I,y:c,width:B,height:C,frameWidth:l,frameHeight:Q,src:h,modelSrc:d})=>null!=d?(0,E.jsx)(te,{src:h,name:`#${s}-`+i.split("/")[i.split("/").length-1].substring(0,24),x:0===s?0:I,y:0===s?0:c,index:s,width:B,height:C,frameWidth:l,frameHeight:Q,hasData:!0,isFigma:e,isQuery:t,dracoloader:a.current,ktx2Loader:g.current,baseUnit:r,modelSrc:d,orbitRef:o,selectCallback:A=>{n(A)}},A+"-three-"+s):(0,E.jsx)(se,{src:h,name:`#${s}-`+i.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24),x:0===s?0:I,y:0===s?0:c,index:s,width:B,height:C,frameWidth:l,frameHeight:Q,hasData:!0,isQuery:t,baseUnit:r,orbitRef:o,selectCallback:A=>{n(A)}},A+"-three-"+s)))}):(0,E.jsx)(E.Fragment,{children:!0===t?(0,E.jsx)(E.Fragment,{}):(0,E.jsx)(se,{name:"Screen",hasData:!1,baseUnit:r,orbitRef:o,selectCallback:A=>{n(A)}})})})})};var ie=t(5733),oe=t.n(ie),ne=t(3162);async function ae(A,e){fetch(A).then((A=>A.blob())).then((t=>{var s=new Blob([t],{type:A.includes(".gltf")?"model/gltf+json":"model/gltf-binary"});e(s)}))}const ge=A=>A.sort(((A,e)=>e.index-A.index));async function Ie(A,e){const t=await fetch(A),s=await t.blob(),r=new FileReader;r.readAsDataURL(s),r.onloadend=()=>{e(r.result)}}async function ce(A,e,t,s,r){var i=0;const o=`https://api.figma.com/v1/files/${e}/nodes?ids=${t}`,n=await fetch(o,{headers:{Authorization:`Bearer ${A}`},method:"GET"}),a=await n.json(),g=Object.values(a.nodes)[0].document,I=await async function(A){let e=A.children;for(let t=0;t<A.children.length;t++)!1===A.children[t].visible&&delete e[t];return e=e.filter((A=>null!=A&&""!=A)),e}(g),c=I.length;var B=new Array(c+0);await(async t=>{((A,e,t,s,r)=>{for(var i=0;i<s.length;i++){let o=i;s[o],fetch(`https://api.figma.com/v1/images/${e}?ids=${s[o].id}&svg_include_id=true&format=png&scale=1`,{headers:{Authorization:`Bearer ${A}`},method:"GET"}).then((A=>A.json())).then((A=>Object.values(A.images)[0])).then((A=>{Ie(A,(A=>{r({name:s[o].name,width:s[o].absoluteBoundingBox.width,height:s[o].absoluteBoundingBox.height,frameWidth:t.absoluteRenderBounds.width,frameHeight:t.absoluteRenderBounds.height,x:s[o].absoluteBoundingBox.x-t.absoluteBoundingBox.x,y:s[o].absoluteBoundingBox.y-t.absoluteBoundingBox.y,src:A,type:"image-childnode",index:o+0,id:s[o].id},o)}))}))}})(A,e,g,I,((A,e)=>{B.splice(e+0,1,A),console.log("fetched num "+i),console.log(`fetched index ${e+0}`),i++,s(`${i}/${c+0}`),i===c+0&&r(B)}))})()}async function Be(A,e,t,s){var r=0;const i=`https://172.22.0.20:8222/external/${A}/${e.replaceAll(":","%253A")}/data.json`,o=await fetch(i),n=(await o.json()).nodes[0].document,a=n.children,g=a.length;var I=new Array(g);await(async A=>{((A,e,t,s)=>{for(var r=0;r<t.length;r++){let A=r;const i=t[A];console.log(i),s({name:t[A].name,width:t[A].absoluteBoundingBox.width,height:t[A].absoluteBoundingBox.height,frameWidth:e.absoluteRenderBounds.width,frameHeight:e.absoluteRenderBounds.height,x:t[A].absoluteBoundingBox.x-e.absoluteBoundingBox.x,y:t[A].absoluteBoundingBox.y-e.absoluteBoundingBox.y,src:i.src,type:"image-childnode",index:A+0,id:t[A].id},A)}})(0,n,a,((A,e)=>{I.splice(e+0,1,A),console.log("fetched num "+r),console.log(`fetched index ${e}`),r++,t(`${r}/${g}`),r===g&&s(I)}))})()}const Ce="figma-authorization-code-data";class le{constructor({clientId:A,clientSecrete:e,redirectUri:t}){if(!A)throw Error("clientId is required");if(!e)throw Error("clientSecrete is required");if(!t)throw Error("redirectUri is required");this.config={clientId:A,clientSecrete:e,redirectUri:t}}async getOAuth2Token(){const A=Math.random().toString(),e=this.getAuthorizationCode(A).then((A=>this.getAccessTokenData(A))).then((A=>this.storeAccessTokenData(A))).catch((A=>console.error(A)));return window.open(`https://www.figma.com/oauth?client_id=${this.config.clientId}&redirect_uri=${this.config.redirectUri}&scope=file_read&state=${A}&response_type=code`),e}async getAuthorizationCode(A){return new Promise(((e,t)=>{let s=null;window.addEventListener("storage",s=r=>{if(r.key===Ce){const{code:i,state:o}=JSON.parse(r.newValue);window.removeEventListener("storage",s),window.localStorage.removeItem(Ce),o!==A?t("STATE_MISMATCH"):e(i)}})}))}async getAccessTokenData(A){return fetch(`https://www.figma.com/api/oauth/token?client_id=${this.config.clientId}&client_secret=${this.config.clientSecrete}&redirect_uri=${this.config.redirectUri}&code=${A}&grant_type=authorization_code`,{method:"POST"}).then((A=>A.json())).then((A=>{const{access_token:e,expires_in:t}=A;return{token:e,expireOnEpoch:Date.now()+1e3*t}}))}storeAccessTokenData(A){return window.localStorage.setItem("figma-access-token-data",JSON.stringify(A)),A.token}}var Ee=t(6706),Qe=t(3758);const he=g.ZP.div`
  position: absolute;
  right: 0px;
  bottom: 0px;
  height: 12px;
  width: 12px;
  cursor: nwse-resize;
  z-index:9999;
`,de=g.ZP.div`
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: calc(100% - 12px);
  height: 4px;
  cursor: n-resize;
  z-index:9999;
`,ue=g.ZP.div`
  position: absolute;
  top:0px;
  right: 0px;
  height: calc(100% - 12px);
  width: 4px;
  cursor: e-resize;
  z-index:9999;
`,pe=({minWidth:A,minHeight:e})=>{const t=(0,s.useRef)(),r=(0,s.useRef)(),i=(0,s.useRef)();function o(t,s,r){const i={w:Math.max(A,Math.floor(t.clientX)),h:Math.max(e,Math.floor(t.clientY)),vertical:s,horizontal:r};parent.postMessage({pluginMessage:{type:"resize",size:i}},"*")}return(0,s.useEffect)((()=>{if(t.current){const A=t.current;A.onpointerdown=e=>{A.onpointermove=A=>{o(A,!0,!0)},A.setPointerCapture(e.pointerId)},A.onpointerup=e=>{A.onpointermove=null,A.releasePointerCapture(e.pointerId)}}if(i.current){const A=i.current;A.onpointerdown=e=>{A.onpointermove=A=>{o(A,!1,!0)},A.setPointerCapture(e.pointerId)},A.onpointerup=e=>{A.onpointermove=null,A.releasePointerCapture(e.pointerId)}}if(r.current){const A=r.current;A.onpointerdown=e=>{A.onpointermove=A=>{o(A,!0,!1)},A.setPointerCapture(e.pointerId)},A.onpointerup=e=>{A.onpointermove=null,A.releasePointerCapture(e.pointerId)}}}),[t,i,r]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(de,{ref:r}),(0,E.jsx)(ue,{ref:i}),(0,E.jsx)(he,{ref:t})]})},fe=g.ZP.div`
    background: black;
    z-index: 9999;
    bottom: 17px;
    right: 16px;
    border-radius: 12px;
    width: 246px;
    height: 184px;
    padding:8px;
    gap: 1rem;
    overflow-x: auto;
    position: absolute;
    flex-flow: row;
    align-items: baseline;
    border:1px solid #4b4b4b; // #cacaca
    display:${({isShow:A})=>A?"flex":"none"};

    ::before {       
        content: ''; 
        background-color: rgba(127,127,127,1.0);
        background-image: linear-gradient(45deg,#b0b0b0 25%,transparent 25%),linear-gradient(-45deg,#b0b0b0 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#b0b0b0 75%),linear-gradient(-45deg,transparent 75%,#b0b0b0 75%);
        background-size: 20px 20px;
        background-position: 0 0,0 10px,10px -10px,-10px 0px;
        border-radius: 6px;
        position: absolute;
        left: 8px;
        top: 8px;
        width: calc(100% - 16px);
        height: calc(100% - 50px);
    }
`,me=g.ZP.img`
    transition:all 0.15s;
    scroll-snap-align: start;
    object-fit: contain;
    user-select: none;
    width: calc(100% - 40px);
    height: calc(100% - 77px);
    padding: 20px;
    z-index:9999;
    display:${({isSelect:A})=>A?"initial":"none"};
`,we=g.ZP.div`
  position: absolute;
  bottom: 23px;
  right: 60px;
  width: 212px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: white;
  line-height: 32px;
  font-family: 'Inter','Helvetica',sans-serif;
  font-size: 12px;
  font-weight: 600;
  z-index: 9999;
  text-align: left;
  user-select:none;
  display:${({isShow:A})=>A?"initial":"none"};
`,ye=g.ZP.div`
  position: absolute;
  right: 23px;
  width: 32px;
  height: 32px;
  bottom: 23px;
  background: black;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  cursor:pointer;
  // border: 1px solid hsl(0deg 0% 25%);
  &:hover{
    background: #40aeff;
  }
  z-index:9999;
`,De=g.ZP.svg`
  fill: ${({active:A,hover:e})=>A||e?"white":"rgba(255,255,255,0.5)"};
  width: 20px;
  height: 20px;
  position: absolute;
  bottom: 3px;
  right: 3px;

  &:hover {
    fill: white;
  }
`,xe=({active:A,hover:e})=>(0,E.jsx)(De,{active:A,hover:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 460.002 460.002",children:(0,E.jsxs)("g",{xmlns:"http://www.w3.org/2000/svg",id:"XMLID_11_",children:[(0,E.jsx)("path",{id:"XMLID_12_",d:"M195,150c27.57,0,50-22.43,50-50s-22.43-50-50-50s-50,22.43-50,50S167.43,150,195,150z"}),(0,E.jsx)("path",{id:"XMLID_13_",d:"M315,0H15C6.716,0,0,6.716,0,15v239.804c0,0.01,0,0.02,0,0.03V315c0,8.284,6.716,15,15,15h300   c8.284,0,15-6.716,15-15V15C330,6.716,323.284,0,315,0z M300,209.636l-32.957-44.388c-2.829-3.811-7.296-6.058-12.043-6.058   s-9.214,2.247-12.043,6.058l-47.531,64.016l-78.093-112.802C114.531,112.415,109.922,110,105,110s-9.531,2.415-12.333,6.462   L30,206.981V30h270V209.636z"})]})}),Re=({onClick:A})=>{const[e,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!1);return(0,E.jsx)(ye,{onClick:()=>{A(),t(!e)},onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:(0,E.jsx)(xe,{active:e,hover:r})})},Se=(0,s.forwardRef)((({figData:A},e)=>{const[t,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(-1),[n,a]=(0,s.useState)("empty"),g=(0,s.useRef)();return(0,s.useImperativeHandle)(e,(()=>({setSelect:A=>{o(A)},getImgLayout:()=>g.current}))),(0,s.useEffect)((()=>{a(-1!=i?A[A.length-1-i].name:"empty")}),[i]),(0,E.jsxs)("div",{id:"gallery-root",children:[(0,E.jsx)(fe,{ref:g,isShow:t,children:A.map((({src:A,type:e,index:t,name:s})=>(0,E.jsx)(me,{src:A,id:e+"-"+t,name:s,isSelect:i===t},e+"-"+t)))}),(0,E.jsx)(we,{isShow:t,children:n}),0!=A.length&&(0,E.jsx)(Re,{onClick:()=>{r(!t)}})]})})),Fe=100,Le=(0,T.getProject)("XRViewer").sheet("Node Tree","Controller"),Ge=Le.object(" - Helper Controller",{polarHelper:T.types.boolean(!0),dotHelper:T.types.boolean(!1),quality:T.types.stringLiteral(2,{1:"x1",2:"x2",3:"x3"}),dpr:T.types.number(1,{nudgeMultiplier:.5,range:[0,2]})}),Me=(0,s.forwardRef)((({containerRef:A,figmaData:e,isQuery:t,isFigma:r,loadingProgress:n,finishedRenderingCallback:a,selectCallback:g},I)=>{const c=(0,s.useRef)(null),B=(0,s.useRef)(null),C=(0,s.useRef)(null),l=(0,s.useRef)(Ge),Q=(0,s.useRef)(null),h=(0,s.useRef)(null),{invalidate:d,scene:u,gl:p,camera:f}=(0,o.z)();(0,s.useImperativeHandle)(I,(()=>({saveImage:()=>{u.background=null;const e=((A,e,t,s,r,i)=>b(void 0,void 0,void 0,(function*(){var o;try{const n=A,a=e;let g=1*n,I=1*a;return 2===t&&(g=1*n,I=1*a),3===t&&(g=2*n,I=2*a),1===t&&(g=.5*n,I=.5*a),i.aspect=g/I,i.updateProjectionMatrix(),r.setSize(g,I),r.render(s,i,null,!1),o=r.domElement.toDataURL("image/png"),i.aspect=n/a,i.updateProjectionMatrix(),r.setSize(n,a),o}catch(A){return void console.log(A)}})))(A.current.clientWidth,A.current.clientHeight,Number(Ge.value.quality),u,p,f);return u.background=new i.Color("#272730"),e},getCameraSheetObj:()=>C})));const m=(0,s.useCallback)((()=>{const A=0!=e.length?e[0].frameHeight/e[0].frameWidth:.5625;console.log("the screen aspect ratio is : "+A),((A,e,t,s,r)=>{const o=new i.PolarGridHelper(4*s,8,4,64,16777215,16777215);o.position.y=-t/2*s,o.position.z=s,o.visible=e.current.value.polarHelper,A.add(o);const n=new i.PlaneGeometry(8*s,8*s,Math.min(250,Math.max(40,8*s*5)),Math.min(250,Math.max(40,8*s*5)));n.rotateX(Math.PI/2);const a=new i.PointsMaterial({transparent:!1,fog:!1});a.map=function(A,e){var t=document.createElement("canvas");t.width=t.height=e;var s=t.getContext("2d"),r=new i.Texture(t);r.magFilter=i.LinearFilter,r.minFilter=i.LinearMipMapLinearFilter;var o=e/2;return s.beginPath(),s.arc(o,o,e/2,0,2*Math.PI,!1),s.closePath(),s.fillStyle="#ffffff",s.fill(),r.generateMipmaps=!0,r.needsUpdate=!0,r}(0,8*s),a.size=.00825;const g=new i.Points(n,a);g.position.y=-t/2*s,g.position.z=s,g.visible=e.current.value.dotHelper,A.add(g),r(o,g)})(u,l,A,Fe,((A,e)=>{l.current.onValuesChange((t=>{A.visible=t.polarHelper,e.visible=t.dotHelper,p.setPixelRatio(t.dpr),d()}))}))}),[]);return(0,s.useEffect)((()=>{if(!0===t){const A=2===n.split("/").length,e=n.split("/")[0]===n.split("/")[1];A&&e&&(m(),a())}else m(),a()}),[t,n]),(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(Ee.H,{shadows:!1,preset:"rembrandt",intensity:1,environment:"sunset",adjustCamera:!1,children:[(0,E.jsx)(k.yR,{sheet:Le,children:(0,E.jsx)(_,{cameraRef:c,cameraSheetObj:C,baseUnit:Fe,aspect:window.innerWidth/window.innerHeight})}),(0,E.jsx)("ambientLight",{}),(0,E.jsx)(L,{orbitRef:B,cameraSheetObj:C}),!1===r?(0,E.jsx)(P,{cameraSheetObj:C,children:(0,E.jsx)(k.yR,{sheet:Le,children:(0,E.jsx)(k.Ah.group,{theatreKey:" - Main Controller",ref:Q,objRef:h,children:(0,E.jsx)(re,{selectCallback:A=>{g(A)},figmaData:e,isFigma:r,isQuery:t,baseUnit:Fe,orbitRef:B})})})}):(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(k.yR,{sheet:Le,children:(0,E.jsx)(k.Ah.group,{theatreKey:" - Main Controller",ref:Q,objRef:h,children:(0,E.jsx)(re,{selectCallback:A=>{g(A)},figmaData:e,isFigma:r,isQuery:t,baseUnit:Fe,orbitRef:B})})})}),(0,E.jsx)(Qe.S,{pixelated:!0})]})})})),ke=s.memo(Me),Te=()=>{const A=(0,s.useRef)(null),e=(0,s.useRef)(null),t=(0,s.useRef)(),[r,o]=((0,s.useRef)(),(0,s.useRef)(),(0,s.useState)([])),[g,Q]=(0,s.useState)(!1),[h,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[f,m]=(0,s.useState)("0"),[w,y]=(0,s.useState)(!1),D=(0,s.useCallback)((({event:A,image:e,message:t,name:s})=>{(async(A,e,t,s)=>{b(void 0,void 0,void 0,(function*(){A&&A.preventDefault();const r=yield e;if(!r)return;const{width:i,height:o}=yield(n=r,new Promise((A=>{const e=new Image;e.onload=()=>A(e),e.src=n})));var n;const a=function(A){const e=A.split(",")[1],t=atob(e),s=new ArrayBuffer(t.length),r=new Uint8Array(s);for(let A=0;A<t.length;A++)r[A]=t.charCodeAt(A);return r}(r);return parent.postMessage({pluginMessage:{type:t,name:s,width:i,height:o,blob:a}},"*")}))})(A,e,t,s)}),[r]),x=(0,s.useCallback)((({event:A,isServe:e,data:t,imageLayout:s})=>{(async(A,e,t,s)=>{var r=document.documentElement.innerHTML,i=new Array(t.length);console.log(t),console.log(i),new Promise(((A,s)=>{if(!0===e)for(var o=0;o<i.length;o++){let e=o;if(i.splice(e,1,{name:t[e].name,width:t[e].width,height:t[e].height,frameWidth:t[e].frameWidth,frameHeight:t[e].frameHeight,x:t[e].x,y:t[e].y,src:null!=t[e].modelSrc?`./pngs/%23${e}-`+t[e].name.split("/")[t[e].name.split("/").length-1].substring(0,24)+".png":`./pngs/%23${e}-`+t[e].name.replaceAll(/\//g,"_").replaceAll(/\ /g,"_").substring(0,24)+".png",type:t[e].type,index:t[e].index,id:t[e].id,imageData:null,modelSrc:null!=t[e].modelSrc?`./models/%23${e}-`+t[e].modelSrc.split("/")[t[e].modelSrc.split("/").length-1]:null}),e===i.length-1){const e=r.replace(/savedFigData = \'\'/g,`savedFigData = ${JSON.stringify(i)}`).replaceAll('<div id="theatrejs-studio-root" style="position: fixed; inset: 0px; pointer-events: none; z-index: 100;"></div>',"");A({data:e,isServe:!0})}}else{let e=0;const s=(s,o,n)=>{if(i.splice(n,1,{name:t[n].name,width:t[n].width,height:t[n].height,frameWidth:t[n].frameWidth,frameHeight:t[n].frameHeight,x:t[n].x,y:t[n].y,src:o,type:t[n].type,index:t[n].index,id:t[n].id,imageData:null,modelSrc:s}),e++,e===i.length){const e=r.replace(/savedFigData = \'\'/g,`savedFigData = ${JSON.stringify(i)}`).replaceAll('<div id="theatrejs-studio-root" style="position: fixed; inset: 0px; pointer-events: none; z-index: 100;"></div>',"");A({data:e,isServe:!1})}};for(o=0;o<i.length;o++){let A=o;const e=new FileReader;e.readAsDataURL(new Blob([t[A].imageData],{type:"image/png"})),e.onloadend=()=>{null!=t[A].modelSrc?ae(t[A].modelSrc,(t=>{const r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{s(r.result,e.result,A)}})):s(null,e.result,A)}}}})).then((A=>{if(!0===A.isServe){var e=[],r=0;console.log("start");const g=(A,t,s)=>(console.log("added"),e.push({url:A,name:t,ext:s}),e),I=()=>{++r===i.length&&function(A,e){if(!e)return;const t=new(oe()),s=t.folder("pngs"),r=t.folder("models");e.forEach((A=>{const e=fetch(A.url).then((A=>200===A.status?A.blob():Promise.reject(new Error(A.statusText)))),i=A.name+"."+A.ext;"html"===A.ext&&t.file(i,e),"png"===A.ext&&s.file(i,e),"gltf"!==A.ext&&"glb"!==A.ext||r.file(i,e)})),t.generateAsync({type:"blob"}).then((A=>(0,ne.saveAs)(A,"my_project"))).then((()=>{}))}(0,e)};var o=new Blob([A.data],{type:"text/html"}),n=window.URL.createObjectURL(o);e.push({url:n,name:"index",ext:"html"});for(var a=0;a<t.length;a++){let A=a;null!=t[A].modelSrc?ae(t[A].modelSrc,(r=>{e=g(URL.createObjectURL(r),`#${A}-`+t[A].modelSrc.split("/")[t[A].modelSrc.split("/").length-1].split(".")[0].substring(0,24),t[A].modelSrc.includes(".gltf")?"gltf":"glb"),e=g(s.children[t.length-1-A].src,`#${A}-`+t[A].modelSrc.split("/")[t[A].modelSrc.split("/").length-1].substring(0,24),"png"),I()})):(e=g(s.children[t.length-1-A].src,`#${A}-`+t[A].name.replaceAll(/\//g,"_").replaceAll(/\ /g,"_").substring(0,24),"png"),I())}}else o=new Blob([A.data],{type:"text/html"}),n=window.URL.createObjectURL(o),(a=document.createElement("a")).href=n,a.download="index_static.html",a.style="display: none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))})(0,e,t,s)}),[]),R=(0,s.useCallback)((()=>{console.log("successed - init with empty data"),p(!1)}),[]),F=(0,s.useCallback)((A=>{console.log("init with saved data"),Q(!1),d(!1),o(ge(A)),p(!1)}),[]),L=(0,s.useCallback)(((A,e)=>{if("selection"===A){if(!e)return console.log("failed - no figma selection"),()=>{};console.log("successed - init with figma data"),d(!1),p(!0);for(var t=0;t<e.data.length;t++){let A=t;e.data[A].src=URL.createObjectURL(new Blob([e.data[A].imageData],{type:"image/png"})),t===e.data.length-1&&(Q(e.isFigma),o(ge(e.data)),p(!1))}}if("failed"===A&&!e)return console.log("failed - get data failed"),()=>{}}),[]),G=(0,s.useCallback)(((A,e,t)=>{console.log("successed - init with query data"),Q(!1),d(!0),p(!0);const s=A=>{for(let e=0;e<A.length;e++)(A[e].name.includes(".glb")||A[e].name.includes(".gltf"))&&(A[e].modelSrc=A[e].name,A[e].name=A[e].name.split("/")[A[e].name.split("/").length-1]),e===A.length-1&&(o(ge(A)),p(!1))};"local_server"===A?(console.log("query - local server"),console.log(e),console.log(t),Be(e,t,(A=>{m(A)}),(A=>{s(A)}))):"auth_everytime"===A?(console.log("query - need OAuth"),new le({clientId:"2beFW69qeg7DvjBp6bKpm5",clientSecrete:"013RerD24yjKxvSIrUr4f6dESMYST8",redirectUri:"https://www.martinrgb.com/FigmaImporter/v4/callback.html"}).getOAuth2Token().then((A=>{ce(A,e,t,(A=>{m(A)}),(A=>{s(A)}))}))):(console.log("query - already exist OAuth"),ce(A,e,t,(A=>{m(A)}),(A=>{s(A)})))}),[]);(0,s.useEffect)((()=>{const A=new URL(window.location.href),e=A.searchParams.get("query_key"),t=A.searchParams.get("query_node"),s=A.searchParams.get("query_token");console.log("fileKey is: "+e),console.log("nodeId is: "+t),console.log("token is: "+s),""!=savedFigData?(console.log("init with saved figma data"),F(savedFigData)):null!=e&&null!=t?(console.log("init with query data"),G(s,e,t)):(console.log("init with empty data"),R()),window.onmessage=A=>{if(null!=A.data.pluginMessage){const{type:e,value:t}=A.data.pluginMessage;console.log("init with figma app data"),L(e,t)}}}),[]);const M=A=>{"Enter VR"!==A.target.innerHTML&&"Enter AR"!==A.target.innerHTML||(document.getElementById("theatrejs-studio-root").style.display="none",document.getElementById("gallery-root").style.display="none"),"Exit VR"!==A.target.innerHTML&&"Exit AR"!==A.target.innerHTML||(document.getElementById("theatrejs-studio-root").style.display="initial",document.getElementById("gallery-root").style.display="initial")};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(I,{}),u?(0,E.jsx)(S,{loadingProgress:`${f}`,hintText:" of total nodes is loaded"}):(0,E.jsxs)(E.Fragment,{children:[w?(0,E.jsx)(E.Fragment,{}):(0,E.jsx)(S,{hintText:"init the renderer"}),(0,E.jsxs)(s.Suspense,{fallback:(0,E.jsx)(E.Fragment,{}),children:[(0,E.jsx)(c,{children:(0,E.jsxs)(l,{ref:A,children:[(0,E.jsx)(Se,{ref:t,figData:r}),(0,E.jsx)(B,{children:g?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C,{onClick:A=>{D({event:A,image:e.current.saveImage(),message:"save-canvas-image",name:r[0].name})},children:"SaveToFigma"}),(0,E.jsx)(C,{onClick:A=>{x({event:A,isServe:!0,data:r,imageLayout:t.current.getImgLayout()})},children:"Download(Serve)"}),(0,E.jsx)(C,{onClick:A=>{x({event:A,isServe:!1,data:r,imageLayout:t.current.getImgLayout()})},children:"Download(Static)"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.vZ,{className:"xr-button",onClick:A=>{M(A)},mode:"AR"}),(0,E.jsx)(a.vZ,{className:"xr-button",onClick:A=>{M(A)},mode:"VR"})]})}),(0,E.jsx)(n.Xz,{frameloop:"demand",performance:{current:1,min:.1,max:1,debounce:200},gl:{preserveDrawingBuffer:!0,outputEncoding:i.sRGBEncoding,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0},children:(0,E.jsx)(ke,{ref:e,containerRef:A,isFigma:g,isQuery:h,loadingProgress:f,figmaData:r,finishedRenderingCallback:()=>{y(!0)},selectCallback:A=>{t.current.setSelect(A)}})})]})}),g&&(0,E.jsx)(pe,{minWidth:512,minHeight:512})]})]})]})};var Ue=t(2654),be=t.n(Ue),Ne=t(659);be().initialize({usePersistentStorage:!1}),be().extend(Ne.Z),window.studio=be();const _e=document.getElementById("react-page");(0,r.s)(_e).render((0,E.jsx)(Te,{}))}},t={};function s(A){var r=t[A];if(void 0!==r)return r.exports;var i=t[A]={id:A,loaded:!1,exports:{}};return e[A].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,A=[],s.O=(e,t,r,i)=>{if(!t){var o=1/0;for(I=0;I<A.length;I++){for(var[t,r,i]=A[I],n=!0,a=0;a<t.length;a++)(!1&i||o>=i)&&Object.keys(s.O).every((A=>s.O[A](t[a])))?t.splice(a--,1):(n=!1,i<o&&(o=i));if(n){A.splice(I--,1);var g=r();void 0!==g&&(e=g)}}return e}i=i||0;for(var I=A.length;I>0&&A[I-1][2]>i;I--)A[I]=A[I-1];A[I]=[t,r,i]},s.n=A=>{var e=A&&A.__esModule?()=>A.default:()=>A;return s.d(e,{a:e}),e},s.d=(A,e)=>{for(var t in e)s.o(e,t)&&!s.o(A,t)&&Object.defineProperty(A,t,{enumerable:!0,get:e[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(A){if("object"==typeof window)return window}}(),s.hmd=A=>((A=Object.create(A)).children||(A.children=[]),Object.defineProperty(A,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+A.id)}}),A),s.o=(A,e)=>Object.prototype.hasOwnProperty.call(A,e),s.r=A=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},s.nmd=A=>(A.paths=[],A.children||(A.children=[]),A),(()=>{var A={924:0};s.O.j=e=>0===A[e];var e=(e,t)=>{var r,i,[o,n,a]=t,g=0;if(o.some((e=>0!==A[e]))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(a)var I=a(s)}for(e&&e(t);g<o.length;g++)i=o[g],s.o(A,i)&&A[i]&&A[i][0](),A[i]=0;return s.O(I)},t=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),s.nc=void 0;var r=s.O(void 0,[348,635,476],(()=>s(5633)));r=s.O(r)})();