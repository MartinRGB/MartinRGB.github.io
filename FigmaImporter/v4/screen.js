(()=>{"use strict";var e,t,r,n={42:(e,t,r)=>{var n=r(294),a=r(953),o=r(184),i=r(882),s=r(581),l=r(243);console.log("process env build is:"),console.log("build"),console.log("is local environment false");const u="https://vrtest.xihongxian.cn",p=`${u}/external/Model/nike2.gltf`,g=`${u}/external/Model/Blender_DMGHelmet.gltf`;var c=r(477),h=r(363),d=r(598),f=r(893);const x=e=>{const t=(0,n.useRef)(),{scene:r}=(0,i.L)(e.ModelSrc,!0);return(0,o.A)((()=>{e.autoRotate&&t.current&&(t.current.rotation.y+=.01)})),(0,n.useEffect)((()=>{null!=r&&r.traverse((e=>{e.isMesh&&(e.castShadow=e.receiveShadow=!0)}))}),[r]),(0,f.jsx)("primitive",{ref:t,object:r,...e,dispose:null})},v=e=>{const t=(0,n.useRef)(),r=e.repeat[0],a=e.repeat[1];var i=(0,o.D)(c.TextureLoader,"${nginxDirLink}/external/assets/marble/Marble012_1K_Displacement.jpg");i.anisotropy=a,i.wrapS=i.wrapT=c.RepeatWrapping,i.repeat.set(r,a);var s=(0,o.D)(c.TextureLoader,"${nginxDirLink}/external/assets/marble/Marble012_1K_Roughness.jpg");s.anisotropy=a,s.wrapS=s.wrapT=c.RepeatWrapping,s.repeat.set(r,a);var l=(0,o.D)(c.TextureLoader,"${nginxDirLink}/external/assets/marble/Marble012_1K_NormalDX.jpg");l.anisotropy=a,l.wrapS=l.wrapT=c.RepeatWrapping,l.repeat.set(r,a);var u=(0,o.D)(c.TextureLoader,"${nginxDirLink}/external/assets/marble/Marble012_1K_Color.jpg");return u.anisotropy=a,u.wrapS=u.wrapT=c.RepeatWrapping,u.repeat.set(r,a),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("mesh",{ref:t,position:e.position,rotation:e.rotation,receiveShadow:!0,children:[(0,f.jsx)("planeGeometry",{args:[e.size[0],e.size[1],32],attach:"geometry"}),(0,f.jsx)("meshStandardMaterial",{map:u,displacementMap:i,roughness:.5})]})})},m=({lightColor:e,lightIntensity:t,lightRoughness:r,lightRoughnessControllable:a,lightWidth:i,lightHeight:s,lightTexture:l,position:u,rotation:p,castShadow:g})=>{const{gl:h,scene:d}=(0,o.z)(),x=(0,n.useRef)(),v=(0,n.useRef)(null);return(0,n.useEffect)((()=>{x.current&&null===v.current&&(v.current=new c.CameraHelper(x.current.shadow.camera),d.add(v.current))}),[]),(0,o.A)((()=>{v.current&&v.current.update()})),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("group",{position:u,rotation:p,children:[(0,f.jsxs)("mesh",{castshadow:!0,children:[(0,f.jsx)("planeGeometry",{args:[i,s,32],attach:"geometry"}),(0,f.jsx)("meshBasicMaterial",{color:e,map:l,toneMapped:!0,onUpdate:e=>{e.needsUpdate=!0}})]}),(0,f.jsx)("textureAreaLight",{ref:x,castShadow:!0,color:e,intensity:-t,roughness:r,width:i,height:s,texture:l,isRouhnessControllable:a,renderer:h})]})})},j=({})=>{const{invalidate:e,scene:t,gl:r,camera:a,size:i}=(0,o.z)(),[u,j]=(0,n.useState)(null),[b,y]=(0,n.useState)(null);(0,n.useEffect)((()=>{d.a.init()}),[]);const{lightColor:w,lightIntensity:R,lightRoughnessControllable:S,lightRoughness:O,lightWidth:M,lightHeight:T,lightTexture:_,position:C,rotation:L,position2:k,rotation2:D,ambientIntensity:F}=(0,h.M4)({lightColor:{value:"#ffffff"},lightIntensity:{value:1,step:.1},lightRoughnessControllable:{value:!1},lightRoughness:{value:.2,step:.1},lightTexture:{value:"${nginxDirLink}/external/assets/test_222.png",rows:!0,onChange:e=>{if(""!=e){if(e.includes(".mp4")){const t=document.createElement("video");t.src=e,t.crossOrigin="Anonymous",t.loop=!0,t.muted=!0,t.load(),t.play();const r=new c.VideoTexture(t);r.minFilter=c.NearestFilter,r.magFilter=c.LinearFilter,r.wrapS=r.wrapT=c.ClampToEdgeWrapping,console.log(r),j(r),y(t)}if(e.includes(".jpg")||e.includes(".png")){const t=(new c.TextureLoader).load(e);t.minFilter=c.NearestFilter,t.magFilter=c.LinearFilter,t.wrapS=t.wrapT=c.ClampToEdgeWrapping,t.repeat.set(1,1),j(t),y(null)}}else j(null),y(null)}},lightWidth:{value:14.4,step:.1},lightHeight:{value:9,step:1},position:{value:[0,6,-14],step:.1},rotation:{value:[.4,0,0],step:.01},position2:{value:[719,0,-540],step:1},rotation2:{value:[0,0,0]},ambientIntensity:{value:.01,step:.01}}),E=(0,n.useRef)(),W=(0,n.useRef)();return(0,n.useEffect)((()=>{if(W.current){const e=W.current,t=e=>{E.current.enabled=!e.value};return e.addEventListener("dragging-changed",t),()=>e.removeEventListener("dragging-changed",t)}})),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("color",{attach:"background",args:["#202020"]}),(0,f.jsx)("ambientLight",{intensity:F}),(0,f.jsx)("perspectiveCamera",{makeDefault:!0,aspect:i.width/i.height,fov:70,near:1,far:23e3,position:[0,0,200]}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Suspense,{fallback:null,children:" */}"}),(0,f.jsx)(s.z,{makeDefault:!0,ref:E}),(0,f.jsx)(l.J,{ref:W,children:(0,f.jsx)(m,{lightColor:w,lightIntensity:R,lightRoughness:O,lightWidth:M,lightHeight:T,lightTexture:u,lightRoughnessControllable:S,position:C,rotation:L,castShadow:!0})}),(0,f.jsx)(x,{ModelSrc:p,autoRotate:!0,scale:[.675,.675,.675],position:[-2.5,1,0]}),(0,f.jsx)(x,{ModelSrc:g,autoRotate:!0,scale:[1.35,1.35,1.35],position:[2.5,1,0]}),(0,f.jsx)(v,{size:[1e3,1e3],position:[0,-1.25,0],rotation:[-Math.PI/2,0,0],repeat:[40,40]})]})]})},b=({})=>(0,f.jsx)(a.Xz,{dpr:[0,1.5],shadows:!0,gl:{antialias:!0},children:(0,f.jsx)(j,{})}),y=()=>(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(b,{})});var w=r(745);const R=document.getElementById("react-page");(0,w.s)(R).render((0,f.jsx)(y,{}))}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,e=[],o.O=(t,r,n,a)=>{if(!r){var i=1/0;for(p=0;p<e.length;p++){for(var[r,n,a]=e[p],s=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(p--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={492:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[i,s,l]=r,u=0;if(i.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(l)var p=l(o)}for(t&&t(r);u<i.length;u++)a=i[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(p)},r=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0;var i=o.O(void 0,[493],(()=>o(42)));i=o.O(i)})();