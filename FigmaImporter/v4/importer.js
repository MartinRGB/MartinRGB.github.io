/*! For license information please see importer.js.LICENSE.txt */
(()=>{"use strict";var n,t={3118:(n,t,e)=>{var r=e(7294),o=e(5676),a=e(1037),i="https://www.martinrgb.com/FigmaImporter/v4/",s=e(3379),c=e.n(s),l=e(7795),d=e.n(l),u=e(569),p=e.n(u),f=e(3565),h=e.n(f),m=e(9216),g=e.n(m),x=e(4589),v=e.n(x),y=e(1469),b={};b.styleTagTransform=v(),b.setAttributes=h(),b.insert=p().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=g(),c()(y.Z,b),y.Z&&y.Z.locals&&y.Z.locals;var j=e(5893);function w(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,a=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(r=e.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(n){s=!0,o=n}finally{try{i||null==e.return||e.return()}finally{if(s)throw o}}return a}}(n,t)||k(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(n,t){if(n){if("string"==typeof n)return _(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_(n,t):void 0}}function _(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}const S=function(){var n=w((0,r.useState)("-"),2),t=n[0],e=n[1],s=w((0,r.useState)("-"),2),c=s[0],l=s[1],d=w((0,r.useState)("-"),2),u=d[0],p=d[1],f=w((0,r.useState)("copy figma file url here..."),2),h=f[0],m=f[1],g=w((0,r.useState)("-"),2),x=g[0],v=g[1],y=w((0,r.useState)("-"),2),b=y[0],S=y[1],T=w((0,r.useState)(""),2),N=T[0],O=T[1],C=w((0,r.useState)(""),2),A=C[0],E=C[1],I=w((0,r.useState)([]),2),R=I[0],q=I[1],F=w((0,r.useState)(!0),2),P=F[0],U=F[1],z=new o.p({clientId:"2beFW69qeg7DvjBp6bKpm5",clientSecrete:"013RerD24yjKxvSIrUr4f6dESMYST8",redirectUri:"".concat(i,"callback.html")});(0,r.useEffect)((function(){var n=new URL(window.location.href);null!=n.searchParams.get("query_key")?z.getOAuth2Token().then((function(t){e(t),U(!1),console.log(t);var r=n.searchParams.get("query_key"),o=n.searchParams.get("query_node"),a="https://www.martinrgb.com/FigmaImporter/v4/index.html"+"?query_token=".concat(t,"&query_key=").concat(r,"&query_node=").concat(o),i="https://api.figma.com/v1/files/"+"".concat(r,"/nodes?ids=").concat(o);l(r),p(o),v(i),S(a),"unity"===n.searchParams.get("query_platform")&&D(t,r,o),"webxr"===n.searchParams.get("query_platform")&&(window.location.href="".concat(a))})):z.getOAuth2Token().then((function(n){e(n),U(!1),console.log(n)}))}),[window.location.href]);var M=function(n){var t=document.createElement("textarea");t.value=n,t.setAttribute("readonly",""),t.className="hidden_copy_helper",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Copied the string: "+n)},L=function(n,e,r,o,a,i){var s=new XMLHttpRequest;s.open("GET",function(n,t,e){return"https://api.figma.com/v1/"+"images/".concat(n,"?")+"ids=".concat(t,"&")+"svg_include_id=true&format=png&"+"scale=".concat(e)}(n,e,r),!0),s.setRequestHeader("Authorization","Bearer ".concat(t)),s.send();var c=o;console.log(c),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var n=JSON.parse(s.responseText);i.push(Object.values(n.images)[0]),console.log(i),q((function(t){return[].concat(function(n){if(Array.isArray(n))return _(n)}(e=t)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[Object.values(n.images)[0]]);var e})),c===a-1&&(U(!1),console.log(i))}}},D=function(n,t,e){var r=document.createElement("a");r.href="com.unity3d.kharma:custom/query_token=".concat(n,"&file_key=").concat(t,"&frame_name=","figma","&node_id=").concat(e),r.addEventListener("click",(function(){})),document.body.appendChild(r),r.click(),document.body.removeChild(r)};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"vertical-flex-container",children:[(0,j.jsxs)("div",{className:"horizontal-flex-container",children:[(0,j.jsx)("div",{className:"flex-left",children:P?(0,j.jsx)(a.Z,{loadingProgress:"loading"}):(0,j.jsx)("div",{className:"data_snippet",children:"-"===b?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{children:["Your Figma ",(0,j.jsx)("code",{className:"code_button",children:"Token"})," is:"]}),(0,j.jsx)("div",{style:{marginTop:"6px"},children:(0,j.jsx)("strong",{children:t})}),(0,j.jsxs)("div",{style:{marginTop:"6px"},children:[(0,j.jsx)("button",{className:"green-button",onClick:function(){M(t)},children:"Copy"}),(0,j.jsx)("button",{style:{marginLeft:"6px"},className:"green-button",onClick:function(){localStorage.clear(),e("-"),z.getOAuth2Token().then((function(n){e(n),U(!1)}))},children:"Regenerate"})]})]}),(0,j.jsxs)("div",{style:{marginTop:"24px"},children:[(0,j.jsx)("textarea",{className:"file_textarea",rows:1,cols:33,onChange:function(n){return function(n){var t=n.target.value;m(t)}(n)},value:h}),(0,j.jsx)("button",{style:{marginTop:"10px"},className:"green-button",onClick:function(){!function(n){var e,r=n.split("/"),o=r.length,a=r[o-1].includes("node-id"),i=r[o-2];console.log(i),a||(e="https://api.figma.com/v1/files/".concat(i));var s=r[o-1].split("?node-id=")[1];e="https://api.figma.com/v1/files/".concat(i,"/nodes?ids=").concat(s);var c="https://www.martinrgb.com/FigmaImporter/v4/index.html"+"?query_token=".concat(t,"&query_key=").concat(i,"&query_node=").concat(s);l(i),p(s),v(e),S(c)}(h)},children:"Get API & Renderer Url"})]})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{style:{display:"none",marginTop:"24px"},children:[(0,j.jsxs)("p",{children:["Your Figma ",(0,j.jsx)("code",{className:"code_button",children:"API Url"})," is:"]}),(0,j.jsx)("div",{style:{marginTop:"6px"},children:(0,j.jsx)("strong",{children:x})}),(0,j.jsx)("button",{style:{marginTop:"6px"},className:"green-button",onClick:function(){M(x)},children:"Copy"})]}),(0,j.jsxs)("div",{style:{marginTop:"24px"},children:[(0,j.jsxs)("p",{children:["Your ",(0,j.jsx)("code",{className:"code_button",children:"Figma Token"})," is:"]}),(0,j.jsx)("div",{style:{marginTop:"6px"},children:(0,j.jsx)("strong",{children:t})}),(0,j.jsxs)("p",{children:["Your ",(0,j.jsx)("code",{className:"code_button",children:"Frame Url"})," is:"]}),(0,j.jsx)("div",{style:{marginTop:"6px"},children:(0,j.jsx)("strong",{children:"https://www.figma.com/file/".concat(c,"/figma?node-id=").concat(u)})}),(0,j.jsxs)("p",{children:["Your ",(0,j.jsx)("code",{className:"code_button",children:"WebXR Website Url"})," is:"]}),(0,j.jsx)("div",{style:{marginTop:"6px"},children:(0,j.jsx)("strong",{children:b})}),(0,j.jsxs)("div",{style:{marginTop:"6px"},children:[(0,j.jsx)("button",{className:"green-button",onClick:function(){D(t,c,u)},children:"Send To Unity"}),(0,j.jsx)("br",{}),(0,j.jsx)("button",{style:{marginTop:"6px"},className:"green-button",onClick:function(){window.open("".concat(b),"_blank")},children:"Go WebXR Site"})," ",(0,j.jsx)("br",{}),(0,j.jsx)("button",{style:{marginTop:"6px"},className:"green-button",onClick:function(){window.location.href="".concat(i,"importer.html")},children:"Go Origin Site"})," ",(0,j.jsx)("br",{}),(0,j.jsx)("button",{style:{marginTop:"6px"},className:"green-button",onClick:function(){!function(n,t){U(!0);var e=new XMLHttpRequest;e.open("GET",n,!0),e.setRequestHeader("Authorization","Bearer ".concat(t)),e.send(),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var n=JSON.parse(e.responseText);O(n),E(JSON.stringify(n,null,"\t")),U(!1)}}}(x,t)},children:"Get JSON Data"}),(0,j.jsx)("br",{}),N?(0,j.jsx)("button",{style:{marginTop:"6px"},className:"green-button",onClick:function(){!function(n){U(!0);var t=[],e=[];q([]);var r=Object.values(n.nodes)[0];console.log(r);for(var o=0;o<r.document.children.length;o++)if(console.log(o),t.push(r.document.children[o].id),o===r.document.children.length-1){console.log(t);for(var a=0;a<t.length;a++)L(c,t[a],1,a,t.length,e)}}(N)},children:"Get Image"}):(0,j.jsx)(j.Fragment,{})]})]})]})})}),N&&!P?(0,j.jsx)("div",{className:"flex-right",children:(0,j.jsx)("textarea",{className:"json-textarea",value:A,onChange:function(n){E(n.target.value)}})}):(0,j.jsx)(j.Fragment,{})]}),0!=R.length?(0,j.jsx)("div",{className:"images-list",children:R.map((function(n){return(0,j.jsx)("img",{src:n})}))}):(0,j.jsx)(j.Fragment,{})]})})};var T=e(745),N=document.getElementById("react-page");(0,T.s)(N).render((0,j.jsx)(S,{}))},1469:(n,t,e)=>{e.d(t,{Z:()=>s});var r=e(6213),o=e.n(r),a=e(3645),i=e.n(a)()(o());i.push([n.id,"* {\n\tborder: 0;\n\tbox-sizing: border-box;\n\tmargin: 0;\n\tpadding: 0;\n}\nbody {\n\tbackground-color: var(--bg);\n\tcolor: var(--fg);\n\tfont: 1em/1.5 sans-serif;\n\theight: 100vh;\n\tdisplay: grid;\n\tplace-items: center;\n\ttransition: background-color var(--trans-dur);\n\toverflow: hidden;\n}\nmain {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n}\np {\n\tfont-size: 14px;\n\topacity: 60%;\n}\nstrong{\n\tfont-size: 16px;\n\t/* margin-right:12px; */\n\tword-break: break-all;\n}\n\ncode{\n\tbackground: #7f7f7f4f;\n\tpadding: 2px 6px 2px 6px;\n\tborder-radius: 4px;\n}\n\nimg {\n\tscroll-snap-align: start;\n\tflex: 0 0 150px;\n\twidth: 150px;\n\theight: 150px;\n\tborder-radius: 5px;\n\tobject-fit: contain;\n\tbackground: #ffffff40;\n    padding: 12px;\n}\n\ntextarea {\n\twidth: 100%;\n\theight: 24px;\n\tline-height: 24px;\n\tpadding-left: 8px;\n\tpadding-right: 8px;\n\toutline: none;\n\tfont-size: 12px;\n\tcolor:var(--fg);\n\tbackground: #7f7f7f4f;\n}\n\n.ip {\n\twidth: 16em;\n\theight: 8em;\n}\n.ip__track {\n\tstroke: hsl(var(--hue), 90%, 90%);\n\ttransition: stroke var(--trans-dur);\n}\n.ip__worm1,\n.ip__worm2 {\n\tanimation: worm1 2s linear infinite;\n}\n.ip__worm2 {\n\tanimation-name: worm2;\n}\n\n.left-container{\n\twidth: 50%;\n\tposition: absolute;\n\tleft: 0px;\n\theight: 100%;\n}\n.right-container{\n\tposition: absolute;\n\tright: 0px;\n\twidth: 50%;\n\theight: 100%;\n}\n.data_snippet{\n\t/* position: absolute;\n\twidth: calc(100% -96px);\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%); */\n\twidth: fit-content;\n    margin: 0 auto;\n}\n\n.code_button{\n\tcursor: pointer;\n}\n\n.loading_text{\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, calc(-50% + 40px));\n\tz-index: 1000;\n}\n\n/* Dark theme */\n@media (prefers-color-scheme: dark) {\n\t:root {\n\t\t--bg: hsl(var(--hue), 90%, 5%);\n\t\t--fg: hsl(var(--hue), 90%, 95%);\n\t}\n\t.ip__track {\n\t\tstroke: hsl(var(--hue), 90%, 15%);\n\t}\n}\n\n/* Animation */\n@keyframes worm1 {\n\tfrom {\n\t\tstroke-dashoffset: 0;\n\t}\n\t50% {\n\t\tanimation-timing-function: steps(1);\n\t\tstroke-dashoffset: -358;\n\t}\n\t50.01% {\n\t\tanimation-timing-function: linear;\n\t\tstroke-dashoffset: 358;\n\t}\n\tto {\n\t\tstroke-dashoffset: 0;\n\t}\n}\n@keyframes worm2 {\n\tfrom {\n\t\tstroke-dashoffset: 358;\n\t}\n\t50% {\n\t\tstroke-dashoffset: 0;\n\t}\n\tto {\n\t\tstroke-dashoffset: -358;\n\t}\n}\n\n:root {\n\t--hue: 223;\n\t--bg: hsl(var(--hue), 90%, 95%);\n\t--fg: hsl(var(--hue), 90%, 5%);\n\t--trans-dur: 0.3s;\n\tfont-size: calc(16px + (24 - 16) * (100vw - 320px) / (1280 - 320));\n}\n\n.vertical-flex-container{\n\tdisplay: flex;\n    flex-direction: column;\n    justify-content: center;\n\twidth: 100vw;\n    height: 100vh;\n}\n\n.horizontal-flex-container{\n\tdisplay: flex;\n    flex-direction: row;\n    justify-content: center;\n\twidth: 100vw;\n    /* height: 100vh; */\n\tflex:1;\n}\n\n\n.flex-right{\n\tflex:1;\n\tpadding:24px;\n\tdisplay: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n.flex-left{\n\tflex:1;\n\tpadding:24px;\n\tdisplay: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n.hidden_copy_helper{\n\tposition: absolute;\n\tleft: -99999px;\n}\n\n.green-button {\n\tfont-size: 14px;\n\tline-height: 16px;\n\tpadding: 4px 8px 4px 8px;\n\tborder-radius: 6px;\n\tbackground: #10bd4e;\n\tcolor: white;\n\tborder: 1px solid #ffffff87;\n\tcursor: pointer;\n}\n\n.json-textarea{\n\theight: 100%;\n\twidth: 100%;\n\tbackground: transparent;\n\tpadding: 24px;\n}\n\n.images-list {\n\twidth: 100%;\n\tgap: 1rem;\n\toverflow-x: auto;\n\tscroll-snap-type: x;\n\tbackground: #5e5e5e;\n    /* position: absolute; */\n    z-index: 100;\n    padding: 0px;\n    bottom: 0px;\n\tpadding: 20px;\n    /* min-height: 190px; */\n\tmax-height: 190px;\n\theight:190px;\n\toverflow-x: scroll;\n\tdisplay: flex;\n\tflex:1;\n}\n\n  ",""]);const s=i},3645:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",r=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),r&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),r&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,r,o,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<n.length;l++){var d=[].concat(n[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),e&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=e):d[2]=e),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},6213:n=>{n.exports=function(n){return n[1]}},5251:(n,t,e)=>{var r=e(7294),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(n,t,e){var r,a={},l=null,d=null;for(r in void 0!==e&&(l=""+e),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(n&&n.defaultProps)for(r in t=n.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:n,key:l,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},7294:(n,t,e)=>{n.exports=e(2408)},5893:(n,t,e)=>{n.exports=e(5251)},3379:n=>{var t=[];function e(n){for(var e=-1,r=0;r<t.length;r++)if(t[r].identifier===n){e=r;break}return e}function r(n,r){for(var a={},i=[],s=0;s<n.length;s++){var c=n[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=e(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=o(f,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function o(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,o){var a=r(n=n||[],o=o||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var s=e(a[i]);t[s].references--}for(var c=r(n,o),l=0;l<a.length;l++){var d=e(a[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=c}}},569:n=>{var t={};n.exports=function(n,e){var r=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},9216:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},3565:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},7795:n=>{n.exports=function(n){var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var o=void 0!==e.layer;o&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,o&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},4589:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,n=[],r.O=(t,e,o,a)=>{if(!e){var i=1/0;for(d=0;d<n.length;d++){for(var[e,o,a]=n[d],s=!0,c=0;c<e.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((n=>r.O[n](e[c])))?e.splice(c--,1):(s=!1,a<i&&(i=a));if(s){n.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=n.length;d>0&&n[d-1][2]>a;d--)n[d]=n[d-1];n[d]=[e,o,a]},r.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return r.d(t,{a:t}),t},r.d=(n,t)=>{for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},r.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),(()=>{var n={685:0};r.O.j=t=>0===n[t];var t=(t,e)=>{var o,a,[i,s,c]=e,l=0;if(i.some((t=>0!==n[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var d=c(r)}for(t&&t(e);l<i.length;l++)a=i[l],r.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return r.O(d)},e=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))})(),r.nc=void 0;var o=r.O(void 0,[348,423],(()=>r(3118)));o=r.O(o)})();