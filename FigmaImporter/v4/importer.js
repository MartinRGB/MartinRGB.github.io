(()=>{"use strict";var n,e={7538:(n,e,t)=>{var r,o,i,a,c,l,s,d,u,f,h,p,g,x,m,b=t(7294),v=t(5676),y=t(3577),j="https://www.martinrgb.com/FigmaImporter/v4/",w=t(2788);function k(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var C={light:{colors:{bg:"#e7edfe",fg:"#010818"}},dark:{colors:{bg:"#010818",fg:"#e7edfe"}}},S=(0,w.vJ)(r||(r=k(["\n    * {\n        border: 0;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n    }\n    body {\n        font-family: sans-serif;\n        background-color: ",";\n        color: ",";\n        font: 1em/1.5 sans-serif;\n        height: 100vh;\n        display: grid;\n        place-items: center;\n        transition: background-color 0.3s;\n        overflow: hidden;\n    }\n"])),(function(n){return n.theme.colors.bg}),(function(n){return n.theme.colors.fg})),O=w.ZP.div(o||(o=k(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 100vw;\n    height: 100vh;\n"]))),P=w.ZP.div(i||(i=k(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    width: 100vw;\n    flex:1;\n"]))),_=w.ZP.div(a||(a=k(["\n    flex:1;\n    padding:24px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]))),A=w.ZP.div(c||(c=k(["\n    flex:1;\n    padding:24px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]))),q=w.ZP.div(l||(l=k(["\n    width: fit-content;\n    margin: 0 auto;\n"]))),I=w.ZP.div(s||(s=k(["\n    margin-top: 6px;\n    margin-bottom: 6px;\n    * {\n      margin-top: 6px;\n      margin-bottom: 6px;\n    }\n"]))),Z=w.ZP.p(d||(d=k(["\n    font-size: 14px;\n    opacity: 60%;\n"]))),F=w.ZP.strong(u||(u=k(["\n    font-size: 16px;\n    word-break: break-all;\n"]))),T=w.ZP.code(f||(f=k(["\n    //cursor: pointer;\n    background: #7f7f7f4f;\n    padding: 2px 6px 2px 6px;\n    border-radius: 4px;\n    font-family: sans-serif;\n    font-weight: 700;\n    font-size: 12px;\n    line-height: 12px;\n"]))),z=w.ZP.button(h||(h=k(["\n    font-size: 14px;\n    line-height: 16px;\n    padding: 4px 8px 4px 8px;\n    border-radius: 6px;\n    background: #10bd4e;\n    color: white;\n    border: 1px solid #ffffff87;\n    cursor: pointer;\n    margin-right:6px;\n    outline: none;\n"]))),R=w.ZP.textarea(p||(p=k(["\n    width: 100%;\n    height: 24px;\n    line-height: 24px;\n    padding-left: 8px;\n    padding-right: 8px;\n    outline: none;\n    font-size: 12px;\n    color:",";\n    background: #7f7f7f4f;\n    font-family: sans-serif;\n    font-weight: 400;\n"])),(function(n){return n.theme.colors.fg})),E=w.ZP.textarea(g||(g=k(["\n    height: 100%;\n    width: 100%;\n    line-height: 24px;\n    padding: 24px;\n    outline: none;\n    font-size: 12px;\n    color:",";\n    background: transparent;\n    font-family: sans-serif;\n    font-weight: 400;\n"])),(function(n){return n.theme.colors.fg})),U=w.ZP.div(x||(x=k(["\n    width: 100%;\n    gap: 1rem;\n    overflow-x: auto;\n    scroll-snap-type: x;\n    background: #5e5e5e;\n    z-index: 100;\n    padding: 0px;\n    bottom: 0px;\n    padding: 20px;\n    max-height: 190px;\n    height:190px;\n    overflow-x: auto;\n    display: flex;\n    flex:1;\n"]))),G=w.ZP.img(m||(m=k(["\n    scroll-snap-align: start;\n    flex: 0 0 150px;\n    width: 150px;\n    height: 150px;\n    border-radius: 5px;\n    object-fit: contain;\n    background: #ffffff40;\n    padding: 12px;\n"]))),M=t(5893);function Y(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(n){c=!0,o=n}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(n,e)||X(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(n,e){if(n){if("string"==typeof n)return J(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?J(n,e):void 0}}function J(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var B=window.matchMedia("(prefers-color-scheme: dark)");const D=function(){var n=Y((0,b.useState)("-"),2),e=n[0],t=n[1],r=Y((0,b.useState)("-"),2),o=r[0],i=r[1],a=Y((0,b.useState)("-"),2),c=a[0],l=a[1],s=Y((0,b.useState)("copy figma file url here..."),2),d=s[0],u=s[1],f=Y((0,b.useState)("-"),2),h=f[0],p=f[1],g=Y((0,b.useState)("-"),2),x=g[0],m=g[1],k=Y((0,b.useState)(""),2),D=k[0],H=k[1],N=Y((0,b.useState)(""),2),W=N[0],L=N[1],K=Y((0,b.useState)([]),2),V=K[0],$=K[1],Q=Y((0,b.useState)(!0),2),nn=Q[0],en=Q[1],tn=new v.p({clientId:"2beFW69qeg7DvjBp6bKpm5",clientSecrete:"013RerD24yjKxvSIrUr4f6dESMYST8",redirectUri:"".concat(j,"callback.html")}),rn=Y((0,b.useState)("light"),2),on=rn[0],an=rn[1];console.log("isDarkMode"+B.matches),(0,b.useEffect)((function(){an(B.matches?"dark":"light")}),[B.matches]),(0,b.useEffect)((function(){var n=new URL(window.location.href);null!=n.searchParams.get("query_key")?tn.getOAuth2Token().then((function(e){t(e),en(!1),console.log(e);var r=n.searchParams.get("query_key"),o=n.searchParams.get("query_node"),a="https://www.martinrgb.com/FigmaImporter/v4/index.html"+"?query_token=".concat(e,"&query_key=").concat(r,"&query_node=").concat(o),c="https://api.figma.com/v1/files/"+"".concat(r,"/nodes?ids=").concat(o);i(r),l(o),p(c),m(a),"unity"===n.searchParams.get("query_platform")&&xn(e,r,o),"webxr"===n.searchParams.get("query_platform")&&(window.location.href="".concat(a))})):tn.getOAuth2Token().then((function(n){t(n),en(!1),console.log(n)}))}),[window.location.href]);var cn=(0,b.useCallback)((function(){tn.getOAuth2Token().then((function(n){t(n),en(!1)}))}),[]),ln=(0,b.useCallback)((function(){localStorage.clear(),t("-"),cn()}),[]),sn=(0,b.useCallback)((function(n){var e=n.target.value;u(e)}),[]),dn=(0,b.useCallback)((function(n,e){var t,r=n.split("/"),o=r.length,a=r[o-1].includes("node-id"),c=r[o-2];console.log(c),a||(t="https://api.figma.com/v1/files/".concat(c));var s=r[o-1].split("?node-id=")[1];t="https://api.figma.com/v1/files/".concat(c,"/nodes?ids=").concat(s),console.log(e);var d="https://www.martinrgb.com/FigmaImporter/v4/index.html"+"?query_token=".concat(e,"&query_key=").concat(c,"&query_node=").concat(s);i(c),l(s),p(t),m(d)}),[]),un=(0,b.useCallback)((function(n,e,t){return"https://api.figma.com/v1/"+"images/".concat(n,"?")+"ids=".concat(e,"&")+"svg_include_id=true&format=png&"+"scale=".concat(t)}),[]),fn=(0,b.useCallback)((function(n,e,t,r,o,i,a){console.log("token");var c=new XMLHttpRequest;console.log(n,e,t),c.open("GET",un(n,e,t),!0),c.setRequestHeader("Authorization","Bearer ".concat(a)),c.send();var l=r;console.log(l),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var n=JSON.parse(c.responseText);i.push(Object.values(n.images)[0]),console.log(i),$((function(e){return[].concat(function(n){if(Array.isArray(n))return J(n)}(t=e)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(t)||X(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[Object.values(n.images)[0]]);var t})),l===o-1&&(en(!1),console.log(i))}}}),[]),hn=(0,b.useCallback)((function(n){L(n.target.value)}),[]),pn=(0,b.useCallback)((function(n){!function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-99999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Copied the string: "+n)}(n)}),[]),gn=(0,b.useCallback)((function(n,e){en(!0);var t=new XMLHttpRequest;t.open("GET",n,!0),t.setRequestHeader("Authorization","Bearer ".concat(e)),t.send(),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var n=JSON.parse(t.responseText);H(n),L(JSON.stringify(n,null,"\t")),en(!1)}}}),[]),xn=(0,b.useCallback)((function(n,e,t){var r=document.createElement("a");r.href="com.unity3d.kharma:custom/query_token=".concat(n,"&file_key=").concat(e,"&frame_name=","figma","&node_id=").concat(t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}),[]),mn=(0,b.useCallback)((function(n){window.open("".concat(n),"_blank")}),[]),bn=(0,b.useCallback)((function(n){window.location.href="".concat(n,"importer.html")}),[]),vn=(0,b.useCallback)((function(n,e,t){en(!0);var r=[],i=[];$([]);var a=Object.values(n.nodes)[0];console.log(a);var c=Object.keys(n.nodes)[0];r.push(c),console.log(o);for(var l=0;l<a.document.children.length;l++)if(console.log(l),r.push(a.document.children[l].id),l===a.document.children.length-1){console.log(r);for(var s=0;s<r.length;s++)fn(t,r[s],1,s,r.length,i,e)}}),[]);return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(w.f6,{theme:C[on],children:[(0,M.jsx)(S,{}),(0,M.jsxs)(O,{children:[(0,M.jsxs)(P,{children:[(0,M.jsx)(_,{children:nn?(0,M.jsx)(y.Z,{hintText:"loading"}):(0,M.jsx)(q,{children:"-"===x?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(I,{children:[(0,M.jsxs)(Z,{children:["Your Figma ",(0,M.jsx)(T,{children:"Token"})," is:"]}),(0,M.jsx)(F,{children:e}),(0,M.jsxs)(I,{children:[(0,M.jsx)(z,{onClick:function(){pn(e)},children:"Copy"}),(0,M.jsx)(z,{onClick:function(){ln()},children:"Regenerate"})]})]}),(0,M.jsxs)(I,{children:[(0,M.jsx)(R,{rows:1,cols:33,onChange:function(n){return sn(n)},value:d}),(0,M.jsx)(z,{onClick:function(){dn(d,e)},children:"Get API & Renderer Url"})]})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(I,{children:[(0,M.jsxs)(Z,{children:["Your Figma ",(0,M.jsx)(T,{children:"API Url"})," is:"]}),(0,M.jsx)(F,{children:h}),(0,M.jsxs)(Z,{children:["Your ",(0,M.jsx)(T,{children:"Figma Token"})," is:"]}),(0,M.jsx)(F,{children:e}),(0,M.jsxs)(Z,{children:["Your ",(0,M.jsx)(T,{children:"Frame Url"})," is:"]}),(0,M.jsx)(F,{children:"https://www.figma.com/file/".concat(o,"/figma?node-id=").concat(c)}),(0,M.jsxs)(Z,{children:["Your ",(0,M.jsx)(T,{children:"API Url"})," is:"]}),(0,M.jsx)(F,{children:h}),(0,M.jsxs)(Z,{children:["Your ",(0,M.jsx)(T,{children:"WebXR Website Url"})," is:"]}),(0,M.jsx)(F,{children:x})]}),(0,M.jsxs)(I,{children:[(0,M.jsx)(z,{onClick:function(){xn(e,o,c)},children:"Send To Unity"}),(0,M.jsx)("br",{}),(0,M.jsx)(z,{onClick:function(){mn(x)},children:"Go WebXR Site"})," ",(0,M.jsx)("br",{}),(0,M.jsx)(z,{onClick:function(){bn(j)},children:"Go Origin Site"})," ",(0,M.jsx)("br",{}),(0,M.jsx)(z,{onClick:function(){gn(h,e)},children:"Get JSON Data"}),(0,M.jsx)("br",{}),D?(0,M.jsx)(z,{onClick:function(){vn(D,e,o)},children:"Get Image"}):(0,M.jsx)(M.Fragment,{})]})]})})}),D&&!nn?(0,M.jsx)(A,{children:(0,M.jsx)(E,{value:W,onChange:hn})}):(0,M.jsx)(M.Fragment,{})]}),0!=V.length?(0,M.jsx)(U,{children:V.map((function(n){return(0,M.jsx)(G,{src:n})}))}):(0,M.jsx)(M.Fragment,{})]})]})})};var H=t(745),N=document.getElementById("react-page");(0,H.s)(N).render((0,M.jsx)(D,{}))},7294:(n,e,t)=>{n.exports=t(2408)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,n=[],r.O=(e,t,o,i)=>{if(!t){var a=1/0;for(d=0;d<n.length;d++){for(var[t,o,i]=n[d],c=!0,l=0;l<t.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((n=>r.O[n](t[l])))?t.splice(l--,1):(c=!1,i<a&&(a=i));if(c){n.splice(d--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var d=n.length;d>0&&n[d-1][2]>i;d--)n[d]=n[d-1];n[d]=[t,o,i]},r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n={685:0};r.O.j=e=>0===n[e];var e=(e,t)=>{var o,i,[a,c,l]=t,s=0;if(a.some((e=>0!==n[e]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(l)var d=l(r)}for(e&&e(t);s<a.length;s++)i=a[s],r.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return r.O(d)},t=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),r.nc=void 0;var o=r.O(void 0,[348,635,642],(()=>r(7538)));o=r.O(o)})();