/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var n,t={8081:(n,t,e)=>{var r=e(7294),o=(e(3935),e(9477)),i=e(8505),a=e(5953),c=e(1767),s=e(5062),u=e(6037),l=e(5733),p=e.n(l),d=e(3162);function f(n){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f(n)}function h(){h=function(){return n};var n={},t=Object.prototype,e=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{c({},"")}catch(n){c=function(n,t,e){return n[t]=e}}function s(n,t,e,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===l)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var s=u(n,t,e);if("normal"===s.type){if(r=e.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(r="completed",e.method="throw",e.arg=s.arg)}}}(n,e,a),i}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=s;var l={};function p(){}function d(){}function g(){}var m={};c(m,o,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(E([])));x&&x!==t&&e.call(x,o)&&(m=x);var y=g.prototype=p.prototype=Object.create(m);function b(n){["next","throw","return"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function w(n,t){function r(o,i,a,c){var s=u(n[o],n,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==f(p)&&e.call(p,"__await")?t.resolve(p.__await).then((function(n){r("next",n,a,c)}),(function(n){r("throw",n,a,c)})):t.resolve(p).then((function(n){l.value=n,a(l)}),(function(n){return r("throw",n,a,c)}))}c(s.arg)}var o;this._invoke=function(n,e){function i(){return new t((function(t,o){r(n,e,t,o)}))}return o=o?o.then(i,i):i()}}function _(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,_(n,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function j(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function L(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(j,this),this.reset(!0)}function E(n){if(n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=g,c(y,"constructor",g),c(g,"constructor",d),d.displayName=c(g,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,g):(n.__proto__=g,c(n,a,"GeneratorFunction")),n.prototype=Object.create(y),n},n.awrap=function(n){return{__await:n}},b(w.prototype),c(w.prototype,i,(function(){return this})),n.AsyncIterator=w,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new w(s(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},b(y),c(y,a,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=E,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),s=e.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),l},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),L(e),l}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;L(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:E(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),l}},n}function g(n,t,e,r,o,i,a){try{var c=n[i](a),s=c.value}catch(n){return void e(n)}c.done?t(s):Promise.resolve(s).then(r,o)}function m(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){g(i,r,o,a,c,"next",n)}function c(n){g(i,r,o,a,c,"throw",n)}a(void 0)}))}}function v(n,t,e){return n.find((function(n){return n.type===e}))||null}function x(n,t,e,r){return new(e||(e=Promise))((function(o,i){function a(n){try{s(r.next(n))}catch(n){i(n)}}function c(n){try{s(r.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((r=r.apply(n,t||[])).next())}))}function y(n,t){return b.apply(this,arguments)}function b(){return(b=m(h().mark((function n(t,e){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch(t).then((function(n){return n.blob()})).then((function(n){var t=new FileReader;t.readAsDataURL(n),t.onloadend=function(){e(t.result)}}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(n,t,e,r,o){return _.apply(this,arguments)}function _(){return _=m(h().mark((function n(t,e,r,o,i){var a,c,s,u,l,p,d,f;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=0,c="https://api.figma.com/v1/files/"+"".concat(e,"/nodes?ids=").concat(r),n.next=5,fetch(c,{headers:{Authorization:"Bearer ".concat(t)},method:"GET"});case 5:return s=n.sent,n.next=8,s.json();case 8:return u=n.sent,l=Object.values(u.nodes)[0].document,p=l.children.length,d=new Array(p+1),f=function(){var n=m(h().mark((function n(i){var c,s;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(fetch("https://api.figma.com/v1/"+"images/".concat(e,"?")+"ids=".concat(r,"&")+"svg_include_id=true&format=png&"+"scale=".concat(1),{headers:{Authorization:"Bearer ".concat(t)},method:"GET"}).then((function(n){return n.json()})).then((function(n){return Object.values(n.images)[0]})).then((function(n){y(n,(function(n){d.splice(0,1,{name:l.name,width:l.absoluteRenderBounds.width,height:l.absoluteRenderBounds.height,x:l.absoluteRenderBounds.x-l.absoluteRenderBounds.x,y:l.absoluteRenderBounds.y-l.absoluteRenderBounds.y,src:n,type:"image-framenode",index:0,id:l.id,fw:l.absoluteRenderBounds.width,fh:l.absoluteRenderBounds.height}),console.log("fetched num "+a),console.log("fetched index 0"),a++,o("".concat(a,"/").concat(p+1)),i(a)}))})),c=function(){var n=s,r=l.children[n];fetch("https://api.figma.com/v1/"+"images/".concat(e,"?")+"ids=".concat(r.id,"&")+"svg_include_id=true&format=png&"+"scale=".concat(1),{headers:{Authorization:"Bearer ".concat(t)},method:"GET"}).then((function(n){return n.json()})).then((function(n){return Object.values(n.images)[0]})).then((function(t){var e=n+1;y(t,(function(t){d.splice(e,1,{name:r.name,width:r.absoluteRenderBounds.width,height:r.absoluteRenderBounds.height,x:r.absoluteRenderBounds.x-l.absoluteRenderBounds.x,y:r.absoluteRenderBounds.y-l.absoluteRenderBounds.y,src:t,type:"image-childnode",index:n+1,id:r.id,fw:l.absoluteRenderBounds.width,fh:l.absoluteRenderBounds.height}),console.log("fetched num "+a),console.log("fetched index "+(n+1)),a++,o("".concat(a,"/").concat(p+1)),i(a)}))}))},s=0;s<p;s++)c();case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),n.next=15,f((function(n){a===p+1&&i(d)}));case 15:case"end":return n.stop()}}),n)}))),_.apply(this,arguments)}function j(n){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},j(n)}function L(){L=function(){return n};var n={},t=Object.prototype,e=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{c({},"")}catch(n){c=function(n,t,e){return n[t]=e}}function s(n,t,e,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===l)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var s=u(n,t,e);if("normal"===s.type){if(r=e.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(r="completed",e.method="throw",e.arg=s.arg)}}}(n,e,a),i}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=s;var l={};function p(){}function d(){}function f(){}var h={};c(h,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==t&&e.call(m,o)&&(h=m);var v=f.prototype=p.prototype=Object.create(h);function x(n){["next","throw","return"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function y(n,t){function r(o,i,a,c){var s=u(n[o],n,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==j(p)&&e.call(p,"__await")?t.resolve(p.__await).then((function(n){r("next",n,a,c)}),(function(n){r("throw",n,a,c)})):t.resolve(p).then((function(n){l.value=n,a(l)}),(function(n){return r("throw",n,a,c)}))}c(s.arg)}var o;this._invoke=function(n,e){function i(){return new t((function(t,o){r(n,e,t,o)}))}return o=o?o.then(i,i):i()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function E(n){if(n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=f,c(v,"constructor",f),c(f,"constructor",d),d.displayName=c(f,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,c(n,a,"GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},x(y.prototype),c(y.prototype,i,(function(){return this})),n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(s(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},x(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=E,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),s=e.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),l},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),l}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:E(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),l}},n}function k(n){return new Promise((function(t){var e=new Image;e.onload=function(){return t(e)},e.src=n}))}function E(n){for(var t=n.split(",")[1],e=atob(t),r=new ArrayBuffer(e.length),o=new Uint8Array(r),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return o}var R=e(6381),P=e(7395),S=e(6801),O=e(2162),F=e(5166),z=e(3379),D=e.n(z),T=e(7795),N=e.n(T),B=e(569),I=e.n(B),M=e(3565),G=e.n(M),A=e(9216),U=e.n(A),C=e(4589),V=e.n(C),H=e(4943),q={};q.styleTagTransform=V(),q.setAttributes=G(),q.insert=I().bind(null,"head"),q.domAPI=N(),q.insertStyleElement=U(),D()(H.Z,q),H.Z&&H.Z.locals&&H.Z.locals;var X=e(1037),Z=e(5676),Y=e(5893);function Q(n){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Q(n)}function W(){W=function(){return n};var n={},t=Object.prototype,e=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{c({},"")}catch(n){c=function(n,t,e){return n[t]=e}}function s(n,t,e,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(n,t,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=b(a,e);if(c){if(c===l)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var s=u(n,t,e);if("normal"===s.type){if(r=e.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(r="completed",e.method="throw",e.arg=s.arg)}}}(n,e,a),i}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=s;var l={};function p(){}function d(){}function f(){}var h={};c(h,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(L([])));m&&m!==t&&e.call(m,o)&&(h=m);var v=f.prototype=p.prototype=Object.create(h);function x(n){["next","throw","return"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function y(n,t){function r(o,i,a,c){var s=u(n[o],n,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==Q(p)&&e.call(p,"__await")?t.resolve(p.__await).then((function(n){r("next",n,a,c)}),(function(n){r("throw",n,a,c)})):t.resolve(p).then((function(n){l.value=n,a(l)}),(function(n){return r("throw",n,a,c)}))}c(s.arg)}var o;this._invoke=function(n,e){function i(){return new t((function(t,o){r(n,e,t,o)}))}return o=o?o.then(i,i):i()}}function b(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,b(n,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[n.resultName]=o.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function _(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function j(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function L(n){if(n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=f,c(v,"constructor",f),c(f,"constructor",d),d.displayName=c(f,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,c(n,a,"GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},x(y.prototype),c(y.prototype,i,(function(){return this})),n.AsyncIterator=y,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new y(s(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},x(v),c(v,a,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=L,j.prototype={constructor:j,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),s=e.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),l},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),_(e),l}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:L(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),l}},n}function K(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],a=!0,c=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(n){c=!0,o=n}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}}(n,t)||function(n,t){if(n){if("string"==typeof n)return J(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?J(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var $=100,nn=(0,P.Ah)(c.c,"perspectiveCamera"),tn=(0,R.getProject)("XRViewer").sheet("Node Tree","Helper"),en=(0,R.getProject)("XRViewer").sheet("Node Tree","Asset"),rn=tn.object("helper",{cameraHelper:R.types.boolean(!1),polarHelper:R.types.boolean(!0),dotHelper:R.types.boolean(!1),quality:R.types.stringLiteral(2,{1:"x1",2:"x2",3:"x3"})}),on=function(n,t,e){var r=v(n.children,0,"CameraHelper"),a=new o.PolarGridHelper(400,8,4,64,16777215,16777215);a.position.y=-e/2*$,a.position.z=$,a.visible=t.current.value.polarHelper,n.add(a);var c=new o.PlaneGeometry(800,800,Math.min(250,Math.max(40,4e3)),Math.min(250,Math.max(40,4e3)));c.rotateX(Math.PI/2);var s=new o.PointsMaterial({transparent:!1,fog:!1});s.map=function(n,t){var e=document.createElement("canvas");e.width=e.height=800;var r=e.getContext("2d"),i=new o.Texture(e);i.magFilter=o.LinearFilter,i.minFilter=o.LinearMipMapLinearFilter;return r.beginPath(),r.arc(400,400,400,0,2*Math.PI,!1),r.closePath(),r.fillStyle="#ffffff",r.fill(),i.generateMipmaps=!0,i.needsUpdate=!0,i}(),s.size=.00825;var u=new o.Points(c,s);u.position.y=-e/2*$,u.position.z=$,u.visible=t.current.value.dotHelper,n.add(u),t.current.onValuesChange((function(n){r.visible=n.cameraHelper,a.visible=n.polarHelper,u.visible=n.dotHelper,(0,i.l)()}))},an=function(n,t){null===document.getElementById("theatrejs-studio-root").shadowRoot&&(console.log("removed duplicated theatreJS studio"),document.body.removeChild(document.getElementById("theatrejs-studio-root")));var e=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[1].children[0].children[1],r=n.children,o=v(r,0,"CameraHelper");e.addEventListener("click",(function(i){return r.includes(o)?(i.stopPropagation(),new Promise((function(n,e){console.log("remove step 1 - remove helper first"),o.removeFromParent(),t(),setTimeout((function(){return n(1)}),1)})).then((function(n){console.log("remove step 2 - click btn second"),e.children[1].click()}))):(console.log("remove step 3 - snapshot opened"),setTimeout((function(){var e=document.getElementById("theatrejs-studio-root").shadowRoot.children[1].children[0].children[2].children[8].children[0].children[0];e.addEventListener("click",(function i(){return r.includes(o)||new Promise((function(n,t){console.log("add step 1 - close window first"),setTimeout((function(){return n(1)}),1)})).then((function(e){console.log("add step 2 - add camHelper"),n.add(o),t()})),e.removeEventListener("click",i),!0}))}),1)),!0}))},cn=(0,r.forwardRef)((function(n,t){var e=K((0,r.useState)(1),2),a=e[0],u=e[1],l=(0,r.useRef)(null);(0,s.H)(t,o.CameraHelper);var p=(0,i.y)(),d=p.invalidate;return p.scene,(0,r.useEffect)((function(){var t,e,r=null===(t=n.mount.current)||void 0===t?void 0:t.getParentRef().current.clientWidth,o=null===(e=n.mount.current)||void 0===e?void 0:e.getParentRef().current.clientHeight;console.log("aspect: "+r/o),u(r/o),n.objRef.current.onValuesChange((function(n){n.control?d():l.current&&(l.current.position.x=n.position.x,l.current.position.y=n.position.y,l.current.position.z=n.position.z,l.current.rotation.x=n.rotation.x,l.current.rotation.y=n.rotation.y,l.current.rotation.z=n.rotation.z,l.current.scale.x=n.scale.x,l.current.scale.y=n.scale.y,l.current.scale.z=n.scale.z,l.current.near=n.near,l.current.far=n.far,l.current.fov=n.fov,l.current.zoom=n.zoom,l.current.matrixWorldNeedsUpdate=!0,l.current.updateProjectionMatrix(),l.current.updateMatrixWorld(),d())}))}),[]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(c.c,{ref:l,makeDefault:!0,fov:60,aspect:a,near:.01,zoom:1,far:1e4,position:[0,0,$]}),(0,Y.jsx)(nn,{theatreKey:"camera",objRef:n.objRef,ref:t,additionalProps:{control:R.types.boolean(!0)},fov:60,aspect:a,near:.01,zoom:1,far:1e4,position:[0,0,$]})]})})),sn=function(n){var t=(0,r.useRef)(null),e=K((0,r.useState)(!0),2),o=e[0],a=e[1];return(0,i.z)((function(){n.cameraObj.current.getParentRef().current.value.control?a(!0):a(!1)})),(0,Y.jsx)(Y.Fragment,{children:o?(0,Y.jsx)(u.z,{ref:t}):(0,Y.jsx)(Y.Fragment,{})})},un=function(n){var t=(0,i.y)(),e=t.invalidate,o=(t.scene,t.gl,t.camera,function(){var t=(0,S.nH)(),o=t.player,i=t.isPresenting;return t.session,(0,r.useEffect)((function(){var t=n.camera.current.getParentRef().current.parent.children;if(i){o.visible=!1,v(t,0,"CameraHelper").visible=!1;var r=Math.sqrt(3),a=n.cameraObj.current.getParentRef().current.value.position.x,c=n.cameraObj.current.getParentRef().current.value.position.y,s=n.cameraObj.current.getParentRef().current.value.position.z,u=n.cameraObj.current.getParentRef().current.value.rotation.x,l=n.cameraObj.current.getParentRef().current.value.rotation.y,p=n.cameraObj.current.getParentRef().current.value.rotation.z,d=n.cameraObj.current.getParentRef().current.value.fov,f=n.cameraObj.current.getParentRef().current.value.zoom;o.position.x=a,o.position.y=c-1.6,o.position.z=s*Math.tan(d/(2*f)*Math.PI/180)*r,o.rotation.x=u,o.rotation.y=l,o.rotation.z=p,o.children[0].position.y=0,console.log(o),setTimeout((function(){o.visible=!0,e()}),1)}}),[i]),null});return(0,Y.jsxs)(S.XR,{children:[(0,Y.jsx)(O.z,{}),(0,Y.jsx)(F.D,{}),n.children,(0,Y.jsx)(o,{})]})},ln=function(n){var t=K((0,r.useState)(!1),2),e=t[0],a=t[1],c=(0,r.useRef)(null),s=(0,r.useRef)(null),u=(0,r.useRef)(null),l=(0,r.useRef)(null),p=K((0,r.useState)(1),2),d=p[0],f=p[1],h=K((0,r.useState)(null),2),g=h[0],m=h[1],v=K((0,r.useState)(!1),2),x=v[0],y=v[1];return(0,r.useEffect)((function(){!0===n.isQuery?n.hasData&&0!=n.index&&(new o.TextureLoader).load(n.src,(function(n){n.needsUpdate=!0,f(n.image.height/n.image.width),n.encoding=o.sRGBEncoding,m(n),y(!0),n.dispose(),(0,i.l)()})):n.hasData?(new o.TextureLoader).load(n.src,(function(n){n.needsUpdate=!0,f(n.image.height/n.image.width),n.encoding=o.sRGBEncoding,m(n),y(!0),n.dispose(),(0,i.l)()})):new Promise((function(n,t){n(function(n,t,e,r,i,a){var c=document.createElement("canvas");c.width=t,c.height=e;var s=c.getContext("2d"),u=new o.Texture(c);u.magFilter=o.LinearFilter,u.minFilter=o.LinearMipMapLinearFilter;s.lineWidth=4,s.strokeStyle="white",s.beginPath();for(var l=0;l<=t;l+=213.33333333333334)0===l?(s.moveTo(2,0),s.lineTo(2,e)):(s.moveTo(l-2,0),s.lineTo(l-2,e));for(var p=0;p<=e;p+=120)0===p?(s.moveTo(0,2),s.lineTo(t,2)):(s.moveTo(0,p-2),s.lineTo(t,p-2));return s.stroke(),u.generateMipmaps=!0,u.needsUpdate=!0,u}(0,1920,1080).image.toDataURL("image/png"))})).then((function(n){var t=new o.Texture,e=new Image;e.src=n;var r=e;t.image=r,r.onload=function(){t.needsUpdate=!0,f(t.image.height/t.image.width),t.encoding=o.sRGBEncoding,m(t),y(!0),(0,i.l)()}}))}),[n.src,n.hasData]),(0,r.useEffect)((function(){l.current.onValuesChange((function(n){!function(n,t){0==t&&(t=1e-5);for(var e=.5*n.parameters.width,r=new o.Vector2(-e,0),i=new o.Vector2(0,t),a=new o.Vector2(e,0),c=(new o.Vector2).subVectors(r,i),s=(new o.Vector2).subVectors(i,a),u=(new o.Vector2).subVectors(r,a),l=c.length()*s.length()*u.length()/(2*Math.abs(c.cross(u))),p=new o.Vector2(0,t-l),d=2*((new o.Vector2).subVectors(r,p).angle()-.5*Math.PI),f=n.attributes.uv,h=n.attributes.position,g=new o.Vector2,m=0;m<f.count;m++){var v=1-f.getX(m),x=h.getY(m);g.copy(a).rotateAround(p,d*v),h.setXYZ(m,g.x,x,-g.y)}h.needsUpdate=!0}(s.current,n.curve)}))}),[u]),(0,Y.jsxs)(P.Ah.mesh,{theatreKey:n.name,name:n.name,onPointerOver:(0,r.useCallback)((function(n){return a(!0)}),[]),onPointerOut:(0,r.useCallback)((function(n){return a(!1)}),[]),ref:u,objRef:l,additionalProps:{curve:R.types.number(.1,{nudgeMultiplier:.001,range:[.001,$]})},visible:x,scale:n.hasData?[n.width/n.fw*1,d*(n.width/n.fw),1]:[1,d,1],position:n.hasData?[(n.x+n.width/2-n.fw/2)/n.fw*$,(n.fh/2-(n.y+n.height/2))/n.fh*(n.fh/n.fw)*$,5e-4*n.index*$]:[0,0,0],children:[(0,Y.jsx)("planeGeometry",{ref:s,args:[$,$,40,40]}),(0,Y.jsx)("meshBasicMaterial",{ref:c,side:o.DoubleSide,alphaTest:1e-4,transparent:!0,map:g,toneMapped:!1,color:e?0===n.index?"":"hotpink":"white"})]})},pn=function(n){return(0,Y.jsx)(Y.Fragment,{children:0!=n.figData.length?(0,Y.jsx)(Y.Fragment,{children:n.figData.map((function(t){var e=t.type,r=t.index,o=t.name,i=t.x,a=t.y,c=t.width,s=t.height,u=t.src;return(0,Y.jsx)(ln,{src:u,name:o.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24)+"_#".concat(r),x:0===r?0:i,y:0===r?0:a,index:r,width:c,height:s,fw:n.figData[0].width,fh:n.figData[0].height,hasData:!0,isQuery:n.isQuery},e+"-three-"+r)}))}):(0,Y.jsx)(Y.Fragment,{children:!0===n.isQuery?(0,Y.jsx)(Y.Fragment,{}):(0,Y.jsx)(ln,{name:"Screen",hasData:!1})})})},dn=(0,r.forwardRef)((function(n,t){var e=(0,r.useRef)(null),a=(0,r.useRef)(null),c=(0,r.useRef)(rn),s=K((0,r.useState)(!1),2),u=s[0],l=s[1],p=(0,i.y)(),d=p.invalidate,f=p.scene,h=p.gl,g=p.camera;(0,r.useImperativeHandle)(t,(function(){return{saveImage:function(){f.background=null;var t=function(n,t,e,r,o,i){return x(void 0,void 0,void 0,L().mark((function a(){var c,s,u,l,p;return L().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l=1*(s=n),p=1*(u=t),2===e&&(l=1*s,p=1*u),3===e&&(l=2*s,p=2*u),1===e&&(l=.5*s,p=.5*u),i.aspect=l/p,i.updateProjectionMatrix(),o.setSize(l,p),o.render(r,i,null,!1),c=o.domElement.toDataURL("image/png"),i.aspect=s/u,i.updateProjectionMatrix(),o.setSize(s,u),a.abrupt("return",c);case 20:return a.prev=20,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return");case 24:case"end":return a.stop()}}),a,null,[[0,20]])})))}(n.mount.current.getParentRef().current.clientWidth,n.mount.current.getParentRef().current.clientHeight,Number(rn.value.quality),f,h,g);return f.background=new o.Color("#272730"),t}}}));var m=(0,r.useRef)({getParentRef:function(){return e}}),v=(0,r.useRef)({getParentRef:function(){return a}});return(0,r.useEffect)((function(){if(!0===n.isQuery){if(console.log(n.queryLoadingProgress.split("/")),2===n.queryLoadingProgress.split("/").length&&n.queryLoadingProgress.split("/")[0]===n.queryLoadingProgress.split("/")[1]){var t=n.figData[0].height/n.figData[0].width;console.log("the screen aspect ratio is : "+t),on(f,c,t),an(f,d)}}else{var e=0!=n.figData.length?n.figData[0].height/n.figData[0].width:.5625;console.log("the screen aspect ratio is : "+e),on(f,c,e),an(f,d)}}),[n.isQuery,n.queryLoadingProgress]),(0,Y.jsxs)(P.yR,{sheet:en,children:[(0,Y.jsx)("ambientLight",{}),(0,Y.jsx)(cn,{mount:n.mount,ref:e,objRef:a,isXR:u}),(0,Y.jsx)(sn,{cameraObj:v}),!1===n.isFigma?(0,Y.jsx)(un,{camera:m,cameraObj:v,gl:h,isXRPresenting:function(n){l(n)},children:(0,Y.jsx)(P.yR,{sheet:en,children:pn(n)})}):(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(P.yR,{sheet:en,children:pn(n)})})]})}));const fn=function(){var n=(0,r.useRef)(null),t=(0,r.useRef)(null),e=(0,r.useRef)({getParentRef:function(){return n}}),i=K((0,r.useState)([]),2),c=i[0],s=i[1],u=K((0,r.useState)(!1),2),l=u[0],f=u[1],h=K((0,r.useState)(!1),2),g=h[0],m=h[1],v=K((0,r.useState)(!1),2),y=v[0],b=v[1],_=K((0,r.useState)("0 of total nodes is loaded"),2),j=_[0],L=_[1],R=(0,r.useCallback)((function(n){return x(void 0,void 0,void 0,W().mark((function e(){var r,o,i,a,s;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.current.saveImage();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,k(r);case 8:return o=e.sent,i=o.width,a=o.height,s=E(r),e.abrupt("return",parent.postMessage({pluginMessage:{type:"save-canvas-image",name:c[0].name,width:i,height:a,blob:s}},"*"));case 13:case"end":return e.stop()}}),e)})))}),[c]),O=(0,r.useCallback)((function(n,t){var e=document.documentElement.innerHTML,r=savedFigData;new Promise((function(n,o){if(!0===t)for(var i=0;i<r.length;i++){var a=i;if(r[a].imageData=null,r[a].src="./pngs/"+r[a].name.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24)+"_%23".concat(a)+".png",a===r.length-1){var c=e.replace(/savedFigData = \'\'/g,"savedFigData = ".concat(JSON.stringify(r)));n({data:c,isServe:!0})}}else{console.log(r);var s=function(){var t=i,o=new FileReader;o.readAsDataURL(new Blob([savedFigData[t].imageData],{type:"image/png"})),o.onloadend=function(){if(r[t].imageData=null,r[t].src=o.result,t===r.length-1){console.log(r);var i=e.replace(/savedFigData = \'\'/g,"savedFigData = ".concat(JSON.stringify(r)));n({data:i,isServe:!1})}}};for(i=0;i<r.length;i++)s()}})).then((function(n){if(!0===n.isServe){var t=[],e=new Blob([n.data],{type:"text/html"}),o=window.URL.createObjectURL(e);t.push({url:o,name:"index",ext:"html"});for(var i=0;i<r.length;i++)t.push({url:document.getElementById("img-layout").children[r.length-1-i].src,name:r[i].name.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24)+"_#".concat(i),ext:"png"});console.log(r),function(n,t){if(t){var e=new(p()),r=e.folder("pngs");t.forEach((function(n){var t=fetch(n.url).then((function(n){return 200===n.status?n.blob():Promise.reject(new Error(n.statusText))})),o=n.name+"."+n.ext;"html"===n.ext&&e.file(o,t),"png"===n.ext&&r.file(o,t)})),e.generateAsync({type:"blob"}).then((function(n){return(0,d.saveAs)(n,"my_project")}))}}(0,t)}else e=new Blob([n.data],{type:"text/html"}),o=window.URL.createObjectURL(e),(i=document.createElement("a")).href=o,i.download="index_static.html",i.style="display: none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}),[]);return r.useEffect((function(){var n=new URL(window.location.href),t=n.searchParams.get("query_key"),e=n.searchParams.get("query_node"),r=n.searchParams.get("query_token");if(console.log("fileKey is: "+t),console.log("nodeId is: "+e),console.log("token is: "+r),""!=savedFigData)console.log("init with saved data"),s(savedFigData),f(!1);else if(null!=t&&null!=e){console.log("init with query data");var o=new Z.p({clientId:"2beFW69qeg7DvjBp6bKpm5",clientSecrete:"013RerD24yjKxvSIrUr4f6dESMYST8",redirectUri:"".concat("https://www.martinrgb.com/FigmaImporter/v4/","callback.html")});m(!0),b(!0),"auth_everytime"===r?o.getOAuth2Token().then((function(n){w(n,t,e,(function(n){L(n+" of total nodes is loaded")}),(function(n){savedFigData=n,s(savedFigData),console.log(savedFigData),b(!1)}))})):w(r,t,e,(function(n){L(n+" of total nodes is loaded")}),(function(n){savedFigData=n,s(savedFigData),console.log(savedFigData),b(!1)}))}else console.log("init with empty data");window.onmessage=function(n){if(null!=n.data.pluginMessage){var t=n.data.pluginMessage,e=t.type,r=t.value;if("selection"===e){if(!r)return function(){};savedFigData=r.data;for(var o=0;o<savedFigData.length;o++){var i=o;savedFigData[i].src=URL.createObjectURL(new Blob([savedFigData[i].imageData],{type:"image/png"})),o===savedFigData.length-1&&(console.log("init with figma data"),s(savedFigData),f(r.isFigma))}}if("failed"===e&&!r)return function(){}}}}),[]),(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)("div",{className:"webxr-previewer",id:"webxr-previewer",children:[(0,Y.jsx)("div",{className:"img-layout",id:"img-layout",children:c.reverse().map((function(n){var t=n.src,e=n.type,r=n.index,o=n.name;return(0,Y.jsx)("img",{src:t,className:"img-imported",id:e+"-"+r,name:o.replace(/\//g,"_").replace(/\ /g,"_").substring(0,24)+"_#".concat(r)},e+"-"+r)}))}),(0,Y.jsx)("div",{className:"xr-container",children:l?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("button",{className:"xr-button",onClick:R,children:"SaveToFigma"}),(0,Y.jsx)("button",{className:"xr-button",onClick:function(){O(P.Ah,!0)},children:"Download(Serve)"}),(0,Y.jsx)("button",{className:"xr-button",onClick:function(){O(P.Ah,!1)},children:"Download(Static)"})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(S.vZ,{className:"xr-button",mode:"AR"}),(0,Y.jsx)(S.vZ,{className:"xr-button",mode:"VR"})]})}),(0,Y.jsx)("div",{className:"vis",ref:n,children:y?(0,Y.jsx)(X.Z,{loadingProgress:"".concat(j)}):(0,Y.jsx)(a.Xz,{frameloop:"demand",gl:{preserveDrawingBuffer:!0,outputEncoding:o.sRGBEncoding,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0},children:(0,Y.jsx)(dn,{ref:t,mount:e,isFigma:l,isQuery:g,queryLoadingProgress:j,figData:c.reverse()})})})]})})};var hn=e(745),gn=e(2654),mn=e.n(gn),vn=e(659),xn=document.getElementById("react-page"),yn=(0,hn.s)(xn);mn().initialize({usePersistentStorage:!1}),mn().extend(vn.Z),yn.render((0,Y.jsx)(fn,{}))},4943:(n,t,e)=>{e.d(t,{Z:()=>c});var r=e(6213),o=e.n(r),i=e(3645),a=e.n(i)()(o());a.push([n.id,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap);"]),a.push([n.id,"body {\n    font-family: 'Inter', sans-serif;\n    font-size: 10px;\n    text-align: center;\n    /* margin: 20px; */\n    margin:0px !important;\n    color: #ccc;\n    background-color: #121212;\n    overflow: hidden;\n    height: 100vh;\n}\nbutton {\n    border-radius: 5px;\n    background: black;\n    color: black;\n    border: 1px #333 solid;\n    padding: 8px 15px;\n    margin: 15px 5px;\n    box-shadow: inset 0 0 0 1px black;\n    outline: none;\n    border-radius: 25px;\n}\n\n.xr-container{\n    position: absolute;\n    left: 50%;\n    top: 0px;\n    transform: translate(-50%, 0);\n    margin: 0 auto;\n    \n    z-index: 10;\n}\n\n.xr-button{\n    /* background-color: rgb(51, 51, 51);\n    color: white; */\n\n    border-radius: 8px;\n    opacity: 1;\n    user-select: auto;\n    padding: 8px 12px 8px 12px;\n    font-family: 'Inter', sans-serif;\n    border-radius: 100px;\n    line-height: 10px;\n    font-size: 10px;\n\n    box-shadow: 0 3px 4px -1px rgb(0 0 0 / 48%);\n    color: rgba(255,255,255,0.9);\n    background: rgba(29,53,59,0.7);\n    backdrop-filter: blur(14px);\n    border-bottom: 1px solid rgba(255,255,255,0.08);\n    \n    z-index: 11;\n    cursor: pointer;\n}\n\n.xr-button:hover{\n    background: linear-gradient(99deg, rgb(7, 136, 255) 0%, rgb(153, 0, 255) 100%);\n    border-bottom: 1px solid rgba(255,255,255,0.24);\n}\n\n.img-layout{\n    width: 100%;\n    gap: 1rem;\n    overflow-x: scroll;\n    scroll-snap-type: x;\n    z-index: 100;\n    bottom: 0px;\n    max-height: 140px;\n    height: 140px;\n    overflow-x: scroll;\n    display: flex;\n    flex: 1;\n    position: absolute;\n}\n\n\n.img-imported{\n    scroll-snap-align: start;\n    flex: 0 0 100px;\n    width: 100px;\n    height: 100px;\n    border-radius: 5px;\n    object-fit: contain;\n    background: #ffffff40;\n    padding: 12px;\n}\n\n/* #VRButton{\n    left: 20px !important;\n} */\n\n\n.webxr-previewer{\n    display: flex;\n    flex-direction: row-reverse;\n}\n\n.react-tabs__tab-list {\n    border-bottom: 1px solid #333;\n    margin: 0 0 10px;\n    padding: 0;\n    padding-bottom: 10px !important;\n}\n.react-tabs__tab--selected {\n    background: none !important;\n    border: 1px solid transparent;\n    color: #18a0fb !important;\n}\n\n.smallbtn {\n    position: absolute;\n    bottom: 20px;\n    border-radius: 15px;\n    background: white;\n    color: red;\n    border: none;\n    margin-left: -15px;\n    padding: 4px 15px;\n    box-shadow: inset 0 0 0 1px white !important;\n    outline: none !important;\n}\n\n.reset {\n    background: none !important;\n    color: #666;\n    border: none !important;\n    font-size: 10px;\n    padding: 1px 1px !important;\n    margin: 1px 1px !important;\n    box-shadow: none !important;\n    outline: none;\n    border-radius: 25px;\n}\n\n#create {\n    box-shadow: none;\n    border: 1px #18a0fb solid;\n    background: #18a0fb;\n    color: white;\n}\n\n.title_size {\n    color: white;\n    font-size: 14px !important;\n}\n.info {\n    float: right;\n    text-align: left;\n    font-style: italic;\n    width: 200px;\n    font-size: 10px;\n    margin-top: 6px;\n    margin-left: 5px;\n    color: #666 !important;\n}\n\n.vis {\n    /* position: fixed;\n    top: 0;\n    right: 25%;\n    bottom: 0;\n    left: 0; */\n    flex: 1;\n    height:100vh;\n}\n.ui {\n    width: 250px;\n    height:100vh;\n    /* left: 75%;\n    width: 25%; */\n    \n    /* position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    height: 100vh;\n    width: 25%;\n    text-align: left; */\n}\n\n.visually-hidden {\n    position: absolute;\n    overflow: hidden;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    width: 1px;\n    margin: -1px;\n    padding: 0;\n    border: 0;\n}\n.btn_hold {\n    margin-top: 30px;\n    margin-left: -10px;\n}\n\n.btn_play{\n    margin-top: 10px;\n}\n.btn_pause{\n    margin-top: 10px;\n}\n\n\ninput[type='text'] {\n    font-size: 5px !important;\n}\ninput,\nlabel,\nbutton {\n    font-family: inherit;\n    font-size: 10px;\n    color: rgba(200, 200, 200);\n}\n\n.sidebar {\n    background: #111111;\n    border-left: 1px solid rgba(60, 60, 60);\n    padding: 8px 0 0;\n    display: flex;\n    height: 100vh;\n    flex-direction: column;\n}\n\n.sidebar__label {\n    font-size: 10px;\n    font-weight: 600;\n    color: rgba(200, 200, 200);\n    padding: 0 8px;\n    margin-bottom: 6px;\n    text-align: left;\n}\n\n.sidebar__control {\n    padding: 8px;\n    display: flex;\n    flex-direction: column;\n}\n\n.sidebar__control-group {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-gap: 6px;\n}\n\n.sidebar__actions {\n    margin-top: auto;\n    display: grid;\n    grid-auto-flow: row;\n    grid-gap: 8px;\n    padding: 16px;\n}\n\n.sidebar__devices {\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 8px;\n    grid-auto-columns: min-content;\n    padding: 4px 16px 0 16px;\n    margin: 0 -8px;\n    overflow-x: auto;\n}\n\n.sidebar__device-button {\n    width: 64px;\n    height: 64px;\n    border-radius: 4px;\n    background-color: rgba(200, 200, 200, 0.05);\n    border: 0;\n    margin: 0;\n    padding: 4px;\n    outline: none;\n    position: relative;\n    cursor: pointer;\n    display: flex;\n    transition: box-shadow 0.3s ease, background 0.3s ease;\n}\n\n.sidebar__device-button:hover {\n    background-color: rgba(200, 200, 200, 0.1);\n}\n\n.sidebar__device-button:focus {\n    box-shadow: inset 0 0 0 2px rgba(200, 200, 200, 0.2);\n}\n\n.sidebar__device-button[aria-pressed='true'] {\n    box-shadow: inset 0 0 0 2px rgba(24, 160, 251);\n    background-color: rgba(24, 160, 251, 0.2);\n}\n\n.sidebar__device-image {\n    display: block;\n    width: 100%;\n    height: 100%;\n    flex: 1 1 auto;\n}\n.top_title {\n    margin-bottom: 12px;\n}\n.input__check {\n    margin-top: 5px;\n    margin-left: 8px;\n}\n.radio_space {\n    margin: 10px;\n}\n.radio_holder {\n    width: 200px;\n    padding-left: 5px;\n    padding-top: 10px;\n}\n.switch_holder {\n    float: left;\n    margin-left: 10px;\n    margin-top: 10px;\n}\n.radio_element {\n    margin-left: 20px;\n    margin-right: 20px;\n    padding-left: 10px !important;\n}\n.input {\n    display: grid;\n    justify-items: flex-start;\n    position: relative;\n}\n\n.input__label {\n    font-size: 11px;\n    font-weight: 600;\n    color: rgba(var(--rgbText));\n    padding: 0 8px;\n    margin-bottom: 6px;\n}\n\n.input__element {\n    border: none;\n    outline: none;\n    padding: 8px;\n    padding-right: 0;\n    margin: 0;\n    justify-self: stretch;\n    min-width: 0;\n    border-radius: 2px;\n    transition: box-shadow 0.3s ease;\n    background-color: rgba(var(--rgbSurface));\n    height: 32px;\n}\n\n.input__element::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n}\n\n.input__element:hover {\n    box-shadow: inset 0 0 0 1px rgba(var(--rgbText), 0.1);\n}\n\n.input__element:focus {\n    box-shadow: inset 0 0 0 2px rgba(var(--rgbPrimary));\n}\n\n.input__color-swatch {\n    width: 16px;\n    height: 16px;\n    border-radius: 2px;\n    position: absolute;\n    left: 8px;\n    bottom: 8px;\n    box-shadow: inset 0 0 0 1px rgba(var(--rgbText), 0.05);\n    border: 0;\n    margin: 0;\n    padding: 0;\n    cursor: pointer;\n    outline: none;\n    transition: box-shadow 0.3s ease;\n}\n\n.input__color-swatch:focus {\n    box-shadow: inset 0 0 0 1px rgba(var(--rgbText), 0.05), 0 0 0 2px rgba(var(--rgbText), 0.2);\n}\n\n.input__icon {\n    width: 16px;\n    height: 16px;\n    position: absolute;\n    left: 8px;\n    bottom: 8px;\n    color: rgba(255, 255, 255, 0.6);\n    pointer-events: none;\n}\n\n.input__dragger {\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: ew-resize;\n}\n\n.input__dragger .input__icon {\n    position: static;\n}\n\n.input__icon + .input__element,\n.input__dragger + .input__element,\n.input__color-swatch + .input__element,\n.dropdown + .input__element {\n    padding-left: 32px;\n}\n\n.switch-multi-button {\n    display: flex;\n    align-items: center;\n    gap: 3px;\n    border: 1px #333 solid;\n    position: relative;\n    margin: 0px;\n    padding: 3px;\n    box-sizing: border-box;\n    background: #000 !important;\n    border-radius: 3px;\n    width: intrinsic;\n    width: -moz-max-content;\n    width: -webkit-max-content;\n    width: -webkit-fit-content;\n    width: -moz-fit-content;\n    width: fit-content;\n    height: intrinsic;\n    height: -moz-max-content;\n    height: -webkit-max-content;\n    height: -webkit-fit-content;\n    height: -moz-fit-content;\n    height: fit-content;\n    font-size: 10px;\n    font-weight: 800;\n}\n.switch-multi-button .sweep-button-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px 9px !important;\n    color: #999 !important;\n    border-radius: 3px;\n    cursor: pointer;\n    box-sizing: border-box;\n}\n.switch-multi-button .sweep-button-item-active {\n    position: absolute !important;\n    background: #18a0fb !important;\n    color: white !important;\n    cursor: default;\n    box-sizing: border-box;\n}\n\n.arrow {\n    border: solid white;\n    border-width: 0 1px 1px 0;\n    display: inline-flex;\n    padding: 1px;\n    position: absolute;\n    margin-top: 4px;\n    margin-left: 8px;\n}\n\n.right {\n    transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n}\n\n.left {\n    transform: rotate(135deg);\n    -webkit-transform: rotate(135deg);\n}\n\n.up {\n    transform: rotate(-135deg);\n    -webkit-transform: rotate(-135deg);\n}\n\n.down {\n    transform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n}\n\n.dropdown-wrapper {\n    position: relative;\n    display: flex;\n    margin-left: -6px;\n}\n\n.dropdown-toggle-label {\n    display: flex;\n    position: relative;\n    width: 100%;\n    border-radius: 25px;\n    border: 1px #333 solid;\n    padding: 8px 30px 8px 20px;\n    color: #fff;\n    background: black;\n    transition: opacity 0.1s ease;\n    cursor: pointer;\n}\n\n.dropdown-toggle-label:after {\n    content: '';\n    height: 4px;\n    width: 4px;\n    background: linear-gradient(45deg, #999 50%, transparent 0);\n    display: flex;\n    position: absolute;\n    right: 15px;\n    top: 42%;\n    transform: rotate(-45deg);\n}\n\n.dropdown-wrapper input {\n    display: none;\n}\n\n.dropdown-wrapper > input:checked + label:after {\n    top: 50%;\n    transform: rotate(135deg);\n}\n\n.dropdown-wrapper > input:checked + label + .dropdown {\n    display: flex;\n    flex-direction: column;\n}\n\n.dropdown {\n    min-width: 100px;\n    z-index: 100;\n    display: none;\n    background: black;\n    opacity: 1;\n    border-radius: 10px;\n    padding: 8px 0;\n    position: absolute;\n    top: calc(100% + 4px);\n    left: 0px;\n}\n\n.dropdown label {\n    display: block;\n    padding: 5px 20px;\n    color: #fff;\n    font-family: sans-serif;\n    z-index: 100;\n    opacity: 1;\n    cursor: pointer;\n}\n\n.dropdown label:hover {\n    background-color: #222;\n}\n\n.dropdown input:checked + label {\n    font-weight: 700;\n    opacity: 1;\n    background-color: rgba(180, 180, 180, 0.1);\n}\n\n.float_right {\n    position: absolute;\n    right: -70px;\n    bottom: 113px;\n    width: 175px;\n}\n\n.float_plane_rotate {\n    position: absolute;\n    right: 0px;\n    z-index: 400;\n    top: 54px;\n    width: 105px;\n}\n.float_plane_height{\n    position: absolute;\n    right: 0px;\n    z-index: 400;\n    top: 120px;\n    width: 105px;\n}\n\n\n.float_plane_height .input__element {\n    width: 60px;\n}\n.float_plane_rotate .input__element {\n    width: 60px;\n}\n.float_UI_scale .input__element {\n    width: 60px;\n}\n.float_UI_shadow{\n    position: absolute;\n    right: 0px;\n    z-index: 400;\n    top: 260px;\n    width: 105px;\n}\n.float_UI_scale{\n    position: absolute;\n    right: 0px;\n    z-index: 400;\n    top: 241px;\n    width: 105px;\n}\n.sidebar_float {\n    width: 10px;\n}\n.float_color_char {\n    position: absolute;\n    right: -70px;\n    top: 130px;\n    width: 175px;\n}\n.float_color_grid {\n    position: absolute;\n    right: -70px;\n    top: 204px;\n    width: 175px;\n}\n.float_color_orbit {\n    position: absolute;\n    right: -70px;\n    top: 264px;\n    width: 175px;\n}\n.color_holder {\n    margin-top: 14px;\n    margin-left: 8px;\n}\n.color_prompt {\n    position: absolute;\n    margin-top: 9px;\n    color: #666;\n}\n.color_comp {\n    color: #666;\n    margin-top: 19px;\n    margin-left: 14px;\n}\n.color_comp_sm {\n    color: #666;\n    margin-top: 11px;\n    margin-left: 46px;\n}\n\n.float_bottom {\n    position: absolute;\n    bottom: 0px;\n}\n\n.picker {\n    position: relative;\n}\n\n.swatch {\n    width: 18px;\n    height: 18px;\n    border-radius: 4px;\n    margin-top: 16px;\n    border: 1px solid #333;\n    cursor: pointer;\n}\n.sm_color .swatch {\n    margin-top: 8px !important;\n    margin-left: 2px;\n}\n\n.popover {\n    position: absolute;\n    z-index: 500;\n    top: calc(100% + 5px);\n    right: 15px;\n    border-radius: 9px;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.react-colorful {\n    z-index: 1000;\n    height: 80px !important;\n    width: 160px !important;\n}\n.popover input {\n    display: block;\n    box-sizing: border-box;\n    width: 160px;\n    margin: -10px 0px 0;\n    padding: 5px;\n    padding-top: 15px;\n    border: 0px solid #333;\n    border-radius: 9px;\n\n    background: #000;\n    color: white;\n    outline: none;\n    font: inherit;\n    text-transform: uppercase;\n    text-align: center;\n    z-index: 3000;\n}\n\n.react-colorful__hue-pointer {\n    width: 16px !important;\n    height: 16px !important;\n    border-radius: 0;\n}\n.react-colorful__saturation-pointer {\n    width: 16px !important;\n    height: 16px !important;\n    border-radius: 0;\n}\n\n.react-colorful__saturation {\n    border-radius: 4px 4px 0 0;\n}\n.react-colorful__hue {\n    height: 18px !important;\n    border-radius: 0 !important;\n}\n\n",""]);const c=a}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,n=[],r.O=(t,e,o,i)=>{if(!e){var a=1/0;for(l=0;l<n.length;l++){for(var[e,o,i]=n[l],c=!0,s=0;s<e.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((n=>r.O[n](e[s])))?e.splice(s--,1):(c=!1,i<a&&(a=i));if(c){n.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=n.length;l>0&&n[l-1][2]>i;l--)n[l]=n[l-1];n[l]=[e,o,i]},r.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return r.d(t,{a:t}),t},r.d=(n,t)=>{for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),r.hmd=n=>((n=Object.create(n)).children||(n.children=[]),Object.defineProperty(n,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+n.id)}}),n),r.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),(()=>{var n={826:0};r.O.j=t=>0===n[t];var t=(t,e)=>{var o,i,[a,c,s]=e,u=0;if(a.some((t=>0!==n[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var l=s(r)}for(t&&t(e);u<a.length;u++)i=a[u],r.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return r.O(l)},e=self.webpackChunkXRViewer=self.webpackChunkXRViewer||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))})(),r.nc=void 0;var o=r.O(void 0,[766,423],(()=>r(8081)));o=r.O(o)})();